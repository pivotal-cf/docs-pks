---
title: Release Notes
owner: TKGI
topictype: releasenotes
---

This topic contains release notes for <%= vars.product_short %> (<%= vars.k8s_runtime_abbr %>) v1.11.

<p class="note warning"><strong>Warning:</strong> Before installing or upgrading to <%= vars.product_short %> v1.11,
review the <a href="#1-11-0-breaking-changes">Breaking Changes</a> below.
</p>


## <a id="1-11-7"></a><%= vars.k8s_runtime_abbr %> v1.11.7

**Release Date**: December 20, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you upgrade to <%= vars.k8s_runtime_abbr %> v1.11.7 or later
as soon as possible to mitigate the Apache Log4j vulnerabilities 
<a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a>. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-11-7-snapshot"></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1016951">v1.11.7</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>December 20, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.4</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.1</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.15</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v20.10.7<br>Windows: v19.03.18</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.4.1&#42;</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.11</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.5</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.40.0&#42;</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.29&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v10.12&#42;</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
            upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
            or later as soon as possible. 
            See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1016951"><%= vars.product_network %></a>.
        </td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.42 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1016951"><%= vars.product_network %>.</a></td>
    </tr>
</table>

<a id="1-11-7-component-updates"></a>&#42; Components marked with an asterisk have been updated.  

### <a id='1-11-7-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.7 are from <%= vars.k8s_runtime_abbr %> v1.11.6 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.10.7 and earlier v1.10 patches.


### <a id="1-11-7-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.11.7 has the following resolved issues:  

* Fixes the following CVEs:  
  * Apache Log4j vulnerability [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228).   
  * Apache Log4j vulnerability [CVE-2021-45046](https://nvd.nist.gov/vuln/detail/CVE-2021-45046).  



<%#
    
  For <a id='1-11-8-upgrade'></a>Upgrade Path  
  * Fixes infrequent occurrences of error: `kubectl: unbound variable` while creating multiple clusters simultaneously.    
    
    
    
* Component bumps fix the following CVEs:  

  * Kubernetes [CVE-2021-25741](https://nvd.nist.gov/vuln/detail/CVE-2021-25741): 
  Subpath volume mounts can access files and directories outside of the volume.  
* Fixes [BOSH Director Logs the Error 'Duplicate vm extension name'](#1-11-0-errors-after-reinstall).  
* Fixes [tkgi clusters Returns the Incorrect Number of Worker Instances](#1-11-3-incorrect-worker-count).  
#%>

<%#
* Fixes [](#).  
#%>

### <a id="1-11-7-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations)
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-7-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.6
are also in <%= vars.product_short %> v1.11.7. See the [<%= vars.k8s_runtime_abbr %> v1.11.6 Known Issues](#1-11-6-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For Known Issues in NCP v3.1.2.5, see 
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<hr>

## <a id="management-console-1-11-7"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.7

**Release Date**: December 20, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-7-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=TKGIMC-1110">v1.11.7</a></td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>December 20, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td><a href="#1-11-7">v1.11.7</a></td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td><a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">v2.10.24</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.11</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.4.0&#42;</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.183&#42;</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.42 and later</td>
    </tr>
</table>
<a id="management-console-1-11-7-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-7-upgrade'></a>Upgrade Path


The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.7 are from <%= vars.k8s_runtime_abbr %> MC v1.11.6 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.10.7 and earlier v1.10 patches.


### <a id="management-console-1-11-7-features"></a>Features and Resolved Issues

This release of the <%= vars.k8s_runtime_abbr %> Management Console includes no new features or resolved issues.  
<%# 
< %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following features and enhancements: #%>
<%#

  For <a id='management-console-1-11-8-features"></a>Features and Resolved Issues 
< %= vars.k8s_runtime_abbr % > Management Console v1.11.8 has the following resolved issues: 

* Fixes [< %= vars.k8s_runtime_abbr % > MC Does Not Support Single-Edge Node Configurations in Automated NAT Mode](#management-console-1-11-0-single-edge-node-auto-nat-mode).  
#%>

### <a id="management-console-1-11-7-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.6
are also in <%= vars.product_short %> Management Console v1.11.7.
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.6 Known Issues](#management-console-1-11-6-known-issues) below.

<hr>


## <a id="1-11-6"></a><%= vars.k8s_runtime_abbr %> v1.11.6

**Release Date**: November 15, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-11-6-snapshot"></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.6</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>November 15, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.4</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.1</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.15</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v20.10.7<br>Windows: v19.03.18</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.3.3&#42;</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.11</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.5&#42;</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.39.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.26</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v9.7</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/993515"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,6249&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/993515"><%= vars.product_network %>.</a></td>
    </tr>
</table>

<a id="1-11-6-component-updates"></a>&#42; Components marked with an asterisk have been updated.  

### <a id='1-11-6-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.6 are from <%= vars.k8s_runtime_abbr %> v1.11.5 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.10.6 and earlier v1.10 patches.


### <a id="1-11-6-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.11.6 has the following resolved issues:  

* NCP component bump fixes the following NCP Known Issues:  

  * [Issue 2871314: After TKGI upgrade from 1.10.x to 1.11.x (prior to 1.11.6), the Ingress certificates for the NSX load balancer are deleted](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html#RNA_13010).  
  * [Issue 2871321: After TKGI upgrade from 1.10.x to 1.11.x (prior to 1.11.6), if the CRD LoadBalancer is using L7 cookie persistence, it will lose the IP Address](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html#RNA_13011).  

<%#
* Component bumps fix the following CVEs:  

  * Kubernetes [CVE-2021-25741](https://nvd.nist.gov/vuln/detail/CVE-2021-25741): 
  Subpath volume mounts can access files and directories outside of the volume.  
* Fixes [BOSH Director Logs the Error 'Duplicate vm extension name'](#1-11-0-errors-after-reinstall).  
* Fixes [tkgi clusters Returns the Incorrect Number of Worker Instances](#1-11-3-incorrect-worker-count).  
#%>

<%#
* Fixes [](#).  
#%>

### <a id="1-11-6-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations)
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-6-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.5
are also in <%= vars.product_short %> v1.11.6. See the [<%= vars.k8s_runtime_abbr %> v1.11.5 Known Issues](#1-11-5-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For Known Issues in NCP v3.1.2.5, see 
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<hr>

## <a id="management-console-1-11-6"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.6

**Release Date**: November 15, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-6-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.6</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>November 15, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.6</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.20</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.11</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.3.3&#42;</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.171&#42;</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 and later</td>
    </tr>
</table>
<a id="management-console-1-11-6-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-6-upgrade'></a>Upgrade Path


The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.6 are from <%= vars.k8s_runtime_abbr %> MC v1.11.5 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.10.6 and earlier v1.10 patches.


### <a id="management-console-1-11-6-features"></a>Features and Resolved Issues

This release of the <%= vars.k8s_runtime_abbr %> Management Console includes no new features or resolved issues.  
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following features and enhancements: #%>
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following resolved issues: #%>

### <a id="management-console-1-11-6-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.5
are also in <%= vars.product_short %> Management Console v1.11.6.
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.5 Known Issues](#management-console-1-11-5-known-issues) below.

<hr>

## <a id="1-11-5"></a><%= vars.k8s_runtime_abbr %> v1.11.5

**Release Date**: October 21, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-11-5-snapshot"></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.5</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>October 21, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.4</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.1</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.15</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v20.10.7<br>Windows: v19.03.18&#42;</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.3.2</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.11&#42;</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.3</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.39.0&#42;</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.26&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v9.7</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/977901"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,6201&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/977901"><%= vars.product_network %>.</a></td>
    </tr>
</table>

<a id="1-11-5-component-updates"></a>&#42; Components marked with an asterisk have been updated.  

### <a id='1-11-5-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.5 are from <%= vars.k8s_runtime_abbr %> v1.11.4 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.10.6 and earlier v1.10 patches.


### <a id="1-11-5-bug-fixes"></a>Resolved Issues
<%= vars.k8s_runtime_abbr %> v1.11.5 has the following resolved issues:

* Component bumps fix the following CVEs:  

  * Kubernetes [CVE-2021-25741](https://nvd.nist.gov/vuln/detail/CVE-2021-25741): 
  Subpath volume mounts can access files and directories outside of the volume.  
* Fixes [The Node Exporter is Not Upgraded during a Cluster Upgrade](#1-11-3-node-exporeter-not-upgraded).  
* Fixes [The BOSH VM in Clusters Using the Integrated vSphere CSI Driver Might Enter a Failing State While Rebooting](#1-11-4-bosh-vm-not-starting).  
* Fixes [Some Kubernetes Logs Are Not Forwarded after Upgrading](#1-11-0-logs-not-forwarded).  
* Fixes [The <%= vars.k8s_runtime_abbr %> CLI is Unable to Run Simultaneous Commands](#1-11-0-blocking-simultaneous-commands).  
* Fixes [tkgi clusters Returns the Incorrect Number of Worker Instances](#1-11-3-incorrect-worker-count).  

For the issues resolved in NCP v3.1.2.3, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<%#
* Fixes [BOSH Director Logs the Error 'Duplicate vm extension name'](#1-11-0-errors-after-reinstall).  

#%>

<%#
* Fixes [](#).  
#%>

### <a id="1-11-5-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations)
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-5-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.4
are also in <%= vars.product_short %> v1.11.5. See the [<%= vars.k8s_runtime_abbr %> v1.11.4 Known Issues](#1-11-4-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For the Known Issues in NCP v3.1.2.3, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<hr>

## <a id="management-console-1-11-5"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.5

**Release Date**: October 21, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-5-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.5</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>October 21, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.5</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.19</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.11&#42;</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.3.2</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.160&#42;</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 and later</td>
    </tr>
</table>
<a id="management-console-1-11-5-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-5-upgrade'></a>Upgrade Path


The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.5 are from <%= vars.k8s_runtime_abbr %> MC v1.11.4 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.10.6 and earlier v1.10 patches.


### <a id="management-console-1-11-5-features"></a>Features and Resolved Issues

This release of the <%= vars.k8s_runtime_abbr %> Management Console includes no new features or resolved issues.  
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following features and enhancements: #%>
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following resolved issues: #%>

### <a id="management-console-1-11-5-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.5
are also in <%= vars.product_short %> Management Console v1.11.4.
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.4 Known Issues](#management-console-1-11-3-known-issues) below.

<hr>

## <a id="1-11-4"></a><%= vars.k8s_runtime_abbr %> v1.11.4

**Release Date**: September 16, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-11-4-snapshot"></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.4</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>September 16, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.4</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.1</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.15</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v20.10.7<br>Windows: v19.03.17</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.3.2</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.10</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.3&#42;</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.37.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.25</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3, v4.2.1</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v9.7</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/958402"><%= vars.product_network %>&#42;&#42;&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,6103&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/958402"><%= vars.product_network %>.</a></td>
    </tr>
</table>

<a id="1-11-4-component-updates"></a>&#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.2.1 is supported with <%= vars.k8s_runtime_abbr %> v1.11.4, but is untested with this <%= vars.k8s_runtime_abbr %> version.  
&#42;&#42;&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.17 with vSphere CPIv2. 
For more information, see [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 

### <a id='1-11-4-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.4 are from <%= vars.k8s_runtime_abbr %> v1.11.3 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.10.5 and earlier v1.10 patches.


### <a id="1-11-4-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.11.4 has the following resolved issues:

* Fixes [Telegraf Agent Unable to Read From localhost Port 8080](#1-11-0-telegraf-8080).  
* Fixes [SAML Authentication Requests Are Always Signed](#1-11-0-all-saml-are-signed).
* Fixes [Worker Nodes Are Occasionally Not Added to an Azure Back-End Pool](#1-11-2-backend-pool-error).  
* Fixes [Kubernetes Pods on NSX-T Become Stuck in a Creating State](#1-11-2-hyperbus-error).  

For the issues resolved in NCP v3.1.2.3, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

### <a id="1-11-4-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations)
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-4-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.3 
are also in <%= vars.product_short %> v1.11.4. See the [<%= vars.k8s_runtime_abbr %> v1.11.3 Known Issues](#1-11-3-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For the Known Issues in NCP v3.1.2.3, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.17 with vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>

#### <a id="1-11-4-bosh-vm-not-starting"></a> The BOSH VM in Clusters Using the Integrated vSphere CSI Driver Might Enter a Failing State While Rebooting

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.5](#1-11-5-bug-fixes).

**Symptom**

As you restart a BOSH worker VM in a cluster that uses the integrated vSphere CSI Driver, the VM might enter a `failing` state.

**Explanation**

The `csi-node` process on the BOSH worker VM is running but is in an `Execution failed` state.   

**Workaround**

To return the BOSH VM to a running state, restart the `csi-node` process:  

1. Determine which BOSH VM is in the failing state.  
1. SSH into the failed BOSH VM.  
1. Run:  

    ```
    monit restart csi-node
    ```

<hr>

## <a id="management-console-1-11-4"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.4

**Release Date**: September 16, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-4-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.4</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>September 16, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.4</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.16</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.10&#42;</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.3.2&#42;</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.141&#42;</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 and later</td>
    </tr>
</table>
<a id="management-console-1-11-4-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-4-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.4 are from <%= vars.k8s_runtime_abbr %> MC v1.11.3 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.10.5 and earlier v1.10 patches.

### <a id="management-console-1-11-4-features"></a>Features and Resolved Issues

This release of the <%= vars.k8s_runtime_abbr %> Management Console includes no new features or resolved issues.  
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following features and enhancements: #%>
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.4 has the following resolved issues: #%>

### <a id="management-console-1-11-4-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.3
are also in <%= vars.product_short %> Management Console v1.11.4.
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.3 Known Issues](#management-console-1-11-3-known-issues) below.

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.17 with vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>


## <a id="1-11-3"></a><%= vars.k8s_runtime_abbr %> v1.11.3

**Release Date**: August 16, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-11-3-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.3</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>August 16, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.4&#42;</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.1&#42;</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.12&#42;</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v20.10.7<br>Windows: v19.03.17&#42;</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.2.3&#42;</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.8&#42;</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.2&#42;</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.37.0&#42;</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.24&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3, v4.2.1&#42;&#42;</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v9.7</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/938531"><%= vars.product_network %>&#42;&#42;&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5920&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/938531"><%= vars.product_network %>.</a></td>
    </tr>
</table>

<a id="1-11-3-component-updates"></a>&#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.2.1 is supported with <%= vars.k8s_runtime_abbr %> v1.11.3, but is untested with this <%= vars.k8s_runtime_abbr %> version.  
&#42;&#42;&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.17 with vSphere CPIv2. 
For more information, see [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_.  

### <a id='1-11-3-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.3 are from <%= vars.k8s_runtime_abbr %> v1.11.2 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.10.4 and earlier v1.10 patches.


### <a id="1-11-3-bug-fixes"></a>Resolved Issues
<%= vars.k8s_runtime_abbr %> v1.11.3 has the following resolved issues:

* Fixes [CA Certificates Initially Created by Ops Manager v1.8.3 and Earlier Are Not Supported](#ops-man-1-x-certificates).  
* Fixes [Fluent Bit ClusterLogSink Returns 'TCP Connection Failed' While CEIP Telemetry Services Are Disabled](#1-11-0-fluentbit-clusterlogsink).  
* Fixes ["drain-cluster-windows" Errand Does Not Exist](#1-11-2-drain-cluster-windows-errand-does-not-exist).  
* Fixes ['Invalid Gateway for Network' Error after Updating a Cluster with Both nodes_dns And IP Subnet Range Parameters](#1-11-0-invalid-gateway-from-subnet-range).  
* Fixes [You Cannot Use vRealize Log Insight to Monitor NCP](#1-11-0-ncp-not-in-vrli).  
* Fixes [Cluster Fails to Restart](#1-11-0-ncp-port-protocol-limit).  
* Fixes [Wavefront Collector is Duplicated or Not Collecting from <%= vars.k8s_runtime_abbr %> Namespaces](#1-11-0-dual-wavefront-collectors).  
* Fixes [Tags Applied Using tkgi cli Commands Are Removed during `tkgi update-cluster`](#1-11-0-tags-lost-during-update).  
* Fixes [Unexplained Errors After Interrupting a Log Stream When Using Antrea Networking](#1-11-0-antrea-logging-interupt).  
* The `observability-manager` ClusterRole and the `metric-controller` ClusterRole 
now use the `observability-manager` and `metric-controller` PodSecurityPolicy (PSP) instead of using the `pks-priviledged` PSP.   

For the issues resolved in NCP v3.1.2.2, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

### <a id="1-11-3-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations)
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-3-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.2 
are also in <%= vars.product_short %> v1.11.3. See the [<%= vars.k8s_runtime_abbr %> v1.11.2 Known Issues](#1-11-2-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For the Known Issues in NCP v3.1.2.2, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.17 with vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>
#### <a id="1-11-3-node-exporeter-not-upgraded"></a> The Node Exporter is Not Upgraded during a Cluster Upgrade

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.5](#1-11-5-bug-fixes).

**Symptom**

After you upgrade a cluster to <%= vars.k8s_runtime_abbr %> v1.11.3, the original worker nodes on the cluster have
`epks-docker-local.artifactory.eng.vmware.com/oratos/node-exporter` and `gcr.io/cf-pks-releng-environments/oratos/` node-exporter images. 
If you resize the cluster to have additional worker nodes, the new nodes are created with only the 
`gcr.io/cf-pks-releng-environments/oratos/` node-exporter image.  

**Explanation**

The worker node Node Exporter is not upgraded in <%= vars.k8s_runtime_abbr %> v1.11.3 because 
the reduced permissions on the observability manager ClusterRole prevent patching daemonset.  

<hr>

#### <a id="1-11-3-incorrect-worker-count"></a> `tkgi clusters` Returns the Incorrect Number of Worker Instances


This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.5](#1-11-5-bug-fixes).

**Symptom**

The `tkgi clusters --json` command returns an incorrect `kubernetes_worker_instances` worker instance count 
for clusters configured using a Compute Profile.  

<hr>

## <a id="management-console-1-11-3"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.3

**Release Date**: August 16, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-3-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.3</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>August 16, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.3</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.16</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.8&#42;</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.3&#42;</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.136&#42;</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37&#42; and later</td>
    </tr>
</table>
<a id="management-console-1-11-3-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-3-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.3 are from <%= vars.k8s_runtime_abbr %> MC v1.11.2 and earlier v1.11 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.10.4 and earlier v1.10 patches.

### <a id="management-console-1-11-3-features"></a>Features and Resolved Issues

This release of the <%= vars.k8s_runtime_abbr %> Management Console includes no new features or resolved issues.  
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.3 has the following features and enhancements: #%>
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.3 has the following resolved issues: #%>

### <a id="management-console-1-11-3-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.2
are also in <%= vars.product_short %> Management Console v1.11.3.
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.2 Known Issues](#management-console-1-11-2-known-issues) below.

<hr>

## <a id="1-11-2"></a><%= vars.k8s_runtime_abbr %> v1.11.2

**Release Date**: June 24, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-11-2-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.2</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>June 24, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.0</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.10</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v20.10.7&#42;<br>Windows: v19.03.14</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.2.2&#42;</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.6</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.1</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.35.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.22</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3, v4.2.1&#42;&#42;</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v9.7</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/904689"><%= vars.product_network %>&#42;&#42;&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5818&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/904689"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-11-2-component-updates"></a>&#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.2.1 is supported with <%= vars.k8s_runtime_abbr %> v1.11.2, but is untested with this <%= vars.k8s_runtime_abbr %> version.  
&#42;&#42;&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_.  


### <a id='1-11-2-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.2 are from <%= vars.k8s_runtime_abbr %> v1.11.1 and v1.11.0, 
and from <%= vars.k8s_runtime_abbr %> v1.10.3 and earlier v1.10 patches.


<p class="note warning"><strong>Warning:</strong> Do not upgrade <%= vars.k8s_runtime_abbr %> to <%= vars.k8s_runtime_abbr %> v1.11.2 if your environment was initially created using
    Ops Manager v1.8.3 or earlier. For more information, see 
<a href="#ops-man-1-x-certificates">CA Certificates Initially Created by Ops Manager v1.8.3 and Earlier Are Not Supported</a> 
below. 
</p>

### <a id="1-11-2-bug-fixes"></a>Resolved Issues
<%= vars.k8s_runtime_abbr %> v1.11.2 has the following resolved issues:

* Component bumps fix the following CVEs:  

  * runc [CVE-2021-30465](https://github.com/opencontainers/runc/security/advisories/GHSA-c3xm-pvg7-gh7r): 
  Symlink-exchange attack vulnerability.  
* Fixes [Windows Workloads With Attached Dynamic PVs Must Be Removed before Deleting a Cluster](#1-11-0-windows-dynamic-pvs).  
* Fixes [The <%= vars.k8s_runtime_abbr %> API VM fluentd.stdout.log Grows While vRealize Log Insight is Disabled](#1-11-0-fluentd-log-overflow).  

For the issues resolved in NCP v3.1.2.1, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

### <a id="1-11-2-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations)
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-2-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.1 
are also in <%= vars.product_short %> v1.11.2. See the [<%= vars.k8s_runtime_abbr %> v1.11.1 Known Issues](#1-11-1-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For the Known Issues in NCP v3.1.2.1, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>
#### <a id="1-11-2-drain-cluster-windows-errand-does-not-exist"></a> "drain-cluster-windows" Errand Does Not Exist 


This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).

**Symptom**

When you delete a Linux cluster, the `drain-cluster-windows` errand reports the following error:

```
Errand 'drain-cluster-windows' doesn't exist
```

**Explanation**

When you delete a cluster, the following errands run:

* `drain-cluster`
* `drain-cluster-windows`

Both errands run regardless of whether the cluster is a Linux or Windows cluster.

On a Linux cluster, the Windows cluster and the `drain-cluster-windows` errand do not exist. The log shows the following:

```
Task 572
Task 572 | 11:39:54 | Preparing deployment: Preparing deployment
Task 572 | 11:39:54 | Deprecation: Global 'properties' are deprecated. Please define 'properties' at the job level.
Task 572 | 11:39:56 | Preparing deployment: Preparing deployment (00:00:02)
 L Error: Errand 'drain-cluster-windows' doesn't exist
Task 572 | 11:39:56 | Error: Errand 'drain-cluster-windows' doesn't exist
Task 572 Started Tue Jun 29 11:39:54 UTC 2021
Task 572 Finished Tue Jun 29 11:39:56 UTC 2021
Task 572 Duration 00:00:02
Task 572 error
```

On a Windows cluster, both the `drain-cluster` and `drain-cluster-windows` errands exist, and no
error messages are generated.

**Workaround**

No workaround is necessary. The error message is informational, accurate, and does not negatively
impact deleting the cluster.

<hr>

#### <a id="1-11-2-hyperbus-error"></a> Kubernetes Pods on NSX-T Become Stuck in a Creating State 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.4](#1-11-4-bug-fixes).

**Symptom**

During an NSX-T upgrade or while increasing the number of ESXi nodes in your NSX-T environment, 
the pods in your <%= vars.k8s_runtime_abbr %> Kubernetes clusters become stuck in a creating state. 
The connections between nsx-node-agent and hyperbus repeatedly close, 
log `Couldn't connect to 'tcp://...' (error: 111-Connection refused)`, and have a status of `COMMUNICATION_ERROR`.  

**Explanation**

For information and workaround steps for this Known Issue, see 
[Issue 2795268: Connection between nsx-node-agent and hyperbus flips and Kubernetes pod is stuck at creating state](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html#RNA_11559) 
in _NSX Container Plugin 3.1.2 Release Notes_ in the VMware documentation. 

<hr>

#### <a id="1-11-2-backend-pool-error"></a> Worker Nodes Are Occasionally Not Added to an Azure Back-End Pool 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.4](#1-11-4-bug-fixes).

**Symptom**

The Kubernetes services of type `LoadBalancer` occasionally become inaccessible for a few of your clusters while recreating clusters on Azure. 
On the few affected clusters, 
the newly recreated worker VMs were not added back to the load balancer back-end pools used by type `LoadBalancer` services.  

**Explanation**

For information on this known Kubernetes issue, see 
[Azure Exclude node from LoadBalancer lead to failed reconciliation of services](https://github.com/kubernetes/kubernetes/issues/103085) 
in the Kubernetes GitHub repository.  

<hr>


## <a id="management-console-1-11-2"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.2

**Release Date**: June 24, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-2-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.2</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>June 24, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.2</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.14&#42;</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.6</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.2&#42;</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.130</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 and later</td>
    </tr>
</table>
<a id="management-console-1-11-2-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-2-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.2 are from <%= vars.k8s_runtime_abbr %> MC v1.11.1 and v1.11.0, 
and from <%= vars.k8s_runtime_abbr %> MC v1.10.3 and earlier v1.10 patches.

### <a id="management-console-1-11-2-features"></a>Features and Resolved Issues

This release of the <%= vars.k8s_runtime_abbr %> Management Console includes no new features or resolved issues.  
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.0 has the following features and enhancements: #%>
<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.2 has the following resolved issues: #%>

### <a id="management-console-1-11-2-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.0
are also in <%= vars.product_short %> Management Console v1.11.2.
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.0 Known Issues](#management-console-1-11-0-known-issues) below.

<hr>

## <a id="1-11-1"></a><%= vars.k8s_runtime_abbr %> v1.11.1

**Release Date**: June 14, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-11-1-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.1</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>June 14, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.36.0</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.0</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.8</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v19.03.14<br>Windows: v19.03.14</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.2.1</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.6</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2.1&#42;</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.33.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.22</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3, v4.2.1&#42;&#42;</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4<br>Wavefront Proxy: v9.7</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/901180"><%= vars.product_network %>&#42;&#42;&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5816&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/901180"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-11-1-component-updates"></a>&#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.2.1 is supported with <%= vars.k8s_runtime_abbr %> v1.11.1, but is untested with this <%= vars.k8s_runtime_abbr %> version.  
&#42;&#42;&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_.  


### <a id='1-11-1-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.1 are from <%= vars.k8s_runtime_abbr %> v1.11.0, 
and from <%= vars.k8s_runtime_abbr %> v1.10.2 and earlier v1.10 patches.


<p class="note warning"><strong>Warning:</strong> Do not upgrade <%= vars.k8s_runtime_abbr %> to <%= vars.k8s_runtime_abbr %> v1.11.1 if your environment was initially created using
    Ops Manager v1.8.3 or earlier. For more information, see 
<a href="#ops-man-1-x-certificates">CA Certificates Initially Created by Ops Manager v1.8.3 and Earlier Are Not Supported</a> 
below. 
</p>

### <a id="1-11-1-bug-fixes"></a>Resolved Issues
<%= vars.k8s_runtime_abbr %> v1.11.1 has the following resolved issues:

* Fixes [Nodes with More Than 30 Stateful Pods Are in a NotReady State](#1-11-0-runc-node-notready).  

For the issues resolved in NCP v3.1.2.1, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<%#
* **[Bug Fix]** Fixes [Database Cluster Stops After a DB Instance Is Stopped](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-db-down-after-vm-stopped).  
>#%>

### <a id="1-11-1-upcoming-deprecations"></a> Upcoming Deprecations

For information about upcoming deprecations, see [Upcoming Deprecations](#1-11-0-upcoming-deprecations) 
in the <%= vars.k8s_runtime_abbr %> 1.11.0 Release Notes.  

###<a id='1-11-1-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.11.0 
are also in <%= vars.product_short %> v1.11.1. See the [<%= vars.k8s_runtime_abbr %> v1.11.0 Known Issues](#1-11-0-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For the Known Issues in NCP v3.1.2.1, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>

## <a id="management-console-1-11-1"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.1

**Release Date**: June 14, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-1-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.1</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>June 14, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.1</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.11</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.6</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.1</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.125</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 and later</td>
    </tr>
</table>
<a id="management-console-1-11-1-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-1-upgrade'></a>Upgrade Path

The supported upgrade path to <%= vars.product_short %> Management Console v1.11.1 is from
<%= vars.k8s_runtime_abbr %> MC v1.11.0 and <%= vars.k8s_runtime_abbr %> MC v1.10.2 and earlier.

### <a id="management-console-1-11-1-features"></a>Features and Resolved Issues

<%# < %= vars.k8s_runtime_abbr % > Management Console v1.11.1 has the following features and enhancements: #%>
<%= vars.k8s_runtime_abbr %> Management Console v1.11.1 has the following resolved issues:

* Fixes [Nodes with More Than 30 Stateful Pods Are in a NotReady State](#1-11-0-runc-node-notready).

### <a id="management-console-1-11-1-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.11.0 
are also in <%= vars.product_short %> Management Console v1.11.1. 
See the [<%= vars.k8s_runtime_abbr %> Management Console v1.11.0 Known Issues](#management-console-1-11-0-known-issues) below.

<hr>

## <a id="1-11-0"></a><%= vars.k8s_runtime_abbr %> v1.11.0

**Release Date**: May 27, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-11-0-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.11.0</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>May 27, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3&#42;</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.36.0&#42;</td>
    </tr> 
        <td>CSI Driver for vSphere</td>
        <td><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.2/rn/vmware-vsphere-container-storage-plugin-22-release-notes/index.html">v2.2.0&#42;</a></td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.8</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>Linux: v19.03.14<br>Windows: v19.03.14</td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.2.1</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.20.6&#42;</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td><a href="https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html">v3.1.2&#42;</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.33.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.22</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-160&productId=1155&rPId=66090">v1.6.0&#42;</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.3, v4.2.1&#42;&#42;</td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.3.4&#42;<br>Wavefront Proxy: v9.7&#42;</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/888235"><%= vars.product_network %>&#42;&#42;&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5448&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/888235"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-11-0-component-updates"></a>&#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.2.1 is supported with <%= vars.k8s_runtime_abbr %> v1.11.0, but is untested with this <%= vars.k8s_runtime_abbr %> version.  
&#42;&#42;&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_.  

### <a id='1-11-0-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.11.0 are from <%= vars.k8s_runtime_abbr %> v1.10.2 and earlier v1.10 patches.  


<p class="note warning"><strong>Warning:</strong> Do not upgrade <%= vars.k8s_runtime_abbr %> to <%= vars.k8s_runtime_abbr %> v1.11.0 if your environment was initially created using
    Ops Manager v1.8.3 or earlier. For more information, see 
<a href="#ops-man-1-x-certificates">CA Certificates Initially Created by Ops Manager v1.8.3 and Earlier Are Not Supported</a> 
below. 
</p>

<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.11.0. 
For more information, see <a href="#1-11-0-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a> 
below.    
</p>

### <a id="1-11-0-breaking-changes"></a> Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.11.0 has the following breaking changes:

* Fluent Bit has been upgraded to Fluent Bit v1.5.7:  

    * Previous versions of <%= vars.k8s_runtime_abbr %> have used Fluent Bit v1.3.4. 
    For information on the differences between the Fluent Bit v1.3.4 and v1.5.7 releases, see 
    [Upgrade Notes](https://docs.fluentbit.io/manual/installation/upgrade-notes) in the Fluent Bit documentation.  

    * By default, Fluent Bit v1.5.7 limits the size of Kubernetes log metadata to 32&nbsp;KB. 
    For more information, see [Some Kubernetes Logs Are Not Forwarded after Upgrading](#1-11-0-logs-not-forwarded) 
    in the <%= vars.k8s_runtime_abbr %> v1.11.0 Known Issues below.

* The built-in Clair container image scanner is deprecated in favor of Trivy. If you have enabled Clair, do one of the following before upgrading to Harbor tile v2.2.1:
    * In the Harbor tile, select the Trivy scanner as the default in "Interrogation Service".  
    * Install the Clair scanner outside the Harbor tile VM and configure the Clair scanner as the default scanner in "Interrogation Service". For more information about installing Clair, see
[Getting Started With Clair](https://github.com/quay/clair/blob/main/Documentation/howto/getting_started.md)
in the Clair documentation. For information about upgrading TKGI with Clair enabled, see
[Update Default Scanner](checklist.html#update-default-scanner) in
_Upgrade Preparation Checklist for Tanzu Kubernetes Grid Integrated Edition v1.10_.

### <a id="1-11-0-features"></a>Features

<%= vars.k8s_runtime_abbr %> v1.11.0 has the following features and enhancements:

#### <a id="1-11-0-automatic-cns"></a>Support for Per-Cluster CA and Custom CA

<%= vars.k8s_runtime_abbr %> v1.11 updates the security of the platform by removing the shared cluster CA and introducing a per-cluster CA. By default a new or updated cluster is given its own unique CA that is used to sign the TLS certificates specific to that cluster. No action is needed to take advantage of the per-cluster CA; it is injected automatically for any Kubernetes cluster provisioned by <%= vars.k8s_runtime_abbr %> v1.11 and later. For more information, see [TKGI Certificates](certificate-concepts.html).

A byproduct of the introduction of the per-cluster CA is that you can now use a custom CA when you create a cluster. While this is an advanced use case, it may be appropriate for some customers with specific security requirements. See [Use a Custom CA for Kubernetes Clusters](custom-ca.html) and [Creating Clusters](create-cluster.html) for more information.

#### <a id="1-11-0-automatic-cns"></a>Automatic vSphere CSI Driver Integration

<%= vars.k8s_runtime_abbr %> v1.11.0 supports automatic vSphere CSI Driver installation on vSphere. 
Automatic vSphere CSI Driver integration provides CNS as a process, allowing CNS volumes to be deployed to clusters without requiring access to IaaS credentials. 
For more information, see [Deploying Cloud Native Storage (CNS) on vSphere](vsphere-cns.html).  

#### <a id="1-11-0-add-dns"></a>Add DNS Server IPs to Clusters Using Network Profiles 
Supports using Network Profiles to add additional DNS server IPs to existing clusters. 
For information about using a Network Profile to update a cluster with additional DNS server IPs, see [Confirm the Network Profile Property Supports Updates](network-profiles-define.html#supports-updates) 
in _Creating and Deleting Network Profiles (NSX-T Only)_.  

#### <a id="1-11-0-host-port"></a>Kubernetes Host Port Support

Supports the Kubernetes Host Port feature. 
The Kubernetes Host Port feature allows you to expose an application to be externally accessible through a single port. 
Host Port support requires a Host Port-compatible CNI. Host Port support does not require privileged mode. 
For more information, see [Creating and Deleting Network Profiles (NSX-T Only)](network-profiles-define.html).  

#### <a id="1-11-0-node-local-cache"></a>Supports Kubernetes NodeLocal DNSCache

Supports enabling the NCP 3.1 Kubernetes NodeLocal DNSCache feature. 
NodeLocal DNSCache improves cluster DNS performance by running a DNS caching agent on cluster nodes. The agent runs on the nodes as a DaemonSet. 
For more information, see [Creating and Deleting Network Profiles (NSX-T Only)](network-profiles-define.html).  

#### <a id="1-11-0-coredns-highly-available"></a>CoreDNS is Highly Available

CoreDNS in <%= vars.k8s_runtime_abbr %> v1.11.0 and later is highly available. 
CoreDNS functions in multi-node Pods are automatically distributed across Pods across your designated AZs. 
CoreDNS in an existing <%= vars.k8s_runtime_abbr %> multi-node Pod is automatically reconfigured for high availability when the cluster is upgraded 
to <%= vars.k8s_runtime_abbr %> v1.11.   

#### <a id="1-11-0-vm-extensions"></a>Support for BOSH VM&nbsp;Extensions

<%= vars.k8s_runtime_abbr %> v1.11.0 supports configuring new and existing <%= vars.k8s_runtime_abbr %>-provisioned 
Kubernetes clusters using BOSH VM&nbsp;Extensions. 
For more information, see [Using BOSH VM&nbsp;Extensions](bosh-vm-extensions.html).  

#### <a id="1-11-0-bitfusion-interoperability"></a>VMware vSphere Bitfusion Interoperability

VMware vSphere Bitfusion supports <%= vars.k8s_runtime_abbr %> v1.11.0.

Bitfusion decouples physical resources from servers within an environment. The Bitfusion platform
can share graphical processing units (GPUs) in a virtualized infrastructure, as a pool of
network-accessible resources, rather than isolated resources per server. Bitfusion works across
AI frameworks, clouds, networks, and in environments such as virtual machines and containers.

For information about integrating your <%= vars.k8s_runtime_abbr %> clusters with Bitfusion, see the 
[VMware Kubernetes Integration with Bitfusion](https://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/solutions/vmw-kubernetes-bitfusion-integration.pdf) 
solutions guide. 
For information about Bitfusion, see the
[VMware vSphere Bitfusion Documentation](https://docs.vmware.com/en/VMware-vSphere-Bitfusion/index.html).  

#### <a id="1-11-0-enhancements"></a>Additional Features
<%= vars.k8s_runtime_abbr %> v1.11.0 includes the following additional features:  

* Returns an error if a network profile configuration changes a parameter that does not support 
modification.
* Supports integration with Tanzu Mission Control. For more information about Tanzu Mission Control, see the [Tanzu Mission control](https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/) documentation.


### <a id="1-11-0-bug-fixes"></a>Resolved Issues
<%= vars.k8s_runtime_abbr %> v1.11.0 has the following resolved issues:

* Component bumps fix the following CVEs:
  * Kubernetes [CVE-2021-25736](https://github.com/kubernetes/kubernetes/pull/99958): 
  Windows kube-proxy LoadBalancer contention.  
  * OpenSSL [CVE-2020-1971](https://nvd.nist.gov/vuln/detail/CVE-2020-1971):
  Null pointer dereference flaw.  <%#  allows attacker to crash application, compiled with openssl#%>
  * runc [CVE-2021-30465](https://github.com/opencontainers/runc/security/advisories/GHSA-c3xm-pvg7-gh7r): 
  Symlink-exchange attack vulnerability.  
* Fixes [Workloads Using Dynamic PVs Must be Removed Before Deleting a Cluster](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-1-drain-dynamic-pvs).  
* Fixes [Certain Linux Nodes Are Unable to Complete the Drain Process during a TKGI Upgrade](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-bosh-stop-doesnt-drain).  
* Fixes [Windows Pods Are Unable to Complete the Drain Process during a TKGI Upgrade or Update](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-windows-drain-error).  
* Fixes [Network Profiles Does Not Support the `failover_mode` Parameter](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-failover-mode).  
* Fixes [<%= vars.k8s_runtime_abbr %> CLI `get-credentials` Returns an od-broker" Error](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-od-broker).  
* Fixes [Your Cluster Returns the Error 'PodCIDR is Empty for Node'](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-stale-ip-problem).  
* [The TKGI CLI Resize and Update Cluster Commands Remove the Network Profile CNI Configuration from a Cluster]
(https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-do-notuse-resize-cluster).  
* Fixes [The TKGI API Does Not Import the Current TKGI CA Certificates](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-import-single-cert).  
* Fixes [NSX-T Pre-Check Errand Fails Due to Edge Node CPU Memory Configuration](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-eight-size-error).  
<%#
* Fixes [Logs Do Not Forward When Using logsink with TLS Enabled](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-tls-prevents-log-forwarding).
* **[Bug Fix]** Fixes [Database Cluster Stops After a DB Instance Is Stopped](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-db-down-after-vm-stopped).  
>#%>
* (Enhancement) Supports uppercase characters in <%= vars.k8s_runtime_abbr %> API command lines.
For more information, see [FQDNs in <%= vars.k8s_runtime_abbr %> API Commands Cannot Contain Uppercase Letters](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-uppercase-bosh-dns).  
* (Enhancement) Supports NSX-T v3.1 environments where the Transport Zone and Edge Transport Node switch names are not identical. 
For more information, see [On NSX-T v3.1 the Transport Zone and Edge Transport Node Switch Names Must be Identical](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-node-names-match).  

For the issues resolved in NCP v3.1.2, see
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).  




### <a id="1-11-0-deprecations"></a> Feature Deprecations

The following <%= vars.k8s_runtime_abbr %> features are deprecated in <%= vars.k8s_runtime_abbr %> v1.11.0 and later:

* **Flannel Support**: Support for the Flannel Container Networking Interface (CNI) is deprecated.
VMware recommends that you upgrade your Flannel CNI-configured clusters to the Antrea CNI.
For more information about Flannel CNI deprecation, see
[About Upgrading from the Flannel CNI to the Antrea CNI](understanding-upgrades.html#cni)
in _About Tanzu Kubernetes Grid Integrated Edition Upgrades_.

* **Docker Support**: kubelet support for Docker images has been deprecated and Docker support will
be completely removed in Kubernetes v1.24. <%= vars.k8s_runtime_abbr %> support for containerd is
scheduled to begin in <%= vars.k8s_runtime_abbr %> v1.12.  

* **VCP Support**: VCP support has been deprecated and support will be completely removed in a
future <%= vars.k8s_runtime_abbr %> version. 

* **DenyEscalatingExec**: `DenyEscalatingExec` support has been deprecated in Kubernetes and support will be completely removed in Kubernetes v1.21. 
For more information, see 
[DenyEscalatingExec](https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#denyescalatingexec) 
in the Kubernetes documentation.

#### <a id="1-11-0-upcoming-deprecations"></a> Upcoming Feature Deprecations

There are no upcoming feature deprecations to announce at this time.

### <a id="1-11-0-removals"></a> Feature Removals

No features were removed in <%= vars.k8s_runtime_abbr %> v1.11.0.  


#### <a id="1-11-0-upcoming-removals"></a> Upcoming Feature Removals

The following <%= vars.k8s_runtime_abbr %> features will be removed in future versions of <%= vars.k8s_runtime_abbr %>:

* **Docker Support**: Docker support will be completely removed in Kubernetes v1.24. 
<%= vars.k8s_runtime_abbr %> support for containerd is scheduled to begin in <%= vars.k8s_runtime_abbr %> v1.12.  

* **VCP Support**: VCP support will be completely removed in a future <%= vars.k8s_runtime_abbr %> version. 

* **DenyEscalatingExec**: `DenyEscalatingExec` support will be completely removed in Kubernetes v1.21. 
For more information, see 
[DenyEscalatingExec](https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#denyescalatingexec) 
in the Kubernetes documentation.

<%#
* **Management API**: Management API will be deprecated and later replaced with Policy API in future <%= vars.k8s_runtime_abbr %
> versions. VMware does not recommend that you use Management API
in future <%= vars.k8s_runtime_abbr %
> versions.  
#%>

###<a id='1-11-0-known-issues'></a>Known Issues

<%= vars.k8s_runtime_abbr %> v1.11.0 has the following known issues.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-11-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

For the Known Issues in NCP v3.1.2, see 
[NSX Container Plugin 3.1.2 Release Notes](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html).

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>
#### <a id="1-11-0-runc-node-notready"></a> Nodes with More Than 30 Stateful Pods Are in a NotReady State

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.1](#1-11-1-bug-fixes).

<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
    or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.11.0.
</p>

**Symptom**  

Nodes that have more than 50 Pods or more than 30 stateful Pods are in a `NotReady` state, 
and you see the following errors in kubelet logs:

```
Error syncing pod ... skipping: rpc error: code = DeadlineExceeded desc = context deadline exceeded
skipping pod synchronization - PLEG is not healthy: pleg was last seen active...
skipping pod synchronization - PLEG is not healthy: pleg was last seen active...
failed to collect filesystem stats - rootDiskErr: could not stat .. to get inode usage: stat ...: no such file or directory, extraDiskErr: could not stat
```

**Explanation**

The runc component has introduced instability into nodes consisting of 50 or more Pods or 30 or more statefulset Pods. 
For more information, see [loading seccomp filter: invalid argument](https://github.com/opencontainers/runc/issues/2865) 
in the runc GitHub repository.  

<hr>
#### <a id="1-11-0-nsxt-302-310"></a> Pods Stop After Upgrading From NSX-T v3.0.2 to v3.1.0 on vSphere 7.0 and 7.0.1

**Symptom**

Your TKGI-provisioned Pods stop after upgrading from NSX-T v3.0.2 to NSX-T v3.1.0 on vSphere 7.0 and 7.0.1.

**Explanation**

For information, see [Issue 2603550: Some VMs are vMotioned and lose network connectivity during UA nodes upgrade]
(https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/VMware-NSX-T-Data-Center-311-Release-Notes.html#2603550) in the _VMware NSX-T Data Center 3.1.1 Release Notes_.

**Workaround**

To avoid the loss of network connectivity during UA node upgrade, ensure DRS is set to manual mode during your upgrade from NSX-T v3.0.2 to v3.1.0.

If you upgraded to NSX-T v3.1.0 with DRS in automation mode, run the following on the affected Pods' master VMs to restore Pod connectivity:

```
monit restart ncp
```

For more information about upgrading NSX-T v3.0.2 to NSX-T v3.1.0, see [Upgrade NSX-T Data Center to v3.0 or v3.1](upgrade-nsxt.html#upgrade-nsxt).  

<hr>
#### <a id="1-11-0-azure-apply-changes"></a> Error: Could Not Execute "Apply-Changes" in Azure Environment

**Symptom**

After clicking **Apply Changes** on the <%= vars.k8s_runtime_abbr %> tile in an Azure environment, you experience
an error '_...could not execute "apply-changes"..._' with either of the following descriptions:

* _{"errors":{"base":["undefined method 'location' for nil:NilClass"]}}_
* _FailedError.new("Resource Groups in region '#{location}' do not support Availability Zones"))_

For example:

```
INFO | 2020-09-21 03:46:49 +0000 | Vessel::Workflows::Installer#run | Install product (apply changes)
2020/09/21 03:47:02 could not execute "apply-changes": installation failed to trigger: request failed: unexpected response from /api/v0/installations:
HTTP/1.1 500 Internal Server Error
Transfer-Encoding: chunked
Cache-Control: no-cache, no-store
Connection: keep-alive
Content-Type: application/json; charset=utf-8
Date: Mon, 21 Sep 2020 17:51:50 GMT
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Pragma: no-cache
Referrer-Policy: strict-origin-when-cross-origin
Server: Ops Manager
Strict-Transport-Security: max-age=31536000; includeSubDomains
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Frame-Options: SAMEORIGIN
X-Permitted-Cross-Domain-Policies: none
X-Request-Id: f5fc99c1-21a7-45c3-7f39
X-Runtime: 9.905591
X-Xss-Protection: 1; mode=block

44
{"errors":{"base":["undefined method `location' for nil:NilClass"]}}
0
```

**Explanation**

The Azure CPI endpoint used by Ops Manager has been changed and
your installed version of Ops Manager is not compatible with the new endpoint.

**Workaround**

Run the following Ops Manager CLI command:

```
om --skip-ssl-validation --username USERNAME --password PASSWORD --target https://OPSMAN-API curl --silent --path /api/v0/staged/director/verifiers/install_time/IaasConfigurationVerifier -x PUT -d '{ "enabled": false }'
```

Where:

* `USERNAME` is the account to use to run Ops Manager API commands.
* `PASSWORD` is the password for the account.
* `OPSMAN-API` is the IP address for the Ops Manager API

For more information, see [Error 'undefined method location' is received when running Apply Change on Azure]
(https://community.pivotal.io/s/article/undefined-method-location-when-running-Apply-Change-on-Azure?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>
#### <a id="1-11-0-vrops-windows-clusters"></a> VMware vRealize Operations Does Not Support Windows Worker-Based Kubernetes Clusters

VMware vRealize Operations (vROPs) does not support Windows worker-based Kubernetes clusters and cannot be used to
manage <%= vars.k8s_runtime_abbr %>-provisioned Windows workers.

<hr>
#### <a id='1-11-0-wavefront-no-win'></a><%= vars.k8s_runtime_abbr %> Wavefront Requires Manual Installation for Windows Workers

To monitor Windows-based worker node clusters with a Wavefront collector and proxy, you must first install Wavefront on the clusters manually, using Helm.
For instructions, see the [Wavefront](windows-monitoring.html#wavefront) section of the _Monitoring Windows Worker Clusters and Nodes_ topic.

<hr>
#### <a id='1-11-0-ping'></a>Pinging Windows Worker Kubernetes Clusters Does Not Work

<%= vars.k8s_runtime_abbr %>-provisioned Windows worker-based Kubernetes clusters inherit a Kubernetes limitation that prevents
outbound ICMP communication from workers.
As a result, pinging Windows workers does not work.

For information about this limitation, see [Limitations > Networking](https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#networking-1)
in the _Windows in Kubernetes_ documentation.

<hr>
#### <a id="1-11-0-windows-velero-limitations"></a> Velero Does Not Support Backing Up Stateful Windows Workloads

You can use Velero to back up stateless <%= vars.k8s_runtime_abbr %>-provisioned Windows workers only.
You cannot use Velero to back up stateful Windows applications.
For more information, see [Velero on Windows](https://velero.io/docs/v1.6/basic-install/#velero-on-windows) in
_Basic Install_ in the Velero documentation.

<hr>
#### <a id="1-11-0-tmc-on-gcp"></a>Tanzu Mission Control Integration Not Supported on GCP

<%= vars.k8s_runtime_abbr %> on Google Cloud Platform (GCP) does not support
Tanzu Mission Control (TMC) integration, which is configured in
the **<%= vars.product_tile %>** tile > the **Tanzu Mission Control** pane.

If you intend to run <%= vars.k8s_runtime_abbr %> on GCP,
skip this pane when configuring the <%= vars.product_tile %> tile.

<hr>
#### <a id='1-11-0-tmc-restic'></a>TMC Data Protection Feature Requires Privileged <%= vars.k8s_runtime_abbr %> Containers
TMC Data Protection feature supports privileged <%= vars.k8s_runtime_abbr %> containers only.
For more information, see [Plans](installing-vsphere.html#plans) in the _Installing TKGI_ topic for your IaaS.

<hr>
#### <a id="1-11-0-profile-no-win-gmsa"></a>Windows Worker Kubernetes Clusters with Group Managed Service Account Do Not Support Compute Profiles 

Windows worker-based Kubernetes clusters integrated with group Managed Service Account (gMSA) cannot be managed using compute profiles.  

<hr>
#### <a id="1-11-0-profile-no-win-flannel"></a> Windows Worker Kubernetes Clusters on Flannel Do Not Support Compute Profiles

On vSphere with NSX-T networking you can use compute profiles with both Linux and Windows worker&#8209;based Kubernetes clusters.
On vSphere with Flannel networking, you can apply compute profiles only to Linux clusters.

<hr>
#### <a id="1-11-0-profile-resize-down"></a>TKGI CLI Does Not Prevent Reducing the Control Plane Node Count

TKGI CLI does not prevent accidentally reducing a cluster's control plane node count using a compute profile.

<p class="note warning"><strong>Warning:</strong>
    Reducing a cluster's control plane node count can destroy the cluster.
    Do not scale out or scale in existing master nodes by reconfiguring the TKGI tile or by using a compute profile.
    Reducing a cluster's number of control plane nodes may remove a master node and cause the cluster to become inactive.
</p>

<hr>
#### <a id="1-11-0-in-windows-notready-nodes"></a> Windows Cluster Nodes Not Deleted After VM Deleted

**Symptom**

After you delete a VM using the management console of your infrastructure provider, you notice a Windows worker node
that had been on that VM is now in a `notReady` state.

**Solution**

1. To identify the leftover node:

    ```
    kubectl get no -o wide
    ```
1. Locate nodes on the returned list that are in a `notReady` state and have the same IP address as another node in the list.
1. To manually delete a `notReady` node:

    ```
    kubectl delete node NODE-NAME
    ```
    Where `NODE-NAME` is the name of the node in the `notReady` state.

<hr>
#### <a id="1-11-0-oidc-response-header"></a>502 Bad Gateway After OIDC Login

**Symptom**

You experience a "502 Bad Gateway" error from the NSX load balancer after you log in to OIDC.

**Explanation**

A large response header has exceeded your NSX-T load balancer maximum
response header size. The default maximum response header size is 10,240 characters and should
be resized to 50,000.

**Workaround**

If you experience this issue, manually reconfigure your NSX-T `request_header_size`
and `response_header_size` to 50,000 characters.
For information about configuring NSX-T default header sizes,
see [OIDC Response Header Overflow](https://community.pivotal.io/s/article/OIDC-Response-Header-overflow) in the Knowledge Base.

<hr>
#### <a id='1-11-0-windows-proxy'></a> Difficulty Changing Proxy for Windows Workers

You must configure a global proxy in the <%= vars.product_tile %> tile > **Networking** pane before you create any Windows workers that use the proxy.

You cannot change the proxy configuration for Windows workers in an existing cluster.

<hr>
#### <a id='1-11-0-http-proxy-password'></a> Character Limitations in HTTP Proxy Password

For vSphere with NSX-T, the HTTP Proxy password field does not support the following special characters: `&` or `;`.

<hr>
#### <a id='1-11-0-harbor-storage-config'></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>
#### <a id='1-11-0-antrea-logging-interupt'></a> Unexplained Errors After Interrupting a Log Stream When Using Antrea Networking 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).

**Symptom**

While using Antrea networking, you observe unexplainable errors after you interrupt a log stream started using `kubectl logs -f POD-NAME`. 
The errors could include any of the following:  

* kubectl returns the error: "_Error from server (TooManyRequests): the server has received too many_".   
* `kube-apiserver` returns an http code `429`. 

**Explanation**

When using Antrea networking there is a chance that `konnectivity-agent` will become unstable after interrupting your kubectl log steam.

**Workaround**

To resolve the issue:  

1. Log in to the master VM:

    ```
    bosh -d DEPLOYMENT-NAME ssh master/0
    ````

1. Change to root:

    ```
    sudo -i
    ```

1. Restart `proxy-server`:

    ```
    monit restart proxy-server
    ```

1. Wait for `proxy-server` restart:

    ```
    monit summary
    ```

<hr>
#### <a id='1-11-0-resizing-worker-nodes'></a> Ingress Controller Statefulset Fails to Start After Resizing Worker Nodes

**Symptom**  

Permissions are removed from your clusters files and processes after resizing the persistent disk 
during a cluster upgrade. The ingress controller statefulset fails to start.

**Explanation**  

When resizing a persistent disk, Bosh migrates the data from the old disk to the new disk but 
does not copy the files extended attributes.

**Workaround**  

To resolve the problem, complete the steps in 
[Ingress controller statefulset fails to start after resize of worker nodes with permission denied]
(https://community.pivotal.io/s/article/5000e00001nCJxT1603094435795?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>
#### <a id="1-11-0-security-group"></a>Azure Default Security Group Is Not Automatically Assigned to Cluster VMs

**Symptom**

You experience issues when configuring a load balancer for a multi-master Kubernetes cluster or creating a service of type `LoadBalancer`.
Additionally, in the Azure portal, the **VM** > **Networking** page does not display
any inbound and outbound traffic rules for your cluster VMs.

**Explanation**

As part of configuring the <%= vars.product_tile %> tile for Azure, you enter **Default Security Group** in the **Kubernetes Cloud Provider** pane.
When you create a Kubernetes cluster, <%= vars.product_short %> automatically assigns this security group to each VM in the cluster.
However, on Azure the automatic assignment may not occur.

As a result, your inbound and outbound traffic rules defined in the security group are not applied to the cluster VMs.

**Workaround**

If you experience this issue, manually assign the default security group to each VM NIC in your cluster.

<hr>
#### <a id='1-11-0-uuid-length'></a> One Plan ID Longer than Other Plan IDs

**Symptom**

One of your plan IDs is one character longer than your other plan IDs.

**Explanation**

In <%= vars.k8s_runtime_abbr %>, each plan has a unique plan ID.
A plan ID is normally a UUID consisting of 32 alphanumeric characters and 4 hyphens.
However, the **Plan 4** ID consists of 33 alphanumeric characters and 4 hyphens.

**Solution**

You can safely configure and use **Plan 4**.
The length of the **Plan 4** ID does not affect the functionality of **Plan 4** clusters.

If you require all plan IDs to have identical length, do not activate or use **Plan 4**.

<hr>
#### <a id='1-11-0-whitespace-pksapi'></a> The <%= vars.control_plane %> FQDN Must Not Include Trailing Whitespace

**Symptom**

Your <%= vars.k8s_runtime_abbr %> logs include the following error:

```
'uaa'. Errors are:- Error filling in template 'uaa.yml.erb' (line 59: Client redirect-uri is invalid: uaa.clients.pks_cli.redirect-uri Client redirect-uri is invalid: uaa.clients.pks_cluster_client.redirect-uri)
```

**Explanation**

The <%= vars.control_plane %> fully-qualified domain name (FQDN) for your cluster contains leading or trailing whitespace.

**Workaround**

Do not include whitespace in the <%= vars.k8s_runtime_abbr %> tile **API Hostname (FQDN)** field.

<hr>
#### <a id='1-11-0-db-down-after-vm-stopped'></a> Database Cluster Stops After a Database Instance is Stopped

**Symptom**

After you stop one instance in a multiple-instance database cluster, the cluster stops,
or communication between the remaining databases times out, and the entire cluster becomes unreachable.

The following might be in your UAA log:

```
WSREP has not yet prepared node for application use
```

**Explanation**

The database cluster is unable to recover automatically because a member is no longer available to reconcile quorum. 

<hr>
#### <a id='1-11-0-windows-dynamic-pvs'></a> Windows Workloads With Attached Dynamic PVs Must Be Removed before Deleting a Cluster

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.2](#1-11-2-bug-fixes).

**Symptom**  

Your `tkgi delete-cluster` operation hangs while draining a Windows worker VM 
containing a Pod bound to one or more dynamic persistent volumes (PVs).  

**Workaround** 

Before deleting your Windows cluster, remove all workloads.  

<hr>
#### <a id='1-11-0-velero-vsphere-pvs'></a> Velero Back Up Fails for vSphere PVs Attached to Clusters on Kubernetes v1.20 and Later

**Symptom**  

Backing up vSphere persistent volumes using Velero fails and your Velero backup log includes the following error:

```
rpc error: code = Unknown desc = Failed during IsObjectBlocked check: Could not translate selfLink to CRD name
```

**Explanation** 

This is a known issue when backing up clusters on Kubernetes v1.20 and later using the 
Velero Plugin for vSphere v1.1.0 or earlier.  

**Workaround**  

To resolve the problem, complete the steps in 
[Velero backups of vSphere persistent volumes fail on Kubernetes clusters version 1.20 or higher (83314)](https://kb.vmware.com/s/article/83314) 
in the VMware Tanzu Knowledge Base.   

<hr>
#### <a id='1-11-0-eight-cores-error'></a> NSX-T Pre-Check Errand Fails Due to Edge Node CPU Count Configuration

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.8.0](https://docs.pivotal.io/tkgi/1-8/release-notes.html#1-8-0-features) and later 
and was incorrectly included in the <%= vars.k8s_runtime_abbr %> v1.11 Release Notes.

**Symptom**

You have configured your NSX-T Edge Node VM as `medium` size,
and the NSX-T Pre-Check Errand fails with the following error:
"_ERROR: NSX-T Precheck failed due to Edge Node ... no of cpu cores is less than 8_".

**Explanation**

The NSX-T Pre-Check Errand is erroneously returning the "_cpu cores is less than 8_" error.

**Solution**

You can safely configure your NSX-T Edge Node VMs as `medium` size and ignore the error.  

<hr>
#### <a id='1-11-0-fluentbit-clusterlogsink'></a> Fluent Bit ClusterLogSink Returns 'TCP Connection Failed' While CEIP Telemetry Services Are Disabled

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).  

**Symptom**  

Fluent Bit ClusterLogSink logs the errors "_TCP connection failed_" and "_no upstream connections available_" 
after you disable CEIP Telemetry services:

```
[2020/10/14 10:38:50] [error] [io] TCP connection failed: telemetry.pks.internal:24224 (Connection timed out)
[2020/10/14 10:38:50] [error] [out_fw] no upstream connections available
[2020/10/14 10:41:08] [error] [io] TCP connection failed: telemetry.pks.internal:24224 (Connection timed out)
[2020/10/14 10:41:08] [error] [out_fw] no upstream connections available
[2020/10/14 10:43:51] [error] [io] TCP connection failed: telemetry.pks.internal:24224 (Connection timed out)
[2020/10/14 10:43:51] [error] [out_fw] no upstream connections available
[2020/10/14 10:43:51] [ warn] [engine] Task cannot be retried: task_id=0 thread_id=2 output=forward.0
```

**Explanation** 

Fluent Bit intermittently attempts to connect to the Telemetry Server during ClusterLogSink. 
The connection attempts fail while the CEIP Telemetry services are disabled, 
and Fluent Bit logs the failed connection attempts.  

<hr>
#### <a id='1-11-0-creating-two-windows-clusters-fails'></a> Creating Two Windows Clusters at the Same Time Fails

**Symptom**

The first time that you try to create two Windows clusters at the same time, the creation of one of
the clusters fails. If you run `pks cluster CLUSTER-NAME` to examine the last action taken on the
cluster, you see the following:

<pre class="terminal">
Last Action: Create
Last Action State: failed
Last Action Description: Instance provisioning failed: There was a problem completing your request.
. . .
operation: create, error-message: Failed to acquire lock
. . .
locking task id is 111, description: 'create deployment'
</pre>

**Explanation**

This is a known issue that occurs the first time that you create two Windows clusters concurrently.

**Workaround**

Recreate the failed cluster. This issue only occurs the first time that you create two Windows
clusters concurrently.  

<hr>
#### <a id='1-11-0-ncp-port-protocol-limit'></a> Cluster Fails to Restart

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).  

**Symptom**  

A stopped cluster fails to restart and you see the following error in the NSX Container Plug-in (NCP) logs:

```
Response body {'httpStatus': 'BAD_REQUEST', 'module_name': 'nsx-search', 'error_code': 60513, 'error_message': 'The result set is too large. Please refine the search criteria.'}
```

**Explanation** 

This problem occurs on clusters with a network policy with more than twelve port-protocol fields.

**Workaround**

Modify the cluster network policy to have twelve or fewer port-protocol fields.  

<hr>
#### <a id='1-11-0-ncp-not-in-vrli'></a> You Cannot Use vRealize Log Insight to Monitor NCP

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes). 

**Symptom**  

vRealize Log Insight (vRLI) monitoring does not include NCP stdout or stderror.  

**Explanation** 

A bug in the vRLI configuration prevents inclusion of NCP stdout and stderror in vRLI.

**Workaround**

To write NCP logs for a cluster to vRLI:  

1. Confirm you have admin access to the master node.
1. Open `/var/vcap/jobs/fluentd/config/config.d/nsx-t.conf`.
1. Replace:  

    ```
    expression /^(?<num>[\w]+) (?<time>[^ ]+) (?<nsx_uuid>[^ ]+) (?<nsx_component>[^ ]+) (?<pid>[^ ]+) - \[.* level="(?<severity>[^\"]+)".*\] (?<message>.+)/
    ```

    with: 

    ```
    expression /^(?<time>[^ ]+) (?<nsx_uuid>[^ ]+) (?<nsx_component>[^ ]+) (?<pid>[^ ]+) - \[.* level="(?<severity>[^\"]+)".*\] (?<message>.+)/
    ```

<p class="note"><strong>Note</strong>: This workaround affects only the cluster you modified and does not persist.
</p>


<hr>
#### <a id='1-11-0-fluentd-log-overflow'></a> The <%= vars.control_plane %> VM fluentd.stdout.log Grows While vRealize Log Insight is Disabled

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.2](#1-11-2-bug-fixes).  

**Symptom**  

While vRealize Log Insight (vRLI) is disabled, the log for `fluentd.stdout` on the <%= vars.control_plane %> VM
grows quite large and rolls over frequently.


**Explanation** 

The fluentd job on the <%= vars.control_plane %> VM automatically starts when vRLI is disabled. 
This fluentd job runs continuously, frequently writing inaccessible hostname errors to stdout 
for the non-existent vRLI endpoint. 
The fluentd stdout on the <%= vars.control_plane %> VM is logged in: 
`/var/vcap/sys/log/pks-vrli-control-plane-fluentd/fluentd.stdout.log`.


<hr>
#### <a id='1-11-0-invalid-gateway-from-subnet-range'></a> 'Invalid Gateway for Network' Error after Updating a Cluster with Both nodes_dns And IP Subnet Range Parameters

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).  

**Symptom**

After updating a cluster with a network profile that specifies a `nodes_dns` parameter 
and an IP subnet range other than the typical `x.x.x.x/24` range, for example, `1.1.1.64/26`, 
you see the following error for the updated cluster:

```
operation: update, error-message: Invalid gateway for network 'pks-...': must be inside the range
```

Subsequently, when you create or update a valid cluster, 
the process returns the same "_Invalid gateway for network_" error message.

 

**Explanation**

The error is reported because <%= vars.k8s_runtime_abbr %> has incorrectly updated the gateway IP to `x.x.x.1`, 
which is outside of your designated IP range.  

Additionally, BOSH validates all cloud-configs when creating deployments. 
The invalid cloud-config created by the error cluster blocks subsequent create and update cluster processes, 
including processes for valid clusters, and returns the same "_Invalid gateway for network_" error message.  

Avoid updating and resizing clusters with an IP subnet range other than `x.x.x.x/24`.  

For additional information, see 
[TKGI cluster update failing with error: Invalid gateway for network 'xxx': must be inside the range (85101)](https://kb.vmware.com/s/article/85101) 
in the Knowledge Base.


**Workaround**

If you've already encountered this issue, delete the cluster with this error to avoid the subsequent BOSH issue.

 

To update an existing cluster:

* Remove the `nodes_dns` parameter from the network profile and update the cluster with the modified network profile.  

To create a new cluster, do one of the following:

* Create the cluster using a typical `x.x.x.x/24` IP subnet range.  
* Configure `nodes_dns` for the cluster through your <%= vars.product_tile %> tile configuration and 
remove the `nodes_dns` parameter from the network profile.



<hr>
#### <a id='1-11-0-dual-wavefront-collectors'></a> Wavefront Collector is Duplicated or Not Collecting from <%= vars.k8s_runtime_abbr %> Namespaces

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).  

**Symptom**

After upgrading <%= vars.k8s_runtime_abbr %> to <%= vars.k8s_runtime_abbr %> v1.10.0 or later, you observe that two Wavefront collectors are running instead of one. 
If one of the collectors stops, the remaining collector alternates between collecting metrics as itself and as the stopped collector. 
The `pks.kubernetes.daemonset.` and `pks.kubernetes.deployment.` namespaces may stop reporting.

**Explanation**

Two instances of Wavefront collector are currently installed and running: a v1.20 DaemonSet collector and a v1.26 Deployment collector. 
Both Wavefront collectors are running and collecting metrics. 
Only the v1.26 Deployment collector instance should be running. 

**Workaround**

You must remove the v1.20 DaemonSet Wavefront collector and leave the v1.26 Deployment collector running.

To remove the DaemonSet Wavefront collector:

1. Save the DaemonSet YAML creation file as `wf_daemonset.yaml`. 
Keep a copy of the file in case you need to restore the DaemonSet Wavefront collector.  

1. To delete the Wavefront Collector DaemonSet:

    ```
    kubectl delete daemonset wavefront-collector -n pks-system
    ```

If you later decide that you need to restore the DaemonSet collector, 
you can restore using the DaemonSet yaml creation file you saved earlier.

1. To restore the DaemonSet collector:

    ```
    kubectl apply -f wf_daemonset.yaml 
    kubetcl get daemonset/wavefront-collector -n pks-system -o yaml > wf_daemonset.yaml
    ```

<hr>
#### <a id='1-11-0-tags-lost-during-update'></a> Tags Applied Using tkgi cli Commands Are Removed during `tkgi update-cluster` 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).  

**Symptom**

The tags you applied to a cluster using the tkgi cli `--tags` parameter are removed whenever you run `tkgi update-cluster`.

**Workaround**

Specify the `--tags` parameter when updating a cluster using `tkgi update-cluster`:

1. To confirm the existing tags on a cluster:

    ```
    tkgi cluster CLUSTER-NAME
    ```

    Where `CLUSTER-NAME` is the name of the cluster to update.  
<br>
    Note the tags listed under `Tags:`.  

1. When running `tkgi update-cluster`, include the `--tags` parameter, specifying all of the existing tags on the cluster.


<hr>


#### <a id='ops-man-1-x-certificates'></a> CA Certificates Initially Created by Ops Manager v1.8.3 and Earlier Are Not Supported

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.3](#1-11-3-bug-fixes).

**Symptom**

While upgrading <%= vars.k8s_runtime_abbr %> to <%= vars.k8s_runtime_abbr %> v1.11.0, v1.11.1 or v1.11.2, you might observe the following error:

```
Config Server failed to generate value for '/microbosh-.../tls-kubernetes-2018' with type 'certificate'. HTTP Code '404', Error: 'The request could not be completed because the CA does not exist or you do not have sufficient authorization.'
```

**Explanation**

<%= vars.k8s_runtime_abbr %> v1.11.0, v1.11.1, and v1.11.2 do not support the CA Certificates named with the default `microbosh-` prefix applied to certificates by Ops Manager v1.8.3 and earlier. 


<hr>
#### <a id="1-11-0-renamed-ops-man"></a> TKGI MC Unable to Manage TKGI after Restoring the TKGI Control Plane from Backup

**Symptom**

After you restore Ops Manager and the <%= vars.control_plane %> VM from backup, <%= vars.k8s_runtime_abbr %> functions normally, 
but your <%= vars.k8s_runtime_abbr %> MC tabs include the following error: product pivotal-container service is not deployed. 

**Explanation**

<%= vars.k8s_runtime_abbr %> MC is associated with an Ops Manager with a specific name. 
If you rename Ops Manager with a new name while restoring, 
your <%= vars.k8s_runtime_abbr %> MC will not recognize the restored Ops Manager and cannot manage it.  

<hr>
#### <a id="1-11-0-telegraf-8080"></a> Telegraf Agent Unable to Read From localhost Port 8080

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.4](#1-11-4-bug-fixes).

**Symptom**

Your Telegraf agents fail to read from localhost port 8080. 
Your cluster master node `/var/vcap/sys/log/metric-sink/telegraf.stderr.log` 
files contain logged errors similar to the following:

```
Error in plugin: error making HTTP request to http://localhost:8080/metrics: Get http://localhost:8080/metrics: dial tcp 127.0.0.1:8080: connect: connection refused
```

**Explanation**

Support for the unsecured port 8080 was removed in Kubernetes v1.20.

<hr>
#### <a id="1-11-0-delete-cluster-not-stopped"></a> Deleted Clusters are Listed in Cluster Lists

**Symptom**

After running `tkgi delete-cluster` and cluster deletion has completed, 
the deleted cluster continues to be listed when running `tkgi clusters`.  

**Workaround**

You must manually remove the deleted cluster using a customized version of the ncp_cleanup script. 
For more information, see 
[Deleting a Tanzu Kubernetes Grid Integrated Edition cluster with "tkgi delete-cluster" stuck "in progress" status](https://community.pivotal.io/s/article/pks-delete-cluster-in-progress-after-the-cluster-has-been-deleted?language=en_US) 
in the VMware Tanzu Knowledge Base.


<hr>
#### <a id="1-11-0-all-saml-are-signed"></a> SAML Authentication Requests Are Always Signed

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.4](#1-11-4-bug-fixes).  

**Symptom**

After you disable the SAML Identity Provider **Sign Authentication Requests** setting on the <%= vars.product_tile %> tile, 
SAML IdP authentication requests continue to be signed.   

<hr>
#### <a id="1-11-0-errors-after-reinstall"></a> BOSH Director Logs the Error 'Duplicate vm extension name'

<%#This issue is fixed in [< %= vars.k8s_runtime_abbr % > v1.11.5](#1-11-5-bug-fixes).  #%>
**Symptom**

After you uninstall <%= vars.k8s_runtime_abbr %>, then reinstall <%= vars.k8s_runtime_abbr %> in the same environment, 
BOSH Director logs errors similar to the following:  

```
.../gems/bosh-director-0.0.0/lib/bosh/director/deployment_plan/cloud_manifest_parser.rb:120:in `parse_vm_extensions': Duplicate vm extension name 'disk_enable_uuid' (Bosh::Director::DeploymentDuplicateVmExtensionName)
```

**Explanation**

The `pivotal-container-service` cloud-config was not removed when you uninstalled the <%= vars.k8s_runtime_abbr %> tile, 
and it remained active.
When you reinstalled the <%= vars.k8s_runtime_abbr %> tile, an additional `pivotal-container-service` cloud-config was created, 
causing the metrics_server to fall into a crash-loop state.  

**Workaround**

You must manually remove the `pivotal-container-service` cloud-config after removing your <%= vars.k8s_runtime_abbr %> deployment, 
including after removing the <%= vars.k8s_runtime_abbr %> tile from Ops Manager.  

For more information, see ["Duplicate vm extension name" 
error when metrics_server runs on Director VM in Tanzu Kubernetes Grid Integrated Edition]
(https://community.pivotal.io/s/article/5000e00001oHXvP1631027033087?language=en_US) 
in the VMware Tanzu Community Knowledge Base.


<hr>
#### <a id="1-11-0-azure-hostnames-not-resolved"></a> Node Hostnames Are Not Resolved for BYO DNS in Azure Environments

**Symptom**

If you use a bring-your-own DNS configuration in Azure environments, 
node hostnames are not resolved on your <%= vars.k8s_runtime_abbr %> clusters, and kubectl returns a "no such host" error:

```
Error from server: Get "...": dial tcp: lookup ... on ... no such host
```

**Explanation**

On Azure, the Azure CPI uses BOSH `agent_id` GUIDs as the VM name. 
Additionally, the Azure Kubernetes cloud provider mandates the VM name matches the hostname 
and that the hostname is resolvable without using search domains.

<%= vars.k8s_runtime_abbr %> on Azure relies on Dynamic DNS updates via DHCP to allow resolvable K8s node names. 
Environments with a bring-your-own DNS server configuration must provide an alternative method 
for updating DNS entries.


<hr>

#### <a id="1-11-0-logs-not-forwarded"></a> Some Kubernetes Logs Are Not Forwarded after Upgrading

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.5](#1-11-5-bug-fixes).  

**Symptom**

After you upgrade <%= vars.k8s_runtime_abbr %> to v1.11.0, some Kubernetes logs are no longer forwarded by Fluent Bit.

**Explanation**

In <%= vars.k8s_runtime_abbr %> v1.11.0, Fluent Bit has been upgraded from v1.3.4 to v1.5.7. 
In Fluent Bit v1.5.7, the default Kubernetes annotation buffer size is 32&nbsp;KB, 
limiting the size of Kubernetes log metadata to 32&nbsp;KB by default. 
The Kubernetes log metadata in your environment exceeds this limit, and the log entries have been discarded.  

**Workaround**

To reduce the length of the Kubernetes metadata applied to your log entries, 
reduce the total size of the Kubernetes annotation environment variables you have defined in your environment. 


<hr>

#### <a id="1-11-0-blocking-simultaneous-commands"></a> The <%= vars.k8s_runtime_abbr %> CLI is Unable to Run Simultaneous Commands

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.5](#1-11-5-bug-fixes).  

**Symptom**

Your automated tasks occasionally attempt to run simultaneously, blocking some of the tasks.  

**Workaround**

In <%= vars.k8s_runtime_abbr %> v1.11.5 and later, increase the length of the <%= vars.k8s_runtime_abbr %> CLI timeout. 
For more information about the <%= vars.k8s_runtime_abbr %> timeout, see [tkgi login](cli/index.html#login) 
in the <%= vars.k8s_runtime_abbr %> CLI documentation.


<hr>

#### <a id="1-11-0-cvds-with-nvds"></a> <%= vars.k8s_runtime_abbr %> Does Not Support CVDS / NVDS Mixed Environments

<%= vars.k8s_runtime_abbr %> does not support environments where there are multiple matching networks, such as a mixed CVDS/NVDS environment.

**Symptom**

<%= vars.k8s_runtime_abbr %> logs errors similar to the following in an environment with multiple matching networks:

```
LastOperationstatus='failed', description='Instance provisioning failed: 
There was a problem completing your request. Please contact your operations team providing the following information: 
service: p.pks, service-instance-guid: ..., broker-request-id: ..., task-id: ..., operation: create, 
error-message: Unknown CPI error 'Unknown' with message 'undefined method `mob' for #&lt;VimSdk::Vim::OpaqueNetwork:' in create_vm' CPI method
```

**Explanation**

<%= vars.k8s_runtime_abbr %> cannot identify which of the matching networks you intend to use and has selected the wrong network.


<hr>

#### <a id="1-11-0-log4j-cve-2021-44228"></a> Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.11.7](#1-11-7-bug-fixes).  

Due to the Apache Log4j vulnerabilities [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228) 
and [CVE-2021-45046](https://nvd.nist.gov/vuln/detail/CVE-2021-45046), 
VMware recommends that you take the following steps as soon as possible:

1. Upgrade to [Ops Manager v2.10.24](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24) or later.  
1. Upgrade to [<%= vars.k8s_runtime_abbr %> v1.11.7](#1-11-7) or later.  

    <p class="note"><strong>Note</strong>: When upgrading <%= vars.k8s_runtime_abbr %> to mitigate the Apache Log4j vulnerability
      you must also upgrade all <%= vars.k8s_runtime_abbr %> clusters.
    </p>
    
If you cannot upgrade Ops Manager or <%= vars.k8s_runtime_abbr %>, 
VMware recommends that you implement the workaround steps provided in the VMware Tanzu Knowledge Base:  

* If you cannot upgrade Ops Manager: 
[Instructions to address CVE-2021-44228 in Tanzu Operations Manager](https://community.pivotal.io/s/article/5004y00001mPn2N1639255611105?language=en_US).  
* If you cannot upgrade <%= vars.k8s_runtime_abbr %>: 
[Workaround instructions to address CVE-2021-44228 in Tanzu Kubernetes Grid Integrated](https://community.pivotal.io/s/article/Workaround-instructions-to-address-CVE-2021-44228-in-Tanzu-Kubernetes-Grid-Integrated?language=en_US).  


For more information about the impact of the Log4j [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228) 
and [CVE-2021-45046](https://nvd.nist.gov/vuln/detail/CVE-2021-45046) vulnerabilities on VMware products, 
see [VMSA-2021-0028](https://www.vmware.com/security/advisories/VMSA-2021-0028.html) 
in _Advisories_ in the VMware Security Solutions documentation.  

<hr>


## <a id="management-console-1-11-0"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.11.0

**Release Date**: May 27, 2021

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-11-0-snapshot"></a>Product Snapshot

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.11.0</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>May 27, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.11.0</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.11</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.20.6&#42;</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.1&#42;</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.125&#42;</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 and later&#42;</td>
    </tr>
</table>
<a id="management-console-1-11-0-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id='management-console-1-11-0-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.11.0 are from <%= vars.k8s_runtime_abbr %> MC v1.10.2 and earlier v1.10 patches.

<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.11.0. 
For more information, see <a href="release-notes.html#1-11-0-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a> 
above.    
</p>

### <a id="management-console-1-11-0-features"></a>Features and Resolved Issues
<%# < %= vars.k8s_runtime_abbr % > v1.11.0 has the following features and enhancements: #%>
<%= vars.k8s_runtime_abbr %> Management Console v1.11.0 has the following resolved issues:

* Fixes [Management Console UI Does Not Open If the Management Console Uses Custom Certificates](https://docs.pivotal.io/tkgi/1-10/release-notes.html#management-console-1-10-0-ui-customcerts).  
* Fixes [Management Console Deletes Custom Workload Configurations](https://docs.pivotal.io/tkgi/1-10/release-notes.html#management-console-1-10-0-addons-spec).  
* (Enhancement) TKGI Management Console v1.11.0 can retrieve the transport zone of an NSX-T v3.1 edge node transport node. 
For more information, see [On NSX-T v3.1 the Transport Zone and Edge Transport Node Switch Names Must be Identical](https://docs.pivotal.io/tkgi/1-10/release-notes.html#1-10-0-node-names-match).  

### <a id="management-console-1-11-0-known-issues"></a> Known Issues

The <%= vars.product_short %> Management Console v1.11.0 has the following known issues:

<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.11.0. 
For more information, see <a href="release-notes.html#1-11-0-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a> 
above.    
</p>

<hr>
#### <a id="management-console-1-11-0-vrli-https"></a> vRealize Log Insight Integration Does Not Support HTTPS Connections

**Symptom**

The <%= vars.product_short %> Management Console integration to vRealize Log Insight does not support connections to the HTTPS port on the vRealize Log Insight server.

**Workaround**

1. Use SSH to log in to the <%= vars.product_short %> Management Console appliance VM.
1. Open the file `/lib/systemd/system/pks-loginsight.service` in a text editor.
1. Add `-e LOG_SERVER_ENABLE_SSL_VERIFY=false`.
1. Set `-e LOG_SERVER_USE_SSL=true`.

    The resulting file should look like the following example:

    ```
    ExecStart=/bin/docker run --privileged --restart=always --network=pks
    -v /var/log/journal:/var/log/journal
    --name=pks-loginsight
    -e TYPE=gear2-vm
    -e LOG_SERVER_HOST=${LOGINSIGHT_HOST}
    -e LOG_SERVER_PORT=${LOGINSIGHT_PORT}
    -e LOG_SERVER_ENABLE_SSL_VERIFY=false
    -e LOG_SERVER_USE_SSL=true
    -e LOG_SERVER_AGENT_ID=${LOGINSIGHT_ID}
    pksoctopus/vrli-journald:v07092019
    ```

1. Save the file and run `systemctl daemon-reload`.
1. To restart the vRealize Log Insight service, run `systemctl restart pks-loginsight.service`.

<%= vars.product_short %> Management Console can now send logs to the HTTPS port on the vRealize Log Insight server.

<hr>
#### <a id="management-console-1-11-0-vsphere-ha"></a> vSphere HA causes Management Console ovfenv Data Corruption

**Symptom**

If you enable vSphere HA on a cluster, if the TKGI Management Console appliance VM is running on a host in that cluster, and if the host reboots, vSphere HA recreates a new TKGI Management Console appliance VM on another host in the cluster. Due to an issue with vSphere HA, the `ovfenv` data for the newly created appliance VM is corrupted and the new appliance VM does not boot up with the correct network configuration.

**Workaround**

- In the vSphere Client, right-click the appliance VM and select **Power** > **Shut Down Guest OS**.
- Right-click the appliance again and select Edit Settings.
- Select **VM Options** and click **OK**.
- Verify under Recent Tasks that a `Reconfigure virtual machine` task has run on the appliance VM.
- Power on the appliance VM.

<hr>
#### <a id="management-console-1-11-0-k8s-profile"></a> Base64 encoded file arguments are not decoded in Kubernetes profiles

**Symptom**

Some file arguments in Kubernetes profiles are base64 encoded. When the management console displays the Kubernetes profile,
some file arguments are not decoded.

**Workaround**

Run `echo "$content" | base64 --decode`

<hr>
#### <a id="management-console-1-11-0-network-profile"></a> Network profiles not immediately selectable

**Symptom**

If you create network profiles and then try to apply them in the Create Cluster page, the new profiles
are not available for selection.

**Workaround**

Log out of the management console and log back in again.

<hr>
#### <a id="management-console-1-11-0-cluster-summary"></a> Real-Time IP information not displayed for network profiles

**Symptom**

In the cluster summary page, only default IP pool, pod IP block, node IP block values are displayed,
rather than the real-time values from the associated network profile.

**Workaround**

None

<hr>
#### <a id='management-console-1-11-0-harbor-storage-config'></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>
#### <a id='management-console-1-11-0-re-import-windows-stemcell'></a> Windows Stemcells Must be Re-Imported After Upgrading Ops Manager

**Symptom**

After upgrading Ops Manager, your Management Console does not recognize a Windows stemcell imported when using the prior version of Ops Manager.

**Workaround**

If your Management Console does not recognize a Windows stemcell after upgrading Ops Manager:

1. Re-import your previously imported Windows stemcell.  
2. **Apply Changes** to <%= vars.k8s_runtime_abbr %> MC.  

<hr>
#### <a id='management-console-1-11-0-cluster-group-name'></a> Your New Clusters Are Not Shown In Tanzu Mission Control

**Symptom**

After you create a cluster, Tanzu Mission Control does not include the cluster in cluster lists. 
You have a "_Resource not found_" error similar to the following in your BOSH logs:

```
Cluster Name in TMC: cluster-1
Cluster Name Prefix: tkgi-my-prefix-
Group Name in TMC: my-prefix-clusters
Cluster Description in TMC: VMware Enterprise PKS Attaching cluster ''tkgi-my-prefix-cluster-1'' to TMC 
Fetching token successful 
request POST:/v1alpha1/clusters, 
response 404 Not Found:{"error":"Resource not found - clustergroup(my-prefix-clusters) 
org id(d859dc9f-g622-426d-8c91-939a9f13dea9)",
"code":5,"message":"Resource not found - clustergroup(my-prefix-clusters)
```

**Explanation**

The cluster group you assign a cluster to must be defined in Tanzu Mission Control 
before you assign your cluster to the cluster group in the <%= vars.k8s_runtime_abbr %> Management Console.

**Workaround**  

To resolve the problem, complete the steps in 
[Attaching a Tanzu Kubernetes Grid Integrated (TKGI) cluster to Tanzu Mission Control (TMC) fails with "Resource not found - clustergroup(cluster-group-name)"](https://community.pivotal.io/s/article/tkgi-tmc-attach-fail) 
in the VMware Tanzu Knowledge Base.   

<hr>

#### <a id='management-console-1-11-0-k8s-version-incorrect'></a> Management Console Incorrectly Displays Kubernetes Version as 1.20.5

<%= vars.k8s_runtime_abbr %> v1.11 installs Kubernetes v1.20.6, but the <%= vars.k8s_runtime_abbr %> Management Console incorrectly displays the shipped Kubernetes version as 1.20.5.  

<hr>

#### <a id="management-console-1-11-0-single-edge-node-auto-nat-mode"></a> <%= vars.k8s_runtime_abbr %> MC Does Not Support Single-Edge Node Configurations in Automated NAT Mode

<%#   
  For <a id='1-11-8
This issue is fixed in [< %= vars.k8s_runtime_abbr % > MC v1.11.8](#1-11-8-bug-fixes).
#%>
**Symptom**

The <%= vars.k8s_runtime_abbr %> Configuration view within <%= vars.k8s_runtime_abbr %> MC displays the following error:

```
Fail to configure NSX for TKGI: Traceback (most recent call last): File"scripts/nsx_automoaror.py", line 182, 
in &lt;module&gt; edgee_tzs |= extra_edge2_tzs TpeError: unsupported operand type(s) for |=:'dict' and 'dict'
```

<hr>