---
title: Release Notes
owner: TKGI
topictype: releasenotes
---

This topic contains release notes for <%= vars.product_short %> (<%= vars.k8s_runtime_abbr %>) <%= vars.product_version %>.

## <a id="1-17-5"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.5

<br>
**Release Date**: May 9, 2024

<br>
### <a id="1-17-5-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th colspan=3><h4>Release Details</h4></th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.5&os=&servicePk=203152&language=EN" target="_blank">v1.17.5</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>May 9, 2024</td>
    </tr>
    <tr>
        <th colspan=3><h4>Internal Component Versions</h4></th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td colspan=2>v1.7.1</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.28<br>Windows: v1.6.28</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.9.3+vmware.23&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v3.0.3</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes-sigs/vsphere-csi-driver/releases/tag/v3.0.3" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.11&#42;</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.10.2&os=&servicePk=310421&language=EN" target="_blank">v2.10.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.10.2" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.26.15&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#v12615" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.4</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.1.1.4</td>
        <td style="text-align: center;">
        <a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1.4/rn/vmware-nsx-container-plugin-4114-release-notes/index.html" target="_blank">Release Notes</a>
        </td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v8.0.31-23
        <br>pxc-release: v1.0.8</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/8.0/release-notes/8.0.31-23.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v1.0.8">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.111&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.5&os=&servicePk=203152&language=EN" target="_blank"><%= vars.velero_version %></a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/<%= vars.velero_version %>" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.13.0<br>Wavefront Proxy: v12.4</td>
    </tr>
    <tr>
        <th colspan=3><h4>Stemcell Compatibility</h4></th>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service#/releases/1514326" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.72&#42; or later</td>
    </tr>
    <tr>
        <th colspan=3><h4>Interoperability</h4></th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service#/releases/1514326" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware Aria Operations Management Pack for Kubernetes</td>
        <td>v1.10.3</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v5.0, v4.5.2</td>
        <td style="text-align: center;">Release Notes:
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/rn/vmware-cloud-foundation-50-release-notes/index.html" target="_blank">v5.0</a>,
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5.2/rn/vmware-cloud-foundation-452-release-notes/index.html" target="_blank">v4.5.2</a>
        </td>
    </tr>
    <tr>
        <td>VMware NSX&#42;&#42;</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0," target="_blank">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
</table>

&#42; Components marked with an asterisk have been updated.

&#42;&#42; As of May 7, 2024, NSX networking and firewall components are sold separately from TKGI.

&#42;&#42;&#42; Migration from NSX Management Plane API to NSX Policy API requires VMware NSX v4.0.1.1 or later. NSX v4.0.1.1 supports only 50% of NSX Management Plane API
scale. To use Policy API at 100% of Management Plane API scale, you require NSX v4.1.1.

<br>
### <a id="1-17-5-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.17.5 are from
<%= vars.k8s_runtime_abbr %> v1.17.4, and
<%= vars.k8s_runtime_abbr %> v1.16.8 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.

<br>
### <a id="1-17-5-breaking-changes"></a>Breaking Changes

As of the <%= vars.k8s_runtime_abbr %> v1.17.5 release date, you can find Management Console downloads at [Broadcom Support](https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Kubernetes%20Grid%20Integrated%20Edition) (login required) instead of [VMware Customer Connect](https://customerconnect.vmware.com). The TKGI CLI continues to be distributed on [VMware Tanzu Network](https://network.pivotal.io) until May 31, 2024.

The TKGI downloads page on Broadcom Support organizes TKGI downloads as follows:

* **Workload Backup and Recovery**: Some of the Velero backup tools for TKGI.
* **VMware Tanzu Kubernetes Grid Integrated Edition**: The TKGI OSL and Ops Manager tile.
* **TKG Integrated Edition**: The TKGI Management Console and other Velero backup tools for TKGI.

<br>
### <a id="1-17-5-features"></a><a id="1-17-5-enhancements"></a> Features and Enhancements

* Cluster update retry setting: Ops Manager TKGI tile > **TKGI API** > **Automatic retry on cluster update operations failure** option sets TKGI to retry `tkgi update-cluster` process up to three times if it fails, to improve resilience.

<br>
### <a id="1-17-5-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.17.5 resolves the following issues:

* Fixes [Wrong Node Scale after Updating Cluster with New Compute Profile](#1-17-0-scale-update).
* Added `Strict-Transport-Security` header to nginx HTTPS server configuration on Management Console VM to improve security scan results.
* Fixes [Ephemeral storage overrun with temporary logfiles from Fluentd](#1-17-0-fluentd-logs).
* Fixes cluster creation error when `service-cluster-ip-range` in a custom Kubernetes profile is set to a smaller range than the **Networking** > **Kubernetes Service Network CIDR Range** setting in the TKGI Ops Manager tile.
* Fixes `Error creating NSX-T cluster network... Invalid transport path` error in NSX Policy API mode.
* SSH configuration improvements address [CVE-2023-48795](https://nvd.nist.gov/vuln/detail/CVE-2023-48795).

<br>
###<a id="1-17-5-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.17.4 are also in <%= vars.product_short %> v1.17.5.
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.4 Known Issues](#1-17-4-known-issues) below.

<%= vars.k8s_runtime_abbr %> v1.17.5 does not include any additional known issues.

<hr>

<br>
## <a id="management-console-1-17-5"></a> <%= vars.k8s_runtime_abbr %> Management Console <%= vars.product_version %>.5

**Release Date**: May 9, 2024

<%= vars.product_short %> Management Console provides an opinionated installation of <%= vars.k8s_runtime_abbr %>.

<br>
### <a id="management-console-1-17-5-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: The component versions supported by <%= vars.k8s_runtime_abbr %> Management Console might differ from or be more limited than
    the versions supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.5&os=&servicePk=203152&language=EN" target="_blank">v1.17.5</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>May 9, 2024</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-17-5">v1.17.5</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v3.0.25&#42;</td>
        <td style="text-align: center;"><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Operations%20Manager#/releases/1398059" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.26.15&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.10.0&os=&servicePk=309799&language=EN" target="_blank">v2.10.2</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.10.2">Release Notes</a></td>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcell</td>
        <td>v1.390</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/Stemcells-for-VMware-Tanzu/services/release-notes/stemcells.html#jammy-1-390" target="_blank">Release Notes</a></td>
    </tr>
</table>

&#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-17-5-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.17.5 are from
<%= vars.k8s_runtime_abbr %> MC v1.17.4, and
<%= vars.k8s_runtime_abbr %> MC v1.16.8 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.


<br>
### <a id="management-console-1-17-5-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> MC v1.17.5 resolves the following issue:

* Fixes [Updating cluster compute profile loses node drain and shutdown settings](#1-17-0-lose-adv-settings).
* Fixes issue of LDAP password appears not hidden in MC-generated TKGI configuration file.
* Fixes network configuration error "network configuration | Failed | failed to create overlay segment ... Invalid transport zone path" during cluster deploy after migrating NSX to Policy Mode as described in NSX Management Plane API to NSX Policy API](mp2p-migration.html).

<%= vars.k8s_runtime_abbr %> Management Console v1.17.5 does not include any new features.

<br>
### <a id="management-console-1-17-5-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.17.4
are also in <%= vars.product_short %> Management Console v1.17.5. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.4 Known Issues](#1-17-4-known-issues) below.

<%= vars.k8s_runtime_abbr %> MC v1.17.5 does not include any additional known issues.

<hr>

<br>
## <a id="1-17-4"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.4

<br>
**Release Date**: March 14, 2024

<br>
### <a id="1-17-4-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th colspan=3><h4>Release Details</h4></th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank">v1.17.4</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>March 14, 2024</td>
    </tr>
    <tr>
        <th colspan=3><h4>Internal Component Versions</h4></th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td colspan=2>v1.7.1</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.28&#42;<br>Windows: v1.6.28&#42;</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.9.3+vmware.22&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v3.0.3</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes-sigs/vsphere-csi-driver/releases/tag/v3.0.3" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.9</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.4&os=&servicePk=309032&language=EN" target="_blank">v2.10.0</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.10.0" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.26.14&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.4</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.1.1.4&#42;</td>
        <td style="text-align: center;">
        <a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1.4/rn/vmware-nsx-container-plugin-4114-release-notes/index.html" target="_blank">Release Notes</a>
        </td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v8.0.31-23
        <br>pxc-release: v1.0.8</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/8.0/release-notes/8.0.31-23.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v1.0.8">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.105&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=203152&language=EN" target="_blank"><%= vars.velero_version %></a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/<%= vars.velero_version %>" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.13.0<br>Wavefront Proxy: v12.4</td>
    </tr>
    <tr>
        <th colspan=3><h4>Stemcell Compatibility</h4></th>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcells</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.69&#42; or later</td>
    </tr>
    <tr>
        <th colspan=3><h4>Interoperability</h4></th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware Aria Operations Management Pack for Kubernetes</td>
        <td>v1.10.3</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v5.0&#42;&#42;, v4.5.2&#42;&#42;</td>
        <td style="text-align: center;">Release Notes:
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/rn/vmware-cloud-foundation-50-release-notes/index.html" target="_blank">v5.0</a>,
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5.2/rn/vmware-cloud-foundation-452-release-notes/index.html" target="_blank">v4.5.2</a>
        </td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0," target="_blank">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
</table>

<a id="1-17-4-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v5.0 and VCF v4.5.2 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.  
&#42;&#42;&#42; Migration from NSX Management Plane API to NSX Policy API requires VMware NSX v4.0.1.1 or later. NSX v4.0.1.1 supports only 50% of NSX Management Plane API
scale. To use Policy API at 100% of Management Plane API scale, you require NSX v4.1.1.

<br>
### <a id="1-17-4-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.17.4 are from
<%= vars.k8s_runtime_abbr %> v1.17.3, and
<%= vars.k8s_runtime_abbr %> v1.16.7 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.


<br>
### <a id="1-17-4-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.17.4 does not include any new breaking changes.


<br>
### <a id="1-17-4-features"></a><a id="1-17-4-enhancements"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.4 does not include any new features.

<br>
### <a id="1-17-4-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.17.4 resolves the following issues:

* Containerd update to v1.6.28 fixes issue [High-Severity CVE-2024-21626 in runc 1.1.11 and earlier](#1-17-0-cve-2024-21626).
* Fixes security issue of Telegraf host-monitoring outputs exposing node OS release info.
* Fixes issue of snapshot validation not getting correct CSI service account.
* NCP update to v4.1.1.4 fixes issues:

    - The parameter `cookie_name` is configurable in the network profile when ingress `persistence_type` is set as `cookie`.
    - Issue 3332908: Failure of load balancer during an edit of VS instance in TKGI.

<br>
###<a id="1-17-4-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.17.3 are also in <%= vars.product_short %> v1.17.4.
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.3 Known Issues](#1-17-3-known-issues) below.

<%= vars.k8s_runtime_abbr %> v1.17.4 does not include any additional known issues.

<hr>

<br>
<br>
## <a id="management-console-1-17-4"></a> <%= vars.k8s_runtime_abbr %> Management Console <%= vars.product_version %>.4

**Release Date**: March 14, 2024

<%= vars.product_short %> Management Console provides an opinionated installation of <%= vars.k8s_runtime_abbr %>.

<br>
### <a id="management-console-1-17-4-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: The component versions supported by <%= vars.k8s_runtime_abbr %> Management Console might differ from or be more limited than
    the versions supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank">v1.17.4</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>March 14, 2024</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-17-4">v1.17.4</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v3.0.24&#42;</td>
        <td style="text-align: center;"><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Operations%20Manager#/releases/1398059" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.26.14&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.10.0&os=&servicePk=309799&language=EN" target="_blank">v2.10.0</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.10.0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcell</td>
        <td>v1.390&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/Stemcells-for-VMware-Tanzu/services/release-notes/stemcells.html#jammy-1-390" target="_blank">Release Notes</a></td>
    </tr>
</table>

<a id="management-console-1-17-4-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-17-4-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.17.4 are from
<%= vars.k8s_runtime_abbr %> MC v1.17.3, and
<%= vars.k8s_runtime_abbr %> MC v1.16.7 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.


<br>
### <a id="management-console-1-17-4-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> MC v1.17.4 resolves the following issue:

* Fixes issue [Cannot log in to the TKGI MC after restarting Ops Manager v3 VM from vSphere](#management-console-1-17-0-om-vm-restart).

<%= vars.k8s_runtime_abbr %> Management Console v1.17.4 does not include any new features.

<br>
### <a id="management-console-1-17-4-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.17.3
are also in <%= vars.product_short %> Management Console v1.17.4. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.3 Known Issues](#1-17-3-known-issues) below.

<%= vars.k8s_runtime_abbr %> MC v1.17.4 does not include any additional known issues.

<hr>

<br>
## <a id="1-17-3"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.3

<br>
**Release Date**: January 31, 2024

<br>
### <a id="1-17-3-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th colspan=3><h4>Release Details</h4></th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.3&os=&servicePk=309931&language=EN" target="_blank">v1.17.3</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>January 31, 2024</td>
    </tr>
    <tr>
        <th colspan=3><h4>Internal Component Versions</h4></th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td colspan=2>v1.7.1</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.24<br>Windows: v1.6.24</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.9.3+vmware.20&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v3.0.3</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes-sigs/vsphere-csi-driver/releases/tag/v3.0.3" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.9</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.4&os=&servicePk=309032&language=EN" target="_blank">v2.8.4</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.8.4" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.26.12&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.4</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.1.1.3&#42;</td>
        <td style="text-align: center;">
        <a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1.3/rn/vmware-nsx-container-plugin-4113-release-notes/index.html" target="_blank">Release Notes</a>
        </td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v8.0.31-23
        <br>pxc-release: v1.0.8</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/8.0/release-notes/8.0.31-23.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v1.0.8">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.99&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=203152&language=EN" target="_blank"><%= vars.velero_version %></a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/<%= vars.velero_version %>" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.13.0<br>Wavefront Proxy: v12.4</td>
    </tr>
    <tr>
        <th colspan=3><h4>Stemcell Compatibility</h4></th>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcells</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.3&os=&servicePk=309931&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.65&#42; or later</td>
    </tr>
    <tr>
        <th colspan=3><h4>Interoperability</h4></th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.3&os=&servicePk=309931&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware Aria Operations Management Pack for Kubernetes</td>
        <td>v1.10.3</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v5.0&#42;&#42;, v4.5.2&#42;&#42;</td>
        <td style="text-align: center;">Release Notes:
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/rn/vmware-cloud-foundation-50-release-notes/index.html" target="_blank">v5.0</a>,
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5.2/rn/vmware-cloud-foundation-452-release-notes/index.html" target="_blank">v4.5.2</a>
        </td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0," target="_blank">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
</table>

<a id="1-17-3-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v5.0 and VCF v4.5.2 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.  
&#42;&#42;&#42; Migration from NSX Management Plane API to NSX Policy API requires VMware NSX v4.0.1.1 or later. NSX v4.0.1.1 supports only 50% of NSX Management Plane API
scale. To use Policy API at 100% of Management Plane API scale, you require NSX v4.1.1.

<br>
### <a id="1-17-3-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.17.3 are from
<%= vars.k8s_runtime_abbr %> v1.17.2, and
<%= vars.k8s_runtime_abbr %> v1.16.6 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.


<br>
### <a id="1-17-3-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.17.3 does not include any new breaking changes.


<br>
### <a id="1-17-3-features"></a><a id="1-17-3-enhancements"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.3 includes the following enhancement:

* Prevents broker APIs from including base64-encoded PNG images in broker service metadata, to save syslog space.

<br>
### <a id="1-17-3-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.17.3 resolves the following issues:

* Fixes [vSphere CSI Failure When Backslash in User Name](#1-17-0-backslash-username).
* Fixes [Error Scaling Clusters when Compute Profile Lacks Node Pool](#1-17-0-no-pool).
* Fixes issue: Updating Kubernetes clusters loses `ClusterMetricSink` configuration details, preventing Prometheus from contacting Telegraf pods.
* NCP update to v4.1.1.3 fixes bugs:

    - TKGI apps cannot access NSX load balancer.
    - [Issue 3310860 - UDP connections with the same port may fail when endpoints of clusterIP Service restart](https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1.3/rn/vmware-nsx-container-plugin-4113-release-notes/index.html#Resolved%20Issues) in the _NCP 4.1.1.3 Release Notes_.

<br>
###<a id="1-17-3-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.17.2 are also in <%= vars.product_short %> v1.17.3.
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.2 Known Issues](#1-17-2-known-issues) below.

<%= vars.k8s_runtime_abbr %> v1.17.3 does not include any additional known issues.

<p class="note warning"><strong> Important:</strong> To address CVE-2024-21626 by patching <%= vars.k8s_runtime_abbr %> with a runc upgrade, see [High-Severity CVE-2024-21626 in runc 1.1.11 and earlier](#1-17-0-cve-2024-21626) below.

<hr>

<br>
<br>
## <a id="management-console-1-17-3"></a> <%= vars.k8s_runtime_abbr %> Management Console <%= vars.product_version %>.3

**Release Date**: January 31, 2024

<%= vars.product_short %> Management Console provides an opinionated installation of <%= vars.k8s_runtime_abbr %>.

<br>
### <a id="management-console-1-17-3-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: The component versions supported by <%= vars.k8s_runtime_abbr %> Management Console might differ from or be more limited than
    the versions supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank">v1.17.3</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>January 31, 2024</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-17-3">v1.17.3</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v3.0.23&#42;</td>
        <td style="text-align: center;"><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Operations%20Manager#/releases/1398059" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.26.12&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.4&os=&servicePk=309032&language=EN" target="_blank">v2.8.4</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.8.4">Release Notes</a></td>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcell</td>
        <td>v1.340&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/Stemcells-for-VMware-Tanzu/services/release-notes/stemcells.html#jammy-1-340" target="_blank">Release Notes</a></td>
    </tr>
</table>

<a id="management-console-1-17-3-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-17-3-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.17.3 are from
<%= vars.k8s_runtime_abbr %> MC v1.17.2, and
<%= vars.k8s_runtime_abbr %> MC v1.16.6 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.


<br>
### <a id="management-console-1-17-3-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> MC v1.17.3 resolves the following issue:

* Fixes [Cannot SSH in to Ops Manager Using Displayed Key](#management-console-1-17-2-no-ssh-opsman).

<%= vars.k8s_runtime_abbr %> Management Console v1.17.3 does not include any new features.

<br>
### <a id="management-console-1-17-3-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.17.2
are also in <%= vars.product_short %> Management Console v1.17.3. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.2 Known Issues](#1-17-2-known-issues) below.

<%= vars.k8s_runtime_abbr %> MC v1.17.3 does not include any additional known issues.


<hr>

<br>
## <a id="1-17-2"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.2

<br>
**Release Date**: November 16, 2023

<br>
### <a id="1-17-2-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th colspan=3><h4>Release Details</h4></th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.2&os=&servicePk=309517&language=EN" target="_blank">v1.17.2</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>November 16, 2023</td>
    </tr>
    <tr>
        <th colspan=3><h4>Internal Component Versions</h4></th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td colspan=2>v1.7.1&#42;</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.24&#42;<br>Windows: v1.6.24&#42;</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.9.3+vmware.18&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v3.0.3&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes-sigs/vsphere-csi-driver/releases/tag/v3.0.3" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.9</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.4&os=&servicePk=309032&language=EN" target="_blank">v2.8.4&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.8.4" target="_blank">Release Notes</a></td> 
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.26.10&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.4</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.1.1.1</td>
        <td style="text-align: center;">
        <a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1.1/rn/vmware-nsx-container-plugin-4111-release-notes/index.html" target="_blank">Release Notes</a>
        </td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v8.0.31-23
        <br>pxc-release: v1.0.8</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/8.0/release-notes/8.0.31-23.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v1.0.8">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.92&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=203152&language=EN" target="_blank"><%= vars.velero_version %></a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/<%= vars.velero_version %>" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.13.0<br>Wavefront Proxy: v12.4</td>
    </tr>
    <tr>
        <th colspan=3><h4>Stemcell Compatibility</h4></th>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcells</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.2&os=&servicePk=309517&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.65&#42; or later</td>
    </tr>
    <tr>
        <th colspan=3><h4>Interoperability</h4></th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.2&os=&servicePk=309517&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware Aria Operations Management Pack for Kubernetes</td>
        <td>v1.10.3</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v5.0&#42;&#42;, v4.5.2&#42;&#42;</td>
        <td style="text-align: center;">Release Notes: 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/rn/vmware-cloud-foundation-50-release-notes/index.html" target="_blank">v5.0</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5.2/rn/vmware-cloud-foundation-452-release-notes/index.html" target="_blank">v4.5.2</a>
        </td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0," target="_blank">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
</table>

<a id="1-17-2-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v5.0 and VCF v4.5.2 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.  
&#42;&#42;&#42; Migration from NSX Management Plane API to NSX Policy API requires VMware NSX v4.0.1.1 or later. NSX v4.0.1.1 supports only 50% of NSX Management Plane API 
scale. To use Policy API at 100% of Management Plane API scale, you require NSX v4.1.1.

<br>
### <a id="1-17-2-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.17.2 are from 
<%= vars.k8s_runtime_abbr %> v1.17.1, and 
<%= vars.k8s_runtime_abbr %> v1.16.5 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.  


<br>
### <a id="1-17-2-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.17.2 does not include any new breaking changes.  


<br>
### <a id="1-17-2-features"></a><a id="1-17-2-enhancements"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.2 does not include any new features or enhancements.  

<br>
### <a id="1-17-2-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.17.2 resolves the following issues:  

* Component bumps fix the following:  
    * Upgrades Antrea to include downstream v1.11.3+vmware.2 enhancements: Fixes [Antrea agent pods restart issue when FQDN-based rules or network policy logging is used](https://github.com/antrea-io/libOpenflow/pull/54).  
    * Upgrades CSI Driver for vSphere to v3.0.3: Fixes [Prevent node cache update during attach and detach](https://github.com/kubernetes-sigs/vsphere-csi-driver/pull/2597).  
* Fixes [<%= vars.k8s_runtime_abbr %> Does Not Support the Antrea Egress Feature on AWS](#1-17-0-antrea-engress).  
    <p class='note'><strong>Note:</strong> You must grant the AWS Worker Instance Profile 
    additional AWS Identity and Access Management (IAM) permissions before using 
    the Antrea Egress feature with worker nodes on AWS. For more information, see 
    <a href="troubleshoot-issues.html#antrea-egress-aws">Prepare AWS Worker Instance Profile Permissions</a>
    in <em>General Troubleshooting</em>.
    </p>
* Fixes [Cluster Update Operations Fail Due to Duplicate Tag Keys](#1-17-0-duplicate-cluster-tag).
* Fixes [Node Drain Operation Ignores the <%= vars.k8s_runtime_abbr %> Deployment Plan Settings](#1-17-0-ignore-node-drain-timeout).
<% if vars.product_version == "COMMENTED"  %>
    * Upgrades Kubernetes to v1.26.8:  
        * Fixes [CVE-2023-2728](https://nvd.nist.gov/vuln/detail/CVE-2023-2728).  
    * Upgrades Metrics Server to v0.6.4:  
        * Fixes [CVE-2022-28948](https://nvd.nist.gov/vuln/detail/CVE-2022-28948) and [CVE-2022-41721](https://nvd.nist.gov/vuln/detail/CVE-2022-41721).
    * Fixes CVE-2023-3676, CVE-2023-3893, and CVE-2023-3955.    
* Upgrades NCP to v4.1.1.1:  
    * Fixes _`FailedCreatePodSandBox` error during cluster creation_.  
* Fixes [Cluster Might Fail to Send the `cluster_name` Tag to Logging after Cluster Upgrade](#1-17-0-missing-cluster-name-tag). 
<% end %>

        
<% if vars.product_version == "COMMENTED"  %>
* Fixes [](#1-17-0-).  
* Component bumps fix the following:  
    * Upgrades  to:  
        * Fixes [](#1-17-0-).  
<% end %>

<br>
###<a id="1-17-2-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.17.1 are also in <%= vars.product_short %> v1.17.2. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.1 Known Issues](#1-17-1-known-issues) below.  

<%= vars.k8s_runtime_abbr %> v1.17.2 does not include any additional known issues.  

<br>
<br>
## <a id="management-console-1-17-2"></a> <%= vars.k8s_runtime_abbr %> Management Console <%= vars.product_version %>.2

**Release Date**: November 16, 2023

<%= vars.product_short %> Management Console provides an opinionated installation of <%= vars.k8s_runtime_abbr %>.  

<br>
### <a id="management-console-1-17-2-snapshot"></a>Product Snapshot  

<p class="note"><strong>Note</strong>: The component versions supported by <%= vars.k8s_runtime_abbr %> Management Console might differ from or be more limited than
    the versions supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank">v1.17.2</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>November 16, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-17-2">v1.17.2</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v3.0.18&#42;</td>
        <td style="text-align: center;"><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Operations%20Manager#/releases/1398059" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.26.10&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1269" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.4&os=&servicePk=309032&language=EN" target="_blank">v2.8.4&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v2.8.4">Release Notes</a></td>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcell</td>
        <td>v1.289&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/Stemcells-for-VMware-Tanzu/services/release-notes/stemcells.html#jammy-1-289" target="_blank">Release Notes</a></td>
    </tr>
</table>

<a id="management-console-1-17-2-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-17-2-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.17.2 are from
<%= vars.k8s_runtime_abbr %> MC v1.17.1, and 
<%= vars.k8s_runtime_abbr %> MC v1.16.5 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.  


<br>
### <a id="management-console-1-17-2-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> Management Console v1.17.2 does not include any new features or resolved issues.  

<% if vars.product_version == "COMMENTED"  %>
<%= vars.k8s_runtime_abbr %> Management Console v1.17.1 includes the following features:  
<%= vars.k8s_runtime_abbr %> Management Console v1.17.1 resolves the following issues:  
<% end %>


<br>
### <a id="management-console-1-17-2-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.17.1
are also in <%= vars.product_short %> Management Console v1.17.2. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.1 Known Issues](#1-17-1-known-issues) below.  

<%= vars.k8s_runtime_abbr %> MC v1.17.2 has the following additional known issue.

#### <a id="management-console-1-17-2-no-ssh-opsman"></a>Cannot SSH in to Ops Manager Using Displayed Key

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.3](#1-17-3-bug-fixes).

**Symptom**

After upgrading to TKGI v1.17.2 you cannot use the key displayed in the Management Console > **Deployment Metadata** tab to `ssh` in to the Ops Manager VM as described in [Connect to Operations Manager with SSH](console-login-opsmanager.html#ops-manager-ssh) .

**Explanation**

The upgrade process generates a new SSH private key but does not update its value as shown in the Management Console > **Deployment Metadata** tab. After upgrade, the displayed key no longer matches any public key in the Ops Manager VM's `/home/ubuntu/.ssh/authorized_keys`.

**Workaround**

Retrieve and use an up-to-date SSH private key from a configuration file on the TKG Management Console VM:

1. `ssh` in to the Management Console VM as root:

    ```
    ssh root@MC-IP-ADDRESS
    ```

    Where `MC-IP-ADDRESS` is the IP address that you use to access the Management Console with a browser as described in [Step 2: Log In to <%= vars.k8s_runtime_abbr %> Management Console](console-deploy-ova.html#access-console).

1. Retrieve the private key from the file `/etc/vmware/.pks/om_root_ca`.

1. `ssh` in to the Ops Manager VM by passing the private key to the `-i` flag of `ssh`. For example, to connect to the Ops Manager VM directly from the MC VM:

    ```
    ssh -i /etc/vmware/.pks/om_root_ca ubuntu@OPS-MANAGER-IP
    ```

    You can also copy the private key to `ssh` from your local workstation.

<hr>


<br>
## <a id="1-17-1"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.1

<br>
**Release Date**: September 14, 2023

<br>
### <a id="1-17-1-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th colspan=3><h4>Release Details</h4></th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.1&os=&servicePk=309085&language=EN" target="_blank">v1.17.1</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>September 14, 2023</td>
    </tr>
    <tr>
        <th colspan=3><h4>Internal Component Versions</h4></th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.7.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.7.0/rn/vmware-container-networking-with-antrea-170-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.18<br>Windows: v1.6.18</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.9.3+vmware.16&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v3.0.2</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/3.0/rn/vmware-vsphere-container-storage-plugin-30-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.9</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.2&os=&servicePk=308657&language=EN" target="_blank">v2.8.2</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v282-0" target="_blank">Release Notes</a></td> 
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.26.8&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1267" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.4&#42;</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.1.1.1&#42;</td>
        <td style="text-align: center;">
        <a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1.1/rn/vmware-nsx-container-plugin-4111-release-notes/index.html" target="_blank">Release Notes</a>
        </td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v8.0.31-23
        <br>pxc-release: v1.0.8</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/8.0/release-notes/8.0.31-23.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v1.0.8">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.85&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=203152&language=EN" target="_blank"><%= vars.velero_version %></a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/<%= vars.velero_version %>" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.13.0<br>Wavefront Proxy: v12.4</td>
    </tr>
    <tr>
        <th colspan=3><h4>Stemcell Compatibility</h4></th>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcells</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.1&os=&servicePk=309085&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.61 or later</td>
    </tr>
    <tr>
        <th colspan=3><h4>Interoperability</h4></th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.1&os=&servicePk=309085&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware Aria Operations Management Pack for Kubernetes</td>
        <td>v2.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html#August%2010,%202023" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v5.0&#42;&#42;, v4.5.2&#42;&#42;</td>
        <td style="text-align: center;">Release Notes: 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/rn/vmware-cloud-foundation-50-release-notes/index.html" target="_blank">v5.0</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5.2/rn/vmware-cloud-foundation-452-release-notes/index.html" target="_blank">v4.5.2</a>
        </td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0," target="_blank">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
</table>

<a id="1-17-1-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v5.0 and VCF v4.5.2 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.  
&#42;&#42;&#42; Migration from NSX Management Plane API to NSX Policy API requires VMware NSX v4.0.1.1 or later. NSX v4.0.1.1 supports only 50% of NSX Management Plane API 
scale. To use Policy API at 100% of Management Plane API scale, you require NSX v4.1.1.

<br>
### <a id="1-17-1-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.17.1 are from 
<%= vars.k8s_runtime_abbr %> v1.17.0, and 
<%= vars.k8s_runtime_abbr %> v1.16.3 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.  


<br>
### <a id="1-17-1-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.17.1 does not include any new breaking changes.  


<br>
### <a id="1-17-1-features"></a><a id="1-17-1-enhancements"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.1 does not include any new features or enhancements.  

<br>
### <a id="1-17-1-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.17.1 resolves the following issues:  

* **[Security Fix]** Component bumps fix the following:  
    * Upgrades Kubernetes to v1.26.8:  
        * Fixes [CVE-2023-2728](https://nvd.nist.gov/vuln/detail/CVE-2023-2728).  
    * Upgrades Metrics Server to v0.6.4:  
        * Fixes [CVE-2022-28948](https://nvd.nist.gov/vuln/detail/CVE-2022-28948) and [CVE-2022-41721](https://nvd.nist.gov/vuln/detail/CVE-2022-41721).
    * Fixes CVE-2023-3676 and CVE-2023-3955.  
* Upgrades NCP to v4.1.1.1:  
    * Fixes _`FailedCreatePodSandBox` error during cluster creation_.  
* Fixes [Cluster Might Fail to Send the `cluster_name` Tag to Logging after Cluster Upgrade](#1-17-0-missing-cluster-name-tag). 
        
<% if vars.product_version == "COMMENTED"  %>
* Fixes [](#1-17-0-).  
* Component bumps fix the following:  
    * Upgrades  to:  
        * Fixes [](#1-17-0-).  
<% end %>

<br>
###<a id="1-17-1-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.17.0 are also in <%= vars.product_short %> v1.17.1. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.0 Known Issues](#1-17-0-known-issues) below.  

<%= vars.k8s_runtime_abbr %> v1.17.1 does not include any additional known issues.  

<hr>


<br>
<br>
## <a id="management-console-1-17-1"></a> <%= vars.k8s_runtime_abbr %> Management Console <%= vars.product_version %>.1

**Release Date**: September 14, 2023

<%= vars.product_short %> Management Console provides an opinionated installation of <%= vars.k8s_runtime_abbr %>.  

<br>
### <a id="management-console-1-17-1-snapshot"></a>Product Snapshot  

<p class="note"><strong>Note</strong>: The component versions supported by <%= vars.k8s_runtime_abbr %> Management Console might differ from or be more limited than
    the versions supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank">v1.17.1</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>September 14, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-17-1">v1.17.1</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v3.0.14&#42;</td>
        <td style="text-align: center;"><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Operations%20Manager#/releases/1346291" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.26.8&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1267" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.2&os=&servicePk=308657&language=EN" target="_blank">v2.8.2</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v282-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcell</td>
        <td>v1.207&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/Stemcells-for-VMware-Tanzu/services/release-notes/stemcells.html#jammy-1-207" target="_blank">Release Notes</a></td>
    </tr>
</table>

<a id="management-console-1-17-1-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-17-1-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.17.1 are from
<%= vars.k8s_runtime_abbr %> MC v1.17.0, and 
<%= vars.k8s_runtime_abbr %> MC v1.16.3 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.  


<br>
### <a id="management-console-1-17-1-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> Management Console v1.17.1 includes the following enhancements:  

* NSX Only: Enhances `tkgi delete-cluster` reliability by increasing the default <%= vars.k8s_runtime_abbr %> Operation Timeout value from 60 seconds to 120 seconds. <%= vars.k8s_runtime_abbr %> MC v1.17.1 also supports configuring the <%= vars.k8s_runtime_abbr %> Operation Timeout. 
For more information about configuring the <%= vars.k8s_runtime_abbr %> Operation Timeout from the <%= vars.k8s_runtime_abbr %> MC, see [Generate Configuration File and Deploy <%= vars.product_short %>](console-deploy-wizard.html#deploy) 
in _Deploy <%= vars.product_short %> by Using the Configuration Wizard_.  

<% if vars.product_version == "COMMENTED"  %>
<%= vars.k8s_runtime_abbr %> Management Console v1.17.1 includes the following features:  
<%= vars.k8s_runtime_abbr %> Management Console v1.17.1 resolves the following issues:  
<% end %>


<br>
### <a id="management-console-1-17-1-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.17.0 
are also in <%= vars.product_short %> Management Console v1.17.1. 
For more information, see [<%= vars.k8s_runtime_abbr %> v1.17.0 Known Issues](#1-17-0-known-issues) below.  

<%= vars.k8s_runtime_abbr %> MC v1.17.1 does not include any additional known issues.  

<hr>


<br>
## <a id="1-17-0"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.0

<br>
**Release Date**: August 3, 2023

<br>
### <a id="1-17-0-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th colspan=3><h4>Release Details</h4></th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.0&os=&servicePk=308869&language=EN" target="_blank">v1.17.0</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>August 3, 2023</td>
    </tr>
    <tr>
        <th colspan=3><h4>Internal Component Versions</h4></th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.7.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.7.0/rn/vmware-container-networking-with-antrea-170-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.18&#42;<br>Windows: v1.6.18&#42;</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.9.3+vmware.11&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v3.0.2&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/3.0/rn/vmware-vsphere-container-storage-plugin-30-release-notes/index.html" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.9&#42;</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.2&os=&servicePk=308657&language=EN" target="_blank">v2.8.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v282-0" target="_blank">Release Notes</a></td> 
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.26.5&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1264" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.1.1.0&#42;</td>
        <td style="text-align: center;">
        <% if vars.product_version == "COMMENTED"  %>
        <a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.1.1/rn/vmware-nsx-container-plugin-411-release-notes/index.html" target="_blank">Release Notes</a>
        <% end %>
        </td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v8.0.31-23&#42;
        <br>pxc-release: v1.0.8&#42;</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/8.0/release-notes/8.0.31-23.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v1.0.8">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.81&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=203152&language=EN" target="_blank"><%= vars.velero_version %>&#42;</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/<%= vars.velero_version %>" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.13.0&#42;<br>Wavefront Proxy: v12.4&#42;</td>
    </tr>
    <tr>
        <th colspan=3><h4>Stemcell Compatibility</h4></th>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcells</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.0&os=&servicePk=308869&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.61&#42; or later</td>
    </tr>
    <tr>
        <th colspan=3><h4>Interoperability</h4></th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.0&os=&servicePk=308869&language=EN" target="_blank"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware Aria Operations Management Pack for Kubernetes</td>
        <td>v2.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html#August%2010,%202023" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v5.0&#42;&#42;, v4.5.2&#42;&#42;</td>
        <td style="text-align: center;">Release Notes: 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/5.0/rn/vmware-cloud-foundation-50-release-notes/index.html" target="_blank">v5.0</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5.2/rn/vmware-cloud-foundation-452-release-notes/index.html" target="_blank">v4.5.2</a>
        </td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0," target="_blank">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
</table>

<a id="1-17-0-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v5.0 and VCF v4.5.2 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.  
&#42;&#42;&#42; Migration from NSX Management Plane API to NSX Policy API requires VMware NSX v4.0.1.1 or later. NSX v4.0.1.1 supports only 50% of NSX Management Plane API 
scale. To use Policy API at 100% of Management Plane API scale, you require NSX v4.1.1.

<br>
### <a id="1-17-0-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.17.0 are from 
<%= vars.k8s_runtime_abbr %> v1.16.2 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.  

<br>
### <a id="1-17-0-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.17.0 has the following breaking changes:  

* **Removals in Kubernetes v1.26**: The following APIs are removed in Kubernetes v1.26:

  * `v1alpha2` CRI API
  * `v1beta1` flow control API group
  * `v2beta2` HorizontalPodAutoscaler API
  
  For information on other removals in Kubernetes v1.26, see 
  [Kubernetes Removals, Deprecations, and Major Changes in 1.26](https://kubernetes.io/blog/2022/11/18/upcoming-changes-in-kubernetes-1-26/) in 
  Kubernetes Blog.

* **In-Tree vSphere Storage Volume Support**:  In-Tree vSphere Storage volume support has been entirely removed. 
The <%= vars.k8s_runtime_abbr %> v1.17 upgrade automatically migrates <%= vars.k8s_runtime_abbr %> clusters from in-tree vSphere storage to the CSI Driver for vSphere. 
<%= vars.recommended_by %> strongly recommends that you migrate your in-tree vSphere storage volumes to vSphere CSI volumes before upgrading to <%= vars.k8s_runtime_abbr %> v1.17. 
For information on how to manually migrate In-Tree vSphere Storage volumes on existing <%= vars.k8s_runtime_abbr %> clusters from In-Tree vSphere Storage 
to the automatically installed vSphere CSI Driver, see 
[Migrate an In-Tree vSphere Storage Volume to the vSphere CSI Driver](vsphere-cns.html#migrate-to-csi) 
in _Deploying and Managing Cloud Native Storage (CNS) on vSphere_.  

<p class="note warning"><strong>Warning:</strong> If you have <%= vars.k8s_runtime_abbr %>-provisioned Windows worker clusters, do not activate the <strong>Upgrade all clusters</strong> errand before upgrading to the <%= vars.k8s_runtime_abbr %> v1.17 tile.
You cannot use the <strong>Upgrade all clusters</strong> errand because you must manually migrate each individual Windows worker cluster to the CSI Driver for vSphere. 
For more information, see <a href="vsphere-cns.html#windows-configure-csi">Configure vSphere CSI for Windows</a> in <em>Deploying and Managing Cloud Native Storage (CNS) on vSphere</em>.</p>

<br>
### <a id="1-17-0-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.0 includes the following features:  

<br>
#### <a id="1-17-0-upgrade-cluster-enhancements"></a> Cluster Upgrade Enhancements

The `tkgi upgrade-cluster` CLI command includes the following enhancements:  

* Supports upgrading a cluster's worker nodes in parallel. 
For more information, see [Upgrade Worker Nodes in Parallel](upgrade-clusters.html#upgrade-nodes-in-parallel) in _Upgrading Clusters_.  
* Supports automated cluster validation before upgrading a cluster. 
For more information, see [Upgrade Cluster Validation](upgrade-clusters.html#upgrade-cluster-pre-check) in _Upgrading Clusters_.  

<p class="note"><strong>Note</strong>: These enhancements apply to <code>tkgi upgrade-cluster</code> only. For example, when using <code>tkgi upgrade-clusters</code>, the clusters can be upgraded in parallel, 
but the worker nodes within an upgrading cluster are always upgraded serially.
</p>

<% if vars.product_version == "COMMENTED"  %>
To upgrade worker nodes in parallel in <%= vars.k8s_runtime_abbr %> v1.17.0 and later, 
configure the <%= vars.k8s_runtime_abbr %> tile > **<%= vars.control_plane %>** tab > **Worker VM Max in Flight** setting 
with the number of non-canary worker instances to upgrade in parallel. 
For more information, see the [**<%= vars.control_plane %>**](installing-vsphere.html.md.erb#tkgi-api) 
in the Installing <%= vars.k8s_runtime_abbr %> tile topic for your IaaS.  
<% end %>



<br>
#### <a id="1-17-0-compute-profile-enhancements"></a> Compute Profile Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.0 includes the following compute profile enhancements:  

* Supports configuring compute profiles with a node pool description. 
For more information, see [`node_pools` Block](compute-profiles-manage.html#worker-nodes) in 
_Creating and Managing Compute Profiles with the CLI (vSphere)_.  
* Supports optionally skipping compute profile validation. For more information, 
see [Assign a Compute Profile](compute-profiles-use.html#update-profile-procedure) in _Using Compute Profiles (vSphere)_.  
* Prevents updating an existing compute profile with unsupported configuration changes. Prevents: Changing the number of control plane nodes, changing the node pool `name` property, and adding a new node pool while deleting an existing node pool.  

<br>
#### <a id="1-17-0-csi-enhancements"></a> CSI Driver for vSphere Enhancements

<%= vars.k8s_runtime_abbr %> v1.17.0 includes the following CSI Driver for vSphere enhancements:  

* Supports the XFS file system on Linux clusters. 
For more information, see [Use XFS File System with vSphere Container Storage Plug-in](https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/3.0/vmware-vsphere-csp-getting-started/GUID-752B928E-8493-4387-8447-D72839899230.html) 
in the VMware vSphere Container Storage Plug-in documentation.  
* Supports the CSI Driver for vSphere on Windows clusters. 
For more information, see [Configure vSphere CSI for Windows](vsphere-cns.html#windows-configure-csi) 
in _Deploying and Managing Cloud Native Storage (CNS) on vSphere_.


<br>
#### <a id="1-17-0-enhancements"></a>Additional Features

<%= vars.k8s_runtime_abbr %> v1.17.0 includes the following additional features:  

* Supports VMware vSphere v8.0 and VMware vSAN 8.0. For more information, see 
[Scenario 2: Upgrading to <%= vars.k8s_runtime_abbr %> <%= vars.product_version %> and vSphere v8.0](upgrade-scenarios.html#tkgi-vsphere) 
in _Upgrade Order for <%= vars.k8s_runtime_abbr %> Environments on vSphere_ and 
[VMware Product Interoperability Matrices](https://interopmatrix.vmware.com/Interoperability?col=644&row=0).  

* TKGI API and the UAA connectivity now support TLS v1.3, in addition to TLS v1.2.

* Supports configuring cluster-level Pod Security Admission (PSA). For more information, 
see [Pod Security Admission in a <%= vars.k8s_runtime_abbr %> Cluster](pod-security-admission.html#psa-cluster).

* NSX Only: Enhances `tkgi delete-cluster` reliability by increasing the default <%= vars.k8s_runtime_abbr %> Operation Timeout 
from 60 seconds to 120 seconds. 
For more information about configuring the **<%= vars.k8s_runtime_abbr %> Operation Timeout** field on the <%= vars.k8s_runtime_abbr %> Tile, 
see [Networking](installing-nsx-t.html#networking) in _Installing <%= vars.product_short %> on vSphere with VMware NSX_.  

* Upgrades the <%= vars.control_plane_db %> from MySQL v5.7 to MySQL v8. 
For information about the differences between MySQL v5.7 to MySQL v8, 
see [MySQL Server Version Reference](https://dev.mysql.com/doc/mysqld-version-reference/en/) in the MySQL documentation.  

* Supports resizing clusters that have not been upgraded to the current <%= vars.k8s_runtime_abbr %> control plane version. 
For more information, see 
[Tasks Supported Following a <%= vars.k8s_runtime_abbr %> Control Plane Upgrade](understanding-upgrades.html#control-plane-upgrades-supported-tasks) 
in _About <%= vars.k8s_runtime_abbr %> Upgrades_.  

* vSphere with VMware NSX only: Supports specifying a network profile for configuring a <%= vars.k8s_runtime_abbr %> upgrade smoke test cluster. 
For more information, see [Errands](installing-nsx-t.html#errands) in _Installing <%= vars.product_short %> on vSphere with VMware NSX_.  

* Improves NSX resource clean-up when deleting a Kubernetes cluster in NSX Policy API mode.  

* Supports configuring additional NCP Network Profiles parameters: 
`nsx_v3.cookie_name`, `nsx_v3.members_per_medium_lbs`, `nsx_v3.members_per_small_lbs`, `nsx_v3.natfirewallmatch`, 
`nsx_v3.ncp_enforced_pool_member_limit`, `nsx_v3.relax_scale_validation`. 
For more information, see [cni_configurations Extensions Parameters](network-profiles-define.html#cni-extensions) 
in _Creating and Managing Network Profiles_.  

* Supports configuring the Fluent Bit container memory limit. 
For more information, see [Log Sink Resources](installing-vsphere.html#log-sinks) in _Installing <%= vars.k8s_runtime_abbr %>_ 
or [The Fluent Bit Pod restarts Due to Out-of-Memory Issue](troubleshoot-issues.html#fluent-bit-memory) 
in _Troubleshooting_.  

* Increases the default expiration period of the `monitoring-metric-cert` certificate from one to four years.  

* Decreases the Fluentd default refresh interval to 30 seconds from 60 seconds. This ensures that all the logs are forwarded to 
  VMware vRealize Log Insight consistently.
  
* Supports NSX Policy API  at 100% of Management Plane API scale with NSX v4.1.1.

<br>
### <a id="1-17-0-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.17.0 resolves the following issues:

* Fixes ['Input not an X.509 certificate' When Applying Change on the <%= vars.k8s_runtime_abbr %> Tile](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-cert-error-terminator).  
* Fixes [The 'kube-state-metrics' ClusterRole Is Deleted during Cluster Upgrade](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-cluster-role-deleted).  
* Fixes [Rotated <%= vars.k8s_runtime_abbr %> Certificates Remain Listed as Expiring on the Ops Manager Certificates List](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-rotated-certs-expiring-in-opsman).  
* Fixes [Kubernetes API Server and etcd Daemon Occasionally Fail to Start During BBR Restore](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-bbr-restore-etcd-failure).  
* Fixes [Cluster Deletion Incomplete If an Error Occurs](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-cluster-deletion-incomplete).  
* Fixes [The Validator Secret Certificate Is Not Rotated](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-secrets-not-rotated).  
* Fixes [HTTPS Ingress Outage During VMware NSX Certificate Rotation](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-https-ingress-outage).  
* Fixes `NullPointerException` error when creating a Compute Profile configured with `instances: 0` and the `max_worker_instances` parameter.  
* Fixes [<%= vars.k8s_runtime_abbr %> Sets the Maximum Persistent Volumes per Node to 59 Instead of 45](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-incorrect-max-volumes).  
* Fixes [Some Telegraf Metric-Sink Pods Crash After <%= vars.k8s_runtime_abbr %> Upgrade](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-telegraf-metric-sink-crash).  
* Fixes [Telemetry Does Not Report Large Metrics](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#1-16-0-token-too-long).  
* Fixes [API Server Audit Logs Leak Tokens](#1-17-0-api-server-token-leak).  
* Component bumps fix the following:  
    * Upgrades CSI Driver for vSphere to v3.0.2:  
        * Fixes [2.5 and older series has locking related issues: #2155](https://github.com/kubernetes-sigs/vsphere-csi-driver/issues/2155).  
        * Fixes [vSphere CSI driver is unable to detect not authenticated sessions: #2157](https://github.com/kubernetes-sigs/vsphere-csi-driver/issues/2157).    
    * Upgrades Antrea to v1.7.0: Fixes [Antrea agent pods restart issue when FQDN-based rules or network policy logging is used](https://github.com/antrea-io/libOpenflow/pull/54).   

<br>
### <a id="1-17-0-deprecations"></a><a id="1-17-0-upcoming-deprecations"></a> Deprecations

The following <%= vars.k8s_runtime_abbr %> features have been deprecated or removed from <%= vars.k8s_runtime_abbr %> v1.17:  

* **In-Tree vSphere Storage Volume Support**: In-Tree vSphere Storage volume support has been entirely removed. 
For more information, see [Breaking Changes](#1-17-0-breaking-changes) above.  

*  **Google Cloud Platform**: Support for the Google Cloud Platform (GCP) is deprecated. 
Support for GCP will be entirely removed in <%= vars.k8s_runtime_abbr %> v1.19.  

* **The `log_dropped_traffic` CNI Configuration parameter**: In <%= vars.k8s_runtime_abbr %> v1.17.0 and later, 
    the `log_dropped_traffic` CNI Configuration parameter is ignored.  

    To configure logging in a Network Profile, modify the `log_firewall_traffic` parameter. For more information, 
    see `log_settings` in the [`cni_configurations` Parameters](network-profiles-define.html#cni-params) section in _Creating and Managing Network Profiles_.  
    
* **Flannel Support**: Support for the Flannel Container Networking Interface (CNI) is deprecated. 
Support for Flannel will be entirely removed in <%= vars.k8s_runtime_abbr %> v1.19. 
<%= vars.recommended_by %> recommends that you switch your Flannel CNI-configured clusters to the Antrea CNI.
For more information about Flannel CNI deprecation, see
[About Switching from the Flannel CNI to the Antrea CNI](understanding-upgrades.html#cni)
in _About Tanzu Kubernetes Grid Integrated Edition Upgrades_.  

* **SecurityContextDeny Admission Controller Support**: <%= vars.k8s_runtime_abbr %> support for the SecurityContextDeny admission controller will be removed in <%= vars.k8s_runtime_abbr %> v1.18. 
SecurityContextDeny has been deprecated, and the Kubernetes community recommends the controller not be used. 
Pod security admission (PSA) is the preferred method for providing a more secure Kubernetes environment. 
For more information about PSA, see [Pod Security Admission in <%= vars.k8s_runtime_abbr %>](pod-security-admission.html).  


<br>
###<a id="1-17-0-known-issues"></a>Known Issues

<%= vars.k8s_runtime_abbr %> v1.17.0 has the following known issues.  

<hr>

#### <a id="1-17-0-cve-2024-21626"></a>High-Severity CVE-2024-21626 in runc 1.1.11 and earlier

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.4](#1-17-4-bug-fixes).

To address [CVE-2024-21626](https://www.cve.org/CVERecord?id=CVE-2024-21626), which [impacts runc v1.1.11 and earlier](https://github.com/opencontainers/runc/security/advisories/GHSA-xr7r-f8xq-vfvv), follow [Instructions to address CVE-2024-21626 for TKGI](https://knowledge.broadcom.com/external/article?legacyId=96500) in the VMware Knowledge Base.

<hr>

#### <a id="1-17-0-csi-driver-limits-vsphere"></a>Limitations on Using the VMware vSphere CSI Driver

The VMware vSphere CSI Driver supports a limited set of VMware vSphere features. 
Before enabling the vSphere CSI Driver on a <%= vars.k8s_runtime_abbr %> cluster, 
confirm the cluster and storage configuration are supported by the driver. 
For more information, see [Unsupported Features and Limitations](#unsupported-features) 
in _Deploying and Managing Cloud Native Storage (CNS) on vSphere_.  

<hr>

#### <a id="1-17-0-csi-driver-limits-public-cloud"></a>Limitations on Using a Public Cloud CSI Driver

<%= vars.k8s_runtime_abbr %> supports using a public cloud CSI Driver on a <%= vars.k8s_runtime_abbr %>-provisioned cluster.  

<a id="1-17-0-csi-driver-limits-public-cloud-installing"></a>**Installing a Public Cloud CSI Driver on a <%= vars.k8s_runtime_abbr %> Cluster**

If you plan to use a public cloud CSI Driver on a <%= vars.k8s_runtime_abbr %>-provisioned cluster, 
<%= vars.recommended_by %> recommends you take additional steps before installing the CSI Driver:  

* For most public clouds, <%= vars.recommended_by %> recommends you follow the CSI Driver installation procedure recommended by the public cloud provider.  

* For installing the Azure CSI Driver on a <%= vars.k8s_runtime_abbr %> cluster, <%= vars.recommended_by %> recommends you follow the procedure in the [How to install Azure file/disk CSI driver onto TKGI 1.14 cluster](https://knowledge.broadcom.com/external/article/298706/how-to-install-azure-filedisk-csi-driver.html?language=en_US) knowledge base article in the VMware Tanzu Support Hub.  


<a id="1-17-0-csi-driver-limits-public-cloud-managing"></a>**Managing a <%= vars.k8s_runtime_abbr %> Cluster That Uses a Public Cloud CSI Driver**

If you have enabled a public cloud CSI Driver on a <%= vars.k8s_runtime_abbr %> cluster, 
you must take additional steps when deletingupgrading, or updating the cluster:  

* [Updating a Cluster on a Public Cloud](#1-17-0-csi-driver-limits-public-cloud-updating)  
* [Upgrading a Cluster on a Public Cloud](#1-17-0-csi-driver-limits-public-cloud-upgrading)  
* [Deleting a Cluster on a Public Cloud](#1-17-0-csi-driver-limits-public-cloud-deleting)  

<a id="1-17-0-csi-driver-limits-public-cloud-updating"></a>**Updating a Cluster on a Public Cloud**

When updating a cluster that uses a public cloud CSI Driver:  

* No preparation step are needed when updating a multi-worker node cluster.  
* To prepare a single-worker node cluster for updating:  

    1. Resize the cluster to two or more worker nodes before updating the cluster. 
    For more information, see [Scaling Existing Clusters](scale-clusters.html).  
    1. Update the cluster.  


<a id="1-17-0-csi-driver-limits-public-cloud-upgrading"></a>**Upgrading a Cluster on a Public Cloud**

When upgrading a cluster that uses a public cloud CSI Driver:  

* No preparation steps are needed when upgrading a multi-worker node cluster.  
* To prepare a single-worker node cluster for upgrading:  

    1. Resize the cluster to two or more worker nodes before upgrading the cluster. 
    For more information, see [Scaling Existing Clusters](scale-clusters.html).  
    1. Upgrade the cluster. 
    For  more information on upgrading clusters, see [Upgrading Clusters](upgrade-clusters.html).  

<a id="1-17-0-csi-driver-limits-public-cloud-deleting"></a>**Deleting a Cluster on a Public Cloud**

When deleting a cluster that uses a public cloud CSI Driver:  

1. Manually delete the workload PVCs and PVs before deleting the cluster.  
1. Delete the cluster. 
For  more information on deleting clusters, see [Deleting Clusters](delete-cluster.html).  

<hr>

#### <a id="1-17-0-fluentd-logs"></a> Ephemeral storage overrun with temporary logfiles from Fluentd

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.5](#1-17-5-bug-fixes).

**Symptom**

Fluentd component logfiles that contain error text `invalid byte sequence in UTF-8` fill up and overrun ephemeral storage on cluster, for example `/tmp/fluent/backup/worker0/object_c79c/` mapped to ephemeral storage disk `dev/sdb1`.

**Workaround**

Modify Fluentd configuration by changing its log handling code `out_loginsight_buffered.rb` as follows:

1. Upload the latest BOSH release to the BOSH Director:

  ```
  bosh upload-release --sha1 daf34e35f1ac678ba05db3496c4226064b99b3e4 "https://bosh.io/d/github.com/cloudfoundry/os-conf-release?v=22.2.1" 
  ```

  For a different release, download it with `wget https://bosh.io/d/github.com/cloudfoundry/os-conf-release?v=RELEASE"` and calculate its SHA-1 with `shasum os-conf-release\?v\=RELEASE"`.

1. Create a runtime config file `runtime.yml` with the following code, to modify the `out_loginsight_buffered.rb` code:

  ```
  releases:
  - name: "os-conf"
    version: "22.2.1"
  addons:
  - name: os-configuration
    include:
      deployments: [dep1,dep2...]  =====> need to change to the cluster deployment id that you want to apply the change, if you want apply the change to all the clusters, just delete the include section.
    jobs:
    - name: pre-start-script
      release: os-conf
      properties:
        script: |-
          #!/bin/bash
          if [ -d "/var/vcap/jobs/fluentd/packages/vrli-fluentd/plugins/" ]; then
            sed -i 's/force_encoding("utf-8")/encode!('\''UTF-8'\'', '\''binary'\'', invalid: :replace, undef: :replace, replace: '\'' '\'' )/g' /var/vcap/jobs/fluentd/packages/vrli-fluentd/plugins/out_loginsight_buffered.rb
            echo "done"
          fi
  ```

1. Apply the runtime config file to the BOSH Director, giving it the name `runtime-fluentd`:

  ```
  bosh update-runtime-config --name runtime-fluentd runtime.yml
  ```

1. Check if the runtime config been set successfully:

  ```
  bosh runtime-config  --name runtime-fluentd
  ```

  The command output should list the contents of `runtime.yml`.

1. Upgrade the cluster with ephemeral storage overrun, to apply the new runtime config:

  ```
  tkgi upgrade-cluster CLUSTER-NAME
  ```

1. Log in to a cluster worker or master node and check that the file `/var/vcap/jobs/fluentd/packages/vrli-fluentd/plugins/out_loginsight_buffered.rb` includes the following lines:

  ```
  key.encode!('UTF-8', 'binary', invalid: :replace, undef: :replace, replace: ' ' )
  ...
  value.encode!('UTF-8', 'binary', invalid: :replace, undef: :replace, replace: ' ' )
  ```

1. Check that no more logfiles are routing to the directory `/tmp/fluent/backup/worker0` and no more error logs containing `invalid byte sequence in UTF-8` are writing to `/var/vcap/sys/log/fluentd.stdout.log`.

1. (Optional) Delete the runtime config:

  ```
  bosh delete-config --type runtime --name runtime-fluentd
  ```

  Unless you delete it, the runtime config persists in the BOSH Director and is applied with TKGI updates and upgrades, and other operations that run `bosh deploy`.
  After you upgrade to a TKGI version that fixes this issue, leaving the runtime config in place is harmless, but it does leave an unneeded file on the BOSH Director filesystem and make BOSH execute an unnecessary script.

<hr>

#### <a id="1-17-0-containerd-istio"></a> TKGI version upgrade without new stemcell fails for Containerd runtime clusters with Istio CNI

**Symptom**

On clusters configured to use a containerd registry and Istio CNI, upgrading the TKGI version without also upgrading the stemcell fails with errors kubelet `cannot find istio-cni binary` and `nsx fails to recieve message header`.

This error does not occur when you upgrade to a new stemcell along with the new TKGI version.

**Explanation**

When TKGI cluster upgrades and drains the node during upgrade, it leaves the cluster nodes' Istio CNI agent and CNI configuration in a corrupted state.

If the cluster nodes are not automatically re-created by a stemcell change, the corrupted Istio CNI state remains.

**Workaround**

For clusters that use both Containerd and Istio CNI:

* If you have already encountered this issue, re-create all worker nodes using the `bosh recreate` command:

  1. Run the `bosh vms` command to list the cluster VMs:

      ```
      bosh -d service-instance-DEPLOYMENT-ID vms
      ```
      Where `DEPLOYMENT-ID` is the BOSH-generated ID of your Kubernetes cluster deployment.

  1. For each VM instance listed as `worker/UUID` in the output, run `bosh recreate VM-NAME`:

      ```
      bosh -d service-instance-DEPLOYMENT-ID recreate worker/UUID
      ```

* In the future, you can avoid this issue by upgrading a cluster's stemcell whenever you upgrade its TKGI version.

<hr>

#### <a id="1-17-0-tap-labels"></a> NSX pod creation fails when using Tanzu Application Platform

**Symptom**

When you deploy a workload on a <%= vars.k8s_runtime_abbr %>-provisioned cluster with NSX networking that is running [Tanzu Application Platform](https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/index.html) (TAP), you see an error `Failed to create pod sandbox` and no resources are created in the cluster's `nsx-system` namespace.

**Explanation**

The total number of Kubernetes object labels and other tags created by both <%= vars.k8s_runtime_abbr %> and TAP can exceed the number that is allowed by NSX.

**Workaround**

Create or update your network profile as described in [Creating and Managing Network Profiles (NSX Only)](network-profiles-define.md), setting the `cni_configurations` parameter `extensions.ncp.k8s.label_filtering_regex_list` as described under [label_filtering Settings](network-profiles-define.md#label-filtering).

<hr>

#### <a id="1-17-0-no-pool"></a> Error Scaling Clusters when Compute Profile Lacks Node Pool

**Symptom**

When you scale up a cluster by passing `--num-nodes` to `tkgi cluster-upgrade` you see the error `An error occurred in the PKS API`.

The pks-api.log includes: `Request processing failed; nested exception is java.lang.NullPointerException`, which triggers within the nested `ClusterService` methods `extractCustomizationNodePoolNames` < `validateComputeProfileUuidAndKubernetesWorkerInstances` < `updateCluster`.

**Explanation**

The cluster's Compute Profile lacks a node-pool specification, and
setting `--num-nodes` for cluster updating does not work when the
Compute Profile does not specify a node pool.

**Workaround**

Create and apply a new compute profile that specifies a node pool:

1. Create a new JSON compute profile definition that defines a node pool with a worker node instance count. For example, this code defines a compute profile `cp-1` with target instance count `16`:

  ```
    cat cp-1.json
    {
      "name": "cp-1",
      "description": "compute profile 1",
      "parameters": {
        "cluster_customization": {
          "control_plane": {
            "cpu": 2,
            "memory_in_mb": 8192,
            "persistent_disk_in_mb": 28240,
            "ephemeral_disk_in_mb": 28240,
            "instances": 3
          },
          "node_pools": [
            {
              "name": "pool-1",
              "description": "node pool 1",
              "instances": 16
            }
          ]
        }
      }
    }
  ```

1. Apply the new compute profile to the cluster:

  ```
  tkgi update-cluster my-cluster --compute-profile cp-1.json
  ```

  When you apply the new profile, the worker nodes migrate from instance group `worker` to the new instance group, `worker-pool-1`. If the instance count exceeds the number specified in plan, <%= vars.k8s_runtime_abbr %> adds instances to the new group before updating existing instances.

After the new node pool is created, you can scale the cluster by running:

  ```
  tkgi update-cluster cluster-1 --node-pool-instances "POOL:COUNT"
  ```

  Where `POOL` is the node pool name and `COUNT` is its instance count.


<hr>

#### <a id="1-17-0-scale-update"></a> Wrong Node Scale after Updating Cluster with New Compute Profile

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.5](#1-17-5-bug-fixes).

**Symptom**

For clusters created with or assigned a compute profile as described in [Using Compute Profiles](compute-profiles-use.html), scaling the cluster by updating its compute profile and then performing additional cluster update operations may leave the cluster with the wrong node count.

For example, after the following steps, the cluster may have a node count of 12 instead of 18 in its updated node pool:

1. Create cluster `my-cluster` with a compute profile `cp-1` that defines a node pool `pool-1` with 6 nodes.
1. Scale the cluster to 12 nodes by running `tkgi update-cluster my-cluster --node-pool-instances "pool-1:12"`.
1. Create a new compute profile `cp-2` that sets the `pool-1` node pool to 18 nodes.
1. Update the cluster with the profile `cp-2` by running `tkgi update-cluster my-cluster --compute-profile cp-2`.
1. Rotate the cluster's certificates or perform other `tkgi update-cluster` operations.

After the last step, the cluster pool's node count may erroneously revert to 12.

**Workaround**

After you update a cluster with a new compute profile that changes node counts, run `tkgi update-cluster CLUSTER-NAME  --node-pool-instances "NODEPOOL-NAME:NODE-COUNT"` where `NODE-COUNT` is the new node count.

With the example above, after Step 3 run `tkgi update-cluster my-cluster --node-pool-instances "pool-1:18"`.

<hr>

#### <a id="1-17-0-interoperability-with-tmc"></a> Interoperability with Tanzu Mission Control is Unavailable

This issue is fixed by using the [July 21, 2023](https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/rn/vmware-tanzu-mission-control-release-notes/index.html#What's%20New%20July%2021,%202023) or later releases of Tanzu Mission Control.  

Tanzu Mission Control (TMC) is not compatible with Kubernetes v1.26 at the time of the <%= vars.k8s_runtime_abbr %> v1.17 release and temporarily cannot manage <%= vars.k8s_runtime_abbr %> v1.17 Kubernetes clusters. 
Interoperability between TMC and <%= vars.k8s_runtime_abbr %> v1.17 is expected at a later time.  

Refer to the [VMware Tanzu Mission Control Release Notes](https://docs.vmware.com/en/VMware-Tanzu-Mission-Control/services/rn/vmware-tanzu-mission-control-release-notes/index.html) for an announcement of compatibility with Kubernetes v1.26.  
    
<hr>
<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-17-0-vcf-incompatible"></a> Interoperability with VMware Cloud Foundation Is Unavailable

This issue is fixed by using VMware Cloud Foundation v5.0 or later.  

Interoperability with VMware Cloud Foundation (VCF) is temporarily unavailable.  

VCF is currently not compatible with <%= vars.k8s_runtime_abbr %> v1.17. 
Interoperability between VCF and <%= vars.k8s_runtime_abbr %> v1.17 is expected at a later time.  
    
<hr>

<% end %>

#### <a id="1-17-0-vrops"></a> Interoperability with VMware Aria Operations Management Pack for Kubernetes Is Unavailable

**This issue has been resolved:** VMware Aria Operations Management Pack for Kubernetes v2.0 provides interoperability with <%= vars.k8s_runtime_abbr %> v1.17. 

For more information, see the [VMware Aria Operations for Integrations Release Notes](https://docs.vmware.com/en/VMware-Aria-Operations-for-Integrations/services/rn/vmware-aria-operations-for-integrations-release-notes/index.html#August%2010,%202023).  

**Description**

Interoperability with VMware Aria Operations Management Pack for Kubernetes is temporarily unavailable.  

VMware Aria Operations Management Pack for Kubernetes is currently not compatible with <%= vars.k8s_runtime_abbr %> v1.17. 
Interoperability between VMware Aria Operations Management Pack for Kubernetes and <%= vars.k8s_runtime_abbr %> v1.17 is expected at a later time.  

<hr>

#### <a id="1-17-0-lose-adv-settings"></a> Updating cluster compute profile loses node drain and shutdown settings

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.5](#management-console-1-17-5-features).

**Symptom**

In the management console, when you update a Linux cluster that is created with a compute profile as described in [Update Cluster Configuration](console-create-clusters.md#update-clusters), the **Advanced Settings** panel shows and applies incorrect defaults for node drain and pod shutdown grace period settings.

**Workaround**

Under **Update Cluster**, before you change the **Compute Profile** setting, click **Show More** to open the **Advanced Settings**. Record the current settings, and set them back if selecting a compute profile changes those settings.

Default settings are:

  - Node Train Timeout: 0
  - Pod Shutdown Grace Period: 10
  - Enabled: Force drain if externally-managed pods
  - Enabled: Force drain if DaemonSet-managed pods
  - Enabled: Force drain if pods using emptyDir
  - Disabled: Force drain if pods running after timeout{panel}

<hr>

#### <a id="1-17-0-renamed-ops-man"></a> TKGI MC Unable to Manage TKGI after Restoring the TKGI Control Plane from Backup

**Symptom**

After you restore Ops Manager and the <%= vars.control_plane %> VM from backup,
<%= vars.k8s_runtime_abbr %> functions normally, but your <%= vars.k8s_runtime_abbr %> MC tabs
include the following error: "...product 'pivotal-container service' is not deployed...".

**Explanation**

<%= vars.k8s_runtime_abbr %> MC is associated with an Ops Manager with a specific name.
If you rename Ops Manager with a new name while restoring, your <%= vars.k8s_runtime_abbr %> MC
will not recognize the restored Ops Manager and cannot manage it.

<hr>

#### <a id="1-17-0-backslash-username"></a> vSphere CSI Failure When Backslash in User Name

**Symptom**

When installing or upgrading <%= vars.k8s_runtime_abbr %> with vSphere Container Storage Plug-in (CSI) enabled, CSI pods fail with the error `ErrImageNeverPull` and cluster logs show the error `unknown escape sequence`.

**Explanation**

The CSI driver cannot correctly parse the vCenter username configuration setting if it contains a backslash  (`\`) character.

**Workaround**

When entering a vCenter user name in the <%= vars.k8s_runtime_abbr %> Configuration Wizard or Ops Manager tile, use the format `user@domainname`, for example: "_user@example.com_". It cannot contain a backslash (`\`) character.

<hr>

#### <a id="1-17-0-azure-apply-changes"></a> Error: Could Not Execute "Apply-Changes" in Azure Environment

**Symptom**

After clicking **Apply Changes** on the <%= vars.k8s_runtime_abbr %> tile in an Azure environment,
you experience an error '_...could not execute "apply-changes"..._' with either of the following descriptions:

* _{"errors":{"base":["undefined method 'location' for nil:NilClass"]}}_
* _FailedError.new("Resource Groups in region '#{location}' do not support Availability Zones"))_

For example:

```
INFO | 2020-09-21 03:46:49 +0000 | Vessel::Workflows::Installer#run | Install product (apply changes)
2020/09/21 03:47:02 could not execute "apply-changes": installation failed to trigger: request failed: unexpected response from /api/v0/installations:
HTTP/1.1 500 Internal Server Error
Transfer-Encoding: chunked
Cache-Control: no-cache, no-store
Connection: keep-alive
Content-Type: application/json; charset=utf-8
Date: Mon, 21 Sep 2020 17:51:50 GMT
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Pragma: no-cache
Referrer-Policy: strict-origin-when-cross-origin
Server: Ops Manager
Strict-Transport-Security: max-age=31536000; includeSubDomains
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Frame-Options: SAMEORIGIN
X-Permitted-Cross-Domain-Policies: none
X-Request-Id: f5fc99c1-21a7-45c3-7f39
X-Runtime: 9.905591
X-Xss-Protection: 1; mode=block

44
{"errors":{"base":["undefined method `location' for nil:NilClass"]}}
0
```

**Explanation**

The Azure CPI endpoint used by Ops Manager has been changed and
your installed version of Ops Manager is not compatible with the new endpoint.

**Workaround**

Run the following Ops Manager CLI command:

```
om --skip-ssl-validation --username USERNAME --password PASSWORD --target https://OPSMAN-API curl --silent --path /api/v0/staged/director/verifiers/install_time/IaasConfigurationVerifier -x PUT -d '{ "enabled": false }'
```

Where:

* `USERNAME` is the account to use to run Ops Manager API commands.
* `PASSWORD` is the password for the account.
* `OPSMAN-API` is the IP address for the Ops Manager API

For more information, see
[Error 'undefined method location' is received when running Apply Change on Azure](https://knowledge.broadcom.com/external/article/293679/undefined-method-location-error-received.html) in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-17-0-vrops-windows-clusters"></a> VMware vRealize Operations Does Not Support Windows Worker-Based Kubernetes Clusters

VMware vRealize Operations (vROPs) does not support Windows worker-based Kubernetes clusters and
cannot be used to manage <%= vars.k8s_runtime_abbr %>-provisioned Windows workers.

<hr>

#### <a id="1-17-0-wavefront-no-win"></a><%= vars.k8s_runtime_abbr %> Wavefront Requires Manual Installation for Windows Workers

To monitor Windows-based worker node clusters with a Wavefront collector and proxy, you must first install Wavefront on the clusters manually, using Helm.
For instructions, see the [Wavefront](windows-monitoring.html#wavefront) section of the
_Monitoring Windows Worker Clusters and Nodes_ topic.

<hr>
#### <a id="1-17-0-ping"></a>Pinging Windows Worker Kubernetes Clusters Does Not Work

<%= vars.k8s_runtime_abbr %>-provisioned Windows worker-based Kubernetes clusters inherit a Kubernetes limitation that prevents outbound ICMP communication from workers.
As a result, pinging Windows workers does not work.

For information about this limitation, see [Limitations > Networking](https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#networking-1) in the _Windows in Kubernetes_ documentation.

<hr>

#### <a id="1-17-0-windows-velero-limitations"></a> Velero Does Not Support Backing Up Stateful Windows Workloads

You can use Velero to back up stateless <%= vars.k8s_runtime_abbr %>-provisioned Windows workers only.
You cannot use Velero to back up stateful Windows applications.
For more information, see [Velero on Windows](https://velero.io/docs/v1.6/basic-install/#velero-on-windows) in
_Basic Install_ in the Velero documentation.

<hr>

#### <a id="1-17-0-tmc-on-gcp"></a>Tanzu Mission Control Integration Not Supported on GCP

<%= vars.k8s_runtime_abbr %> on Google Cloud Platform (GCP) does not support
Tanzu Mission Control (TMC) integration, which is configured in
the **<%= vars.product_tile %>** tile > the **Tanzu Mission Control** pane.

If you intend to run <%= vars.k8s_runtime_abbr %> on GCP,
skip this pane when configuring the <%= vars.product_tile %> tile.

<hr>

#### <a id="1-17-0-tmc-restic"></a>TMC Data Protection Feature Requires Privileged <%= vars.k8s_runtime_abbr %> Containers

TMC Data Protection feature supports privileged <%= vars.k8s_runtime_abbr %> containers only.
For more information, see [Plans](installing-vsphere.html#plans) in the _Installing TKGI_ topic for your IaaS.

<hr>

#### <a id="1-17-0-profile-no-win-gmsa"></a>Windows Worker Kubernetes Clusters with Group Managed Service Account Do Not Support Compute Profiles

Windows worker-based Kubernetes clusters integrated with group Managed Service Account (gMSA) cannot be managed using compute profiles.

<hr>

#### <a id="1-17-0-profile-no-win-flannel"></a> Windows Worker Kubernetes Clusters on Flannel Do Not Support Compute Profiles

On vSphere with NSX-T networking you can use compute profiles with both Linux and Windows worker&#8209;based Kubernetes clusters.
On vSphere with Flannel networking, you can apply compute profiles only to Linux clusters.

<hr>

#### <a id="1-17-0-profile-resize-down"></a>TKGI CLI Does Not Prevent Reducing the Control Plane Node Count

TKGI CLI does not prevent accidentally reducing a cluster's control plane node count using a compute profile.

<p class="note warning"><strong>Warning:</strong>
    Reducing a cluster's control plane node count can destroy the cluster.
    Do not scale out or scale in existing control plane nodes by reconfiguring the TKGI tile or by using a compute profile.
    Reducing a cluster's number of control plane nodes might remove a control plane node and cause the cluster to become inactive.
</p>

<hr>

#### <a id="1-17-0-in-windows-notready-nodes"></a> Windows Cluster Nodes Not Deleted After VM Deleted

**Symptom**

After you delete a VM using the management console of your infrastructure provider, you notice a Windows worker node
that had been on that VM is now in a `notReady` state.

**Solution**

1. To identify the leftover node:

    ```
    kubectl get no -o wide
    ```
1. Locate nodes on the returned list that are in a `notReady` state and have the same IP address as another node in the list.
1. To manually delete a `notReady` node:

    ```
    kubectl delete node NODE-NAME
    ```
    Where `NODE-NAME` is the name of the node in the `notReady` state.

<hr>

#### <a id="1-17-0-oidc-response-header"></a>502 Bad Gateway After OIDC Login

**Symptom**

You experience a "502 Bad Gateway" error from the NSX load balancer after you log in to OIDC.

**Explanation**

A large response header has exceeded your NSX-T load balancer maximum response header size.
The default maximum response header size is 10,240 characters and should be resized to 16,384.

**Workaround**

If you experience this issue, manually reconfigure your NSX-T `request_header_size` to `4096` characters and your `response_header_size` to `16384`.
For information about configuring NSX default header sizes, see [OIDC Response Header Overflow](https://knowledge.broadcom.com/external/article/297308/oidc-response-header-overflow-in-tanzu-k.html) in the Knowledge Base.

<hr>

#### <a id="1-17-0-windows-proxy"></a> Difficulty Changing Proxy for Windows Workers

You must configure a global proxy in the <%= vars.product_tile %> tile > **Networking** pane before you create any Windows workers that use the proxy.

You cannot change the proxy configuration for Windows workers in an existing cluster.

<hr>

#### <a id="1-17-0-http-proxy-password"></a> Character Limitations in HTTP Proxy Password

For vSphere with NSX-T, the HTTP Proxy password field does not support the following special characters: `&` or `;`.

<hr>

#### <a id="1-17-0-harbor-storage-config"></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>

#### <a id="1-17-0-resizing-worker-nodes"></a> Ingress Controller Statefulset Fails to Start After Resizing Worker Nodes

**Symptom**

Permissions are removed from your cluster's files and processes after resizing the persistent disk
during a cluster upgrade. The ingress controller statefulset fails to start.

**Explanation**

When resizing a persistent disk, Bosh migrates the data from the old disk to the new disk but
does not copy the files' extended attributes.

**Workaround**

To resolve the problem, complete the steps in
[Ingress controller statefulset fails to start after resize of worker nodes with permission denied]
(https://knowledge.broadcom.com/external/article/298618/ingress-controller-statefulset-fails-to.html?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-17-0-security-group"></a>Azure Default Security Group Is Not Automatically Assigned to Cluster VMs

**Symptom**

You experience issues when configuring a load balancer for a multi-control plane node Kubernetes cluster or creating a service of type `LoadBalancer`.
Additionally, in the Azure portal, the **VM** > **Networking** page does not display
any inbound and outbound traffic rules for your cluster VMs.

**Explanation**

As part of configuring the <%= vars.product_tile %> tile for Azure, you enter **Default Security Group** in the **Kubernetes Cloud Provider** pane.
When you create a Kubernetes cluster, <%= vars.product_short %> automatically assigns this security group to each VM in the cluster.
However, on Azure the automatic assignment might not occur.

As a result, your inbound and outbound traffic rules defined in the security group are not applied to the cluster VMs.

**Workaround**

If you experience this issue, manually assign the default security group to each VM NIC in your cluster.

<hr>

#### <a id="1-17-0-uuid-length"></a> One Plan ID Longer than Other Plan IDs

**Symptom**

One of your plan IDs is one character longer than your other plan IDs.

**Explanation**

In <%= vars.k8s_runtime_abbr %>, each plan has a unique plan ID.
A plan ID is normally a UUID consisting of 32 alphanumeric characters and 4 hyphens.
However, the **Plan 4** ID consists of 33 alphanumeric characters and 4 hyphens.

**Solution**

You can safely configure and use **Plan 4**.
The length of the **Plan 4** ID does not affect the functionality of **Plan 4** clusters.

If you require all plan IDs to have identical length, do not activate or use **Plan 4**.

<hr>

#### <a id="1-17-0-db-down-after-vm-stopped"></a> Database Cluster Stops After a Database Instance is Stopped

**Symptom**

After you stop one instance in a multiple-instance database cluster, the cluster stops,
or communication between the remaining databases times out, and the entire cluster becomes unreachable.

The following might be in your UAA log:

```
WSREP has not yet prepared node for application use
```

**Explanation**

The database cluster is unable to recover automatically because a member is no longer available to reconcile quorum.

<hr>

#### <a id="1-17-0-velero-vsphere-pvs"></a> Velero Back Up Fails for vSphere PVs Attached to Clusters on Kubernetes v1.20 and Later

**Symptom**

Backing up vSphere persistent volumes using Velero fails and your Velero backup log includes the following error:

```
rpc error: code = Unknown desc = Failed during IsObjectBlocked check: Could not translate selfLink to CRD name
```

**Explanation**

This is a known issue when backing up clusters on Kubernetes v1.20 and later using the
Velero Plugin for vSphere v1.1.0 or earlier.

**Workaround**

To resolve the problem, complete the steps in
[Velero backups of vSphere persistent volumes fail on Kubernetes clusters version 1.20 or higher (83314)](https://knowledge.broadcom.com/external/article?legacyId=83314)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-17-0-creating-two-windows-clusters-fails"></a> Creating Two Windows Clusters at the Same Time Fails

**Symptom**

The first time that you try to create two Windows clusters at the same time, the creation of one of
the clusters fails. If you run `pks cluster CLUSTER-NAME` to examine the last action taken on the
cluster, you see the following:

<pre class="terminal">
Last Action: Create
Last Action State: failed
Last Action Description: Instance provisioning failed: There was a problem completing your request.
. . .
operation: create, error-message: Failed to acquire lock
. . .
locking task id is 111, description: 'create deployment'
</pre>

**Explanation**

This is a known issue that occurs the first time that you create two Windows clusters concurrently.

**Workaround**

Recreate the failed cluster. This issue only occurs the first time that you create two Windows
clusters concurrently.


<hr>

#### <a id="1-17-0-delete-cluster-not-stopped"></a> Deleted Clusters are Listed in Cluster Lists

**Symptom**

After running `tkgi delete-cluster` and cluster deletion has completed,
the deleted cluster continues to be listed when running `tkgi clusters`.

**Workaround**

You must manually remove the deleted cluster using a customized version of the ncp_cleanup script.
For more information, see
[Deleting a Tanzu Kubernetes Grid Integrated Edition cluster with "tkgi delete-cluster" stuck "in progress" status](https://knowledge.broadcom.com/external/article/298683/deleting-a-tanzu-kubernetes-grid-integra.html?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-17-0-errors-after-reinstall"></a> BOSH Director Logs the Error 'Duplicate vm extension name'

**Symptom**

After you uninstall <%= vars.k8s_runtime_abbr %>, then reinstall <%= vars.k8s_runtime_abbr %> in the same environment,
BOSH Director logs errors similar to the following:

```
.../gems/bosh-director-0.0.0/lib/bosh/director/deployment_plan/cloud_manifest_parser.rb:120:in `parse_vm_extensions': Duplicate vm extension name 'disk_enable_uuid' (Bosh::Director::DeploymentDuplicateVmExtensionName)
```

**Explanation**

The `pivotal-container-service` cloud-config was not removed when you uninstalled the <%= vars.k8s_runtime_abbr %> tile,
and it remained active.
When you reinstalled the <%= vars.k8s_runtime_abbr %> tile, an additional `pivotal-container-service` cloud-config was created,
causing the metrics_server to fall into a crash-loop state.

**Workaround**

You must manually remove the `pivotal-container-service` cloud-config after removing your <%= vars.k8s_runtime_abbr %> deployment,
including after removing the <%= vars.k8s_runtime_abbr %> tile from Ops Manager.

For more information, see ["Duplicate vm extension name" error when metrics_server runs on Director VM in Tanzu Kubernetes Grid Integrated Edition](https://knowledge.broadcom.com/external/article/298692/duplicate-vm-extension-name-error-when-m.html?language=en_US)
in the VMware Tanzu Community Knowledge Base.

<hr>

#### <a id="1-17-0-whitespace-pksapi"></a> The <%= vars.control_plane %> FQDN Must Not Include Trailing Whitespace

**Symptom**

Your <%= vars.k8s_runtime_abbr %> logs include the following error:

```
'uaa'. Errors are:- Error filling in template 'uaa.yml.erb' (line 59: Client redirect-uri is invalid: uaa.clients.pks_cli.redirect-uri Client redirect-uri is invalid: uaa.clients.pks_cluster_client.redirect-uri)
```

**Explanation**

The <%= vars.control_plane %> fully-qualified domain name (FQDN) for your cluster contains leading or trailing whitespace.

**Workaround**

Do not include whitespace in the <%= vars.k8s_runtime_abbr %> tile **API Hostname (FQDN)** field.

<hr>

#### <a id="1-17-0-cannot-backup-with-tmc"></a> TMC Cluster Data Protection Backup Fails After Upgrading <%= vars.k8s_runtime_abbr %>

The TMC Cluster Data Protection Backup fails in <%= vars.k8s_runtime_abbr %> environments upgraded from an earlier version.

**Symptom**

The TMC Cluster Data Protection Backup fails to back up your existing clusters and logs the following error:

```
error executing custom action (groupResource=customresourcedefinitions.apiextensions.k8s.io, namespace=, name=ncpconfigs.nsx.vmware.com): rpc error: code = Unknown desc = error fetching v1beta1 version of ncpconfigs.nsx.vmware.com: the server could not find the requested resource
```

**Explanation**

Kubernetes v1.22 disallows the `spec.preserveUnknownFields: true` configuration in your existing clusters and the creation of a v1 CustomResourceDefinitions configuration fails.

<hr>

#### <a id="1-17-0-cannot-restore-with-tmc"></a> TMC Cluster Data Protection Restore Fails When Using Antrea CNI

The TMC Cluster Data Protection Restore operation can fail when restoring multiple Antea resources.

**Symptom**

The TMC Cluster Data Protection Restore fails and logs errors that requests to restore the `admission webhook` have been denied.

**Explanation**

Velero has encountered a race condition while operating a resource.
For more information, see
[Allow customizing restore order for Kubernetes controllers and their managed resources](https://github.com/vmware-tanzu/velero/issues/4045)
in the Velero GitHub repository.

<hr>

#### <a id="1-17-0-cvds-with-nvds"></a> <%= vars.k8s_runtime_abbr %> Does Not Support CVDS / NVDS Mixed Environments

<%= vars.k8s_runtime_abbr %> does not support environments where there are multiple matching networks, such as a mixed CVDS/NVDS environment.

**Symptom**

<%= vars.k8s_runtime_abbr %> logs errors similar to the following in an environment with multiple matching networks:

```
LastOperationstatus='failed', description='Instance provisioning failed:
There was a problem completing your request. Please contact your operations team providing the following information:
service: p.pks, service-instance-guid: ..., broker-request-id: ..., task-id: ..., operation: create,
error-message: Unknown CPI error 'Unknown' with message 'undefined method `mob' for <VimSdk::Vim::OpaqueNetwork:' in create_vm' CPI method
```

**Explanation**

<%= vars.k8s_runtime_abbr %> cannot identify which of the matching networks you intend to use and has selected the wrong network.

<hr>

#### <a id="1-17-0-ovsdb-server-failure"></a> Occasionally update-cluster Does Not Complete for Windows Workers

Occasionally, `tkgi update-cluster` hangs while updating a Windows worker node instance and the BOSH task cannot finish and exits.

**Symptom**

The `ovsdb-server` service has stopped but other processes report that it is running.

**Explanation**

The `ovsdb-server.pid` file uses the pid for a process that is not the ovsdb-server.

To confirm that this is the root cause for `tkgi update-cluster` to hang:

* To verify the `ovsdb-server` service has actually stopped, run the PowerShell `Get-services` command on the Windows worker node.
* To verify that other processes report the `ovsdb-server` service is still running:
<br>
    1. Review the ovsdb-server `job-service-wrapper.err.log` log file.
<br>
        The `job-service-wrapper.err.log` log file is located at:

        ```
        C:\var\vcap\sys\log\openvswitch-windows\ovsdb-server\job-service-wrapper.err.log
        ```
    1. Confirm that after the flushing processes, the log includes an error similar to the following:

        ```
        Pid-Guard : ovsdb-server is already runing, please stop it first
        At C:\var\vcap\jobs\openvswitch-windows\bin\ovsdb-server_ctl.ps1:30 char:5
        +     Pid-Guard $PIDFILE "ovsdb-server"
        +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            + CategoryInfo          : NotSpecified: ( [Write-Error], WriteErrorException
            + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException,Pid-Guard
        ```
* To verify the root cause:
<br>
    1. Run the following PowerShell commands on the Windows worker node:

        ```
        $RUN_DIR = "C:\var\vcap\sys\run\openvswitch-windows"
        $PIDFILE = "$RUN_DIR\ovsdb-server.pid"
        $pid1 = Get-Content $PidFile -First 1
        echo $pid1
        $rst = Get-Process -Id $pid1 -ErrorAction SilentlyContinue
        echo $rst
        ```
    1. Confirm the returned `ProcessName` is not `ovsdb-server`.

**Workaround**

To resolve this issue for a single Windows worker:

1. SSH to the affected worker node.
1. Run the following:

    ```
    rm C:\var\vcap\sys\run\openvswitch-windows\ovsdb-server.pid
    ```
1. Wait for the `ovsdb-server` process to start.
1. Confirm the dependent services also start.


<hr>

#### <a id="1-17-0-harbor-241"></a> Harbor Private Projects Are Inaccessible after Upgrading to <%= vars.k8s_runtime_abbr %> v1.13.0

If LDAP is enabled, Harbor private projects are inaccessible after upgrading to <%= vars.k8s_runtime_abbr %> v1.13.0.
For more information, see [Private projects become inaccessible after upgrading Harbor for TKGI to v2.4.x with LDAP feature enabled](https://knowledge.broadcom.com/external/article/298714/private-projects-become-inaccessible-aft.html?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-17-0-stemcell-tar-support"></a> Deployments Fail on <%= vars.k8s_runtime_abbr %> Windows Worker-based Kubernetes Clusters after the January 2022 Microsoft Windows Security Patch

Microsoft changed Microsoft Windows' support for tar file commands in the January 2022 Microsoft Windows security patch.

Packaging scripts that use tar commands for Windows worker-based Kubernetes Cluster deployments
can fail after the Microsoft tar command patch update has been applied.

The BOSH agent used by vSphere stemcells built by stembuild v2019.43 and earlier use tar commands that are no longer supported
and will fail if the Microsoft Windows security patch has been applied.


**Workaround**

stembuild v2019.44 and later include a version of the BOSH agent that does not use unsupported tar commands.

If you use vSphere stemcells, use stembuild 2019.44 or later to avoid the BOSH agent tar error.


<hr>


#### <a id="1-17-0-nsx-upgrade-w-policy-resources"></a> <%= vars.k8s_runtime_abbr %> Clusters Fail after NSX Upgrade If They Use NSGroup Policy API Resources

<%= vars.k8s_runtime_abbr %> supports clusters that use NSGroup Policy API resources, but Policy API NSGroups created in one NSX version will be empty after upgrading NSX to a newer version.  

**Workaround**  

BOSH reconfigures a deployment's NSGroup members if the deployment is redeployed.  

After upgrading NSX, redeploy affected deployments to reconfigure their NSGroup members:  

1. Re-**Apply Changes** on the Ops Manager UI to redeploy <%= vars.k8s_runtime_abbr %> tile deployments.  
1. Re-deploy the affected cluster deployments.  

<hr>

#### <a id="1-17-0-api-server-token-leak"></a> API Server Audit Logs Leak Tokens

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.0](#1-17-0-bug-fixes).  

The API Server audit logs include clear-text tokens on clusters master nodes that use the default audit policy.  

**Description**  

JSON Web Tokens in the `tokenrequests` API body are being written to the API Server audit log `/var/vcap/sys/log/kube-apiserver/audit/log` on <%= vars.k8s_runtime_abbr %> clusters.  

<hr>

#### <a id="1-17-0-antrea-engress"></a> <%= vars.k8s_runtime_abbr %> Does Not Support the Antrea Egress Feature on AWS

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.2](#1-17-2-bug-fixes).  

In AWS environments, <%= vars.k8s_runtime_abbr %> does not support the Antrea CNI [`Egress`](https://antrea.io/docs/v1.13.0/docs/egress/) feature. 
For example, the `Egress` resource`egressIP` and `externalIPPool` fields in an `antrea-config` configuration are ignored for clusters on AWS, including both single-AZ and multiple-AZ clusters. 
For more information about the Antra `Egress`feature, see [What is Egress](https://antrea.io/docs/v1.13.0/docs/egress/#what-is-egress) 
in the Antrea documentation.  

<p class='note'><strong>Note:</strong> You must grant the AWS Worker Instance Profile 
additional AWS Identity and Access Management (IAM) permissions before using 
the Antrea Egress feature with worker nodes on AWS. For more information, see 
<a href="troubleshoot-issues.html#antrea-egress-aws">Prepare AWS Worker Instance Profile Permissions</a>
in <em>General Troubleshooting</em>.
</p>
    
<hr>


#### <a id="1-17-0-missing-cluster-name-tag"></a> Cluster Might Fail to Send the `cluster_name` Tag to Logging after Cluster Upgrade

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.1](#1-17-1-bug-fixes).  

Occasionally, a cluster might fail to send the `cluster_name` tag to logging after being upgraded.  

**Description**  

After upgrading a cluster, the `Name record_modifier` filter will occasionally be missing from the cluster's fluent-bit ConfigMap, and the cluster_name is not included in log entries. This problem occurs if the sink-controller process configures the cluster before the observability-manager starts, which overwrites the desired configuration.  

<hr>

#### <a id="1-17-0-duplicate-cluster-tag"></a> Cluster Update Operations Fail Due to Duplicate Tag Keys

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.2](#1-17-2-bug-fixes).  

The cluster update operations fail if you reuse the same key in different tags in a cluster.

**Description**  

Tag keys must be unique within a cluster, for example, `key1:value1, key2:value2`. <%= vars.k8s_runtime_abbr %> does not prevent you from reusing the same key 
for multiple tags in a cluster, for example, `key1:value1, key1:value2`. However, the cluster update operations fail.

**Workaround**  

Use different keys for the tags within a cluster, for example, `key1:value1, key2:value2`. For more information, see [Tagging Rules](tag-clusters.html#tagging-rules).

<hr>

#### <a id="1-17-0-ignore-node-drain-timeout"></a> Node Drain Operation Ignores the <%= vars.k8s_runtime_abbr %> Deployment Plan Settings 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.2](#1-17-2-bug-fixes).  

When upgrading a cluster, the node drain operation ignores the pod shutdown grace period specified in the deployment plan on the 
<%= vars.k8s_runtime_abbr %> Tile.  

<hr>

#### <a id="1-17-0-pods-notready-from-dfw"></a> Pods on NSX v3.2.3 Can Enter a NotReady State

When <%= vars.k8s_runtime_abbr %> is deployed on NSX v3.2.3 and there are large numbers of pods with [liveness probes](https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-a-liveness-command), the pods on <%= vars.k8s_runtime_abbr %>-provisioned clusters can enter a `NotReady` state.

**Symptom**  

In addition to your pods being `NotReady`, if you restart NSX Manager:  

* Your NSX API logs include numerous repetitions of 
`"POST /nsxapi/api/v1/firewall/sections/.../rules?operation=insert_bottom HTTP/1.1" ...`.  
* Your NCP logs include errors similar to:  

    ```
    "nsx-container-ncp" subcomp="ncp" level="ERROR" security="True" errorCode="NCP00034"] nsx_ujo.ncp.nsx.manager.firewall_service Failed to create health check rule for port ...: Service cluster: 'https://nsx-manager.example.com' is unavailable. Please, check NSX setup and/or configuration.
    ``` 

**Description**  

As pods are created or deleted, DFW firewall rules are replicated for the pod's liveness probe. 
In NSX v3.2.3, the firewall rules are unintentionally duplicated during this replication. 
After numerous pod creation/deletion events, 
the compounded duplication creates a DFW firewall section large enough to create noticeable delays during pod operations and, eventually, a pod `NotReady` state.  

**Workaround**  

Upgrade NSX to a version that includes the fix, namely 3.2.4 or 4.1.1 or later.


<hr>

<br>
<br>
## <a id="management-console-1-17-0"></a> <%= vars.k8s_runtime_abbr %> Management Console <%= vars.product_version %>.0

**Release Date**: August 3, 2023

<%= vars.product_short %> Management Console provides an opinionated installation of <%= vars.k8s_runtime_abbr %>.  

<br>
### <a id="management-console-1-17-0-snapshot"></a>Product Snapshot  

<p class="note"><strong>Note</strong>: The component versions supported by <%= vars.k8s_runtime_abbr %> Management Console might differ from or be more limited than
    the versions supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=TKGI+CLI+%26+Tile&release=1.17.4&os=&servicePk=310195&language=EN" target="_blank">v1.17.0</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>August 3, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-17-0">v1.17.0</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v3.0.13&#42;</td>
        <td style="text-align: center;"><a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware%20Tanzu%20Operations%20Manager#/releases/1330404" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.26.5&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.26.md#changelog-since-v1264" target="_blank">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://support.broadcom.com/group/ecx/productfiles?subFamily=Tanzu+Kubernetes+Grid+Integrated+Edition+(TKGi)&displayGroup=VMware+Harbor+Registry&release=2.8.2&os=&servicePk=308657&language=EN" target="_blank">v2.8.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v282-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Ubuntu Jammy stemcell</td>
        <td>v1.179&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/Stemcells-for-VMware-Tanzu/services/release-notes/stemcells.html#jammy-1-179" target="_blank">Release Notes</a></td>
    </tr>
</table>

<a id="management-console-1-17-0-component-updates"></a>&#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-17-0-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.17.0 are from
<%= vars.k8s_runtime_abbr %> MC v1.16.2 and earlier <%= vars.k8s_runtime_abbr %> v1.16 patches.  

<br>
### <a id="management-console-1-17-0-breaking-changes"></a>Breaking Changes


<br>
### <a id="management-console-1-17-0-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> Management Console v1.17.0 includes the following features:  

* Upgrades the <%= vars.k8s_runtime_abbr %> MC database from MySQL v5.7 to MySQL v8. 
For information about the differences between MySQL v5.7 to MySQL v8, 
see [MySQL Server Version Reference](https://dev.mysql.com/doc/mysqld-version-reference/en/) in the MySQL documentation.  

* Prevents deploying multiple <%= vars.k8s_runtime_abbr %> instances on a vCenter Server. By using the <%= vars.k8s_runtime_abbr %> MC, you can now deploy only one instance of <%= vars.k8s_runtime_abbr %> on a vCenter Server.  

<br>
<%= vars.k8s_runtime_abbr %> Management Console v1.17.0 resolves the following issues:  

* Fixes [<%= vars.k8s_runtime_abbr %> MC Unable to Create a Network Profile Configured with Source IP Ingress Persistence](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#management-console-1-16-0-network-profile-ingress-persistence).  
* Fixes [Previous nsx-t-superuser-certificate Is Restored during <%= vars.k8s_runtime_abbr %> MC Upgrade](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.16/tkgi/GUID-release-notes.html#management-console-1-16-0-cert-roll-back).  

<br>
### <a id="management-console-1-17-0-deprecations"></a> Deprecations

The following <%= vars.k8s_runtime_abbr %> features have been deprecated 
or removed from <%= vars.k8s_runtime_abbr %> Management Console v1.17:

<br>
### <a id="management-console-1-17-0-known-issues"></a> Known Issues

The <%= vars.product_short %> Management Console v1.17.0 has the following known issues:

<hr>

#### <a id="management-console-1-17-0-om-vm-restart"></a> Cannot log in to the TKGI MC after restarting Ops Manager v3 VM from vSphere

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.17.4](#management-console-1-17-4-features).

**Symptom**

With TKGI deployed by the Management Console (MC), after you restart the Ops Manager v3 VM from vSphere, you cannot log in to the MC, and the MC can no longer communicate with Ops Manager.

**Workaround**

First, determine if the Ops Manager VM address changed when you restarted it.
If so, the following steps will restore its original IP address.

The MC deploys Ops Manager to the first IP in TKGI's Deployment CIDR range, following the Gateway address, as configured under **Network Resources** in the MC.
You can also retrieve the Deployment CIDR from the TKGI tile in Ops Manager, under **Networks** > **Subnets** > **CIDR** and **Gateway**. If the Gateway address ends in `1` and is the first in the CIDR, the Ops Manager address ends in `2`.

If the Ops Manager IP shown in vSphere is not the first IP in the Deployment CIDR range for TKGI, its address has changed.

If the Ops Manager VM address has changed, remove its `networkd` service and restart the VM so that its networking service picks up the correct, static IP from its OVF settings:

1. From vSphere, `ssh` in to the Ops Manager VM.
1. Run `sudo mv /usr/lib/systemd/system/*networkd* /root/`
1. Restart the Ops Manager VM from the vSphere, and check its IP address to see if it has changed back to the correct address, the first IP in the TKGI Deployment CIDR.
1. If the Ops Manager VM still does not have the correct IP address, continue with the following steps.
1. From vSphere, power off the Ops Manager VM.
1. Update the Ops Manager VM's network settings to specify a network that supports DHCP, and record its previous network settings.

  - You will need to `ssh` in to the Ops Manager VM again, so if it lacks a DHCP network adapter you need some other way to access it. For example: mount its disk to another VM, inject an Ubuntu user password, and then use the vSphere GUI to power on the Ops Manager VM and log in with the new password.

1. Power on the Ops Manager VM. It should have an IP address assigned by DHCP.
1. `ssh` to the Ops Manager VM.
1. Run `sudo mv /usr/lib/systemd/system/*networkd* /root/`
1. Power off the Ops Manager VM.
1. Update the VM's network settings again to revert to its previous network configuration.
1. Power on the Ops Manager VM again. It should now have the correct static IP.

<hr>

#### <a id="management-console-1-17-0-vrli-https"></a> vRealize Log Insight Integration Does Not Support HTTPS Connections

**Symptom**

The <%= vars.product_short %> Management Console integration to vRealize Log Insight does not support connections to the HTTPS port on the vRealize Log Insight server.

**Workaround**

1. Use SSH to log in to the <%= vars.product_short %> Management Console appliance VM.
1. Open the file `/lib/systemd/system/pks-loginsight.service` in a text editor.
1. Add `-e LOG_SERVER_ENABLE_SSL_VERIFY=false`.
1. Set `-e LOG_SERVER_USE_SSL=true`.

    The resulting file should look like the following example:

    ```
    ExecStart=/bin/docker run --privileged --restart=always --network=pks
    -v /var/log/journal:/var/log/journal
    --name=pks-loginsight
    -e TYPE=gear2-vm
    -e LOG_SERVER_HOST=${LOGINSIGHT_HOST}
    -e LOG_SERVER_PORT=${LOGINSIGHT_PORT}
    -e LOG_SERVER_ENABLE_SSL_VERIFY=false
    -e LOG_SERVER_USE_SSL=true
    -e LOG_SERVER_AGENT_ID=${LOGINSIGHT_ID}
    pksoctopus/vrli-journald:v07092019
    ```

1. Save the file and run `systemctl daemon-reload`.
1. To restart the vRealize Log Insight service, run `systemctl restart pks-loginsight.service`.

<%= vars.product_short %> Management Console can now send logs to the HTTPS port on the vRealize Log Insight server.

<hr>

#### <a id="management-console-1-17-0-vsphere-ha"></a> vSphere HA causes Management Console ovfenv Data Corruption

**Symptom**

If you enable vSphere HA on a cluster, if the TKGI Management Console appliance VM is running on a
host in that cluster, and if the host reboots, vSphere HA recreates a new TKGI Management Console
appliance VM on another host in the cluster. Due to an issue with vSphere HA, the `ovfenv` data for
the newly created appliance VM is corrupted and the new appliance VM does not boot up with the
correct network configuration.

**Workaround**

1. In the vSphere Client, right-click the appliance VM and select **Power** > **Shut Down Guest OS**.
1. Right-click the appliance again and select Edit Settings.
1. Select **VM Options** and click **OK**.
1. Verify under Recent Tasks that a `Reconfigure virtual machine` task has run on the appliance VM.
1. Power on the appliance VM.

<hr>

#### <a id="management-console-1-17-0-k8s-profile"></a> Base64 encoded file arguments are not decoded in Kubernetes profiles

**Symptom**

Some file arguments in Kubernetes profiles are base64 encoded. When the management console displays
the Kubernetes profile, some file arguments are not decoded.

**Workaround**

Run `echo "$content" | base64 --decode`

<hr>

#### <a id="management-console-1-17-0-network-profile"></a> Network profiles not immediately selectable

**Symptom**

If you create network profiles and then try to apply them in the Create Cluster page, the new
profiles are not available for selection.

**Workaround**

Log out of the management console and log back in again.

<hr>

#### <a id="management-console-1-17-0-cluster-summary"></a> Real-Time IP information not displayed for network profiles

**Symptom**

In the cluster summary page, only default IP pool, pod IP block, node IP block values are displayed,
rather than the real-time values from the associated network profile.

**Workaround**

None

<hr>
#### <a id="management-console-1-17-0-harbor-storage-config"></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>

#### <a id="management-console-1-17-0-re-import-windows-stemcell"></a> Windows Stemcells Must be Re-Imported After Upgrading Ops Manager

**Symptom**

After upgrading Ops Manager, your Management Console does not recognize a Windows stemcell imported
when using the prior version of Ops Manager.

**Workaround**

If your Management Console does not recognize a Windows stemcell after upgrading Ops Manager:

1. Re-import your previously imported Windows stemcell.
2. **Apply Changes** to <%= vars.k8s_runtime_abbr %> MC.

<hr>

#### <a id="management-console-1-17-0-cluster-group-name"></a> Your New Clusters Are Not Shown In Tanzu Mission Control

**Symptom**

After you create a cluster, Tanzu Mission Control does not include the cluster in cluster lists.
You have a "_Resource not found_" error similar to the following in your BOSH logs:

```
Cluster Name in TMC: cluster-1
Cluster Name Prefix: tkgi-my-prefix-
Group Name in TMC: my-prefix-clusters
Cluster Description in TMC: VMware Enterprise PKS Attaching cluster ''tkgi-my-prefix-cluster-1'' to TMC
Fetching token successful
request POST:/v1alpha1/clusters,
response 404 Not Found:{"error":"Resource not found - clustergroup(my-prefix-clusters)
org id(d859dc9f-g622-426d-8c91-939a9f13dea9)",
"code":5,"message":"Resource not found - clustergroup(my-prefix-clusters)
```

**Explanation**

The cluster group you assign a cluster to must be defined in Tanzu Mission Control
before you assign your cluster to the cluster group in the <%= vars.k8s_runtime_abbr %> Management Console.

**Workaround**

To resolve the problem, complete the steps in
[Attaching a Tanzu Kubernetes Grid Integrated (TKGI) cluster to Tanzu Mission Control (TMC) fails with "Resource not found - clustergroup(cluster-group-name)"](https://knowledge.broadcom.com/external/article/298672/attaching-a-tanzu-kubernetes-grid-integr.html)
in the VMware Tanzu Knowledge Base.

<hr>
