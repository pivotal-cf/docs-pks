---
title: Release Notes
owner: TKGI
topictype: releasenotes
---

This topic contains release notes for <%= vars.product_short %> (<%= vars.k8s_runtime_abbr %>) <%= vars.product_version %>. 


<br>
<br>
## <a id="1-15-6"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.6

**Release Date**: July 18, 2023

<br>
### <a id="1-15-6-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/">v1.15.6</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>July 18, 2023</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.18<br>Windows: v1.6.18</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.22</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.7.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.7/rn/vmware-vsphere-container-storage-plugin-27-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.6</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1264957">v2.7.2</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v272-7">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.14</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v12412">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.1.2</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.1/rn/vmware-nsx-container-plugin-401-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.74</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.11.0<br>Wavefront Proxy: v11.3</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.61 or later
</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-6-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.3.  
&#42;&#42;&#42; NSX Management Plane API to NSX Policy API Migration requires VMware NSX v4.0.1.1 or later.  

<br>
### <a id="1-15-6-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.6 are from 
<%= vars.k8s_runtime_abbr %> v1.15.5 and earlier <%= vars.k8s_runtime_abbr %> v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> v1.14.7 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  


<br>
### <a id="1-15-6-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.6 includes the following enhancements:  

<br>
#### <a id="1-15-6-compute-profile-enhancements"></a> Compute Profile Enhancements

<%= vars.k8s_runtime_abbr %> v1.16.2 includes the following compute profile enhancements:  

* Supports configuring compute profiles with a node pool description. 
For more information, see [`node_pools` Block](compute-profiles-manage.html#worker-nodes) in 
_Creating and Managing Compute Profiles with the CLI (vSphere)_.  
* Supports optionally skipping compute profile validation. For more information, 
see [Assign a Compute Profile](compute-profiles-use.html#update-profile-procedure) in _Using Compute Profiles (vSphere)_.  
* Prevents updating an existing compute profile with the following unsupported configuration changes:  
    * Changing the number of control plane nodes.  
    * Changing the node pool `name` property.  
    * Adding a new node pool while deleting an existing node pool.  
    
<% if vars.product_version == "COMMENTED"  %>
<br>
#### <a id="1-16-2-enhancements"></a>Additional Enhancements

<%= vars.k8s_runtime_abbr %> v1.16.2 includes the following additional enhancements:  
<% end %>

<br>
### <a id="1-15-6-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.6 resolves the following issues:

<% if vars.product_version == "TKGI v1.15.6"  %>
* **[Security Fix]** Component bumps fix the following:  
    * Upgrades cAdvisor:  
        * Fixes [CVE-2005-2541](https://nvd.nist.gov/vuln/detail/CVE-2005-2541), 
                [CVE-2021-3345](https://nvd.nist.gov/vuln/detail/CVE-2021-3345), 
                [CVE-2021-20231](https://nvd.nist.gov/vuln/detail/CVE-2021-20231), 
                [CVE-2021-20232](https://nvd.nist.gov/vuln/detail/CVE-2021-20232).  
<% end %>



<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

<br>
###<a id="1-15-6-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.15.5
are also in <%= vars.product_short %> v1.15.6.
See the <%= vars.k8s_runtime_abbr %> v1.15.5 [Known Issues](#1-15-5-known-issues) below.  
<% if vars.product_version == "COMMENTED"  %>
<%= vars.k8s_runtime_abbr %> v1.15.6 also has the following known issues:  

<% end %>


<br>
<br>
## <a id="management-console-1-15-6"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.6

**Release Date**: July 18, 2023

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<br>
### <a id="management-console-1-15-6-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1150&productId=1339">v1.15.6</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>July 18, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-6">v1.15.6</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.58</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Tanzu-Operations-Manager/2.10/vmware-tanzu-ops-manager/release-notes.html#v21056-1">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.14</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v12412">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1264957">v2.7.2</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v272-7">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.543</td>
    </tr>
</table>

<a id="management-console-1-15-6-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-15-6-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.6 are from 
<%= vars.k8s_runtime_abbr %> MC v1.15.5 and earlier <%= vars.k8s_runtime_abbr %> MC v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> MC v1.14.7 and earlier <%= vars.k8s_runtime_abbr %> MC v1.14 patches.  

<br>
### <a id="management-console-1-15-6-features"></a>Features and Resolved Issues

This release of the <%= vars.product_short %> Management Console does not include any new features or resolved issues.  

<% if vars.product_version == "COMMENTED"  %>
<%#
This release of the <  %= vars.product_short %  > Management Console includes no new features or resolved issues.      
This release of the TKGI Management Console includes no new features or resolved issues.
< %= vars.k8s_runtime_abbr % > Management Console v1.15.3 has the following features and enhancements:
< %= vars.k8s_runtime_abbr % > Management Console v1.15.3 has the following resolved issues:  
* Fixes [](#management-console-1-13-0-).  
 #%>
<% end %>


<br>
### <a id="management-console-1-15-6-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.15.5
are also in <%= vars.product_short %> Management Console v1.15.6. 
See the <%= vars.k8s_runtime_abbr %> Management Console v1.15.5 [Known Issues](#management-console-1-15-5-known-issues) below.  
<% if vars.product_version == "COMMENTED"  %>
The <%= vars.product_short %> Management Console v1.15.6 has the following known issues:  
<% end %>
<hr>
 
 
<br>
<br>
## <a id="1-15-5"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.5

**Release Date**: June 6, 2023

<br>
### <a id="1-15-5-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1260274">v1.15.5</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>June 6, 2023</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.18<br>Windows: v1.6.18</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.22&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.7.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.7/rn/vmware-vsphere-container-storage-plugin-27-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.6</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1264957">v2.7.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v272-7">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.14&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v12412">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.1.2</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.1/rn/vmware-nsx-container-plugin-401-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.74&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.11.0<br>Wavefront Proxy: v11.3</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1260274"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.61 or later&#42;
</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1260274"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-5-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.3.  
&#42;&#42;&#42; NSX Management Plane API to NSX Policy API Migration requires VMware NSX v4.0.1.1 or later.  

<br>
### <a id="1-15-5-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.5 are from 
<%= vars.k8s_runtime_abbr %> v1.15.4 and earlier <%= vars.k8s_runtime_abbr %> v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> v1.14.6 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  


<br>
### <a id="1-15-4-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.5 includes the following enhancements:  

* Supports resizing clusters that have not been upgraded to the current <%= vars.k8s_runtime_abbr %> control plane version. 
For more information, see [Tasks Supported Following a <%= vars.k8s_runtime_abbr %> Control Plane Upgrade](understanding-upgrades.html#control-plane-upgrades-supported-tasks) in _About <%= vars.k8s_runtime_abbr %> Upgrades_.   


<br>
### <a id="1-15-5-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.5 resolves the following issues:

* Fixes [Kubernetes API Server and etcd Daemon Occasionally Fail to Start During BBR Restore](#1-15-0-bbr-restore-etcd-failure).
* Fixes [The Validator Secret Certificate Is Not Rotated](#1-15-0-secrets-not-rotated).  
* Fixes [Rotated <%= vars.k8s_runtime_abbr %> Certificates Remain Listed as Expiring on the Ops Manager Certificates List](#1-15-0-rotated-certs-expiring-in-opsman).  

<% if vars.product_version == "TKGI v1.15.6"  %>
* **[Security Fix]** Component bumps fix the following:  
    * Upgrades cAdvisor:  
        * Fixes [CVE-2005-2541](https://nvd.nist.gov/vuln/detail/CVE-2005-2541), 
                [CVE-2021-3345](https://nvd.nist.gov/vuln/detail/CVE-2021-3345), 
                [CVE-2021-20231](https://nvd.nist.gov/vuln/detail/CVE-2021-20231), 
                [CVE-2021-20232](https://nvd.nist.gov/vuln/detail/CVE-2021-20232).  
<% end %>



<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

<br>
###<a id="1-15-5-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.15.4
are also in <%= vars.product_short %> v1.15.5.
See the <%= vars.k8s_runtime_abbr %> v1.15.4 [Known Issues](#1-15-4-known-issues) below.  
<% if vars.product_version == "COMMENTED"  %>
<%= vars.k8s_runtime_abbr %> v1.15.5 also has the following known issues:  

<% end %>

<br>
<br>
## <a id="management-console-1-15-5"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.5

**Release Date**: June 6, 2023

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<br>
### <a id="management-console-1-15-5-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1150&productId=1339">v1.15.5</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>June 6, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-5">v1.15.5</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.58&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Tanzu-Operations-Manager/2.10/vmware-tanzu-ops-manager/release-notes.html#v21056-1">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.14&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v12412">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1264957">v2.7.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v272-7">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.543&#42;</td>
    </tr>
</table>

<a id="management-console-1-15-5-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-15-5-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.5 are from 
<%= vars.k8s_runtime_abbr %> MC v1.15.4 and earlier <%= vars.k8s_runtime_abbr %> MC v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> MC v1.14.6 and earlier <%= vars.k8s_runtime_abbr %> MC v1.14 patches.  

<br>
### <a id="management-console-1-15-5-features"></a>Features and Resolved Issues

This release of the <%= vars.product_short %> Management Console does not include any new features or resolved issues.  

<% if vars.product_version == "COMMENTED"  %>
<%#
This release of the <  %= vars.product_short %  > Management Console includes no new features or resolved issues.      
This release of the TKGI Management Console includes no new features or resolved issues.
< %= vars.k8s_runtime_abbr % > Management Console v1.15.3 has the following features and enhancements:
< %= vars.k8s_runtime_abbr % > Management Console v1.15.3 has the following resolved issues:  
* Fixes [](#management-console-1-13-0-).  
 #%>
<% end %>


<br>
### <a id="management-console-1-15-5-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.15.4
are also in <%= vars.product_short %> Management Console v1.15.5. 
See the <%= vars.k8s_runtime_abbr %> Management Console v1.15.4 [Known Issues](#management-console-1-15-4-known-issues) below.  
<% if vars.product_version == "COMMENTED"  %>
The <%= vars.product_short %> Management Console v1.15.5 has the following known issues:  
<% end %>
<hr>
 

<br>
<br>
## <a id="1-15-4"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.4

**Release Date**: April 27, 2023

<br>
### <a id="1-15-4-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1286963">v1.15.4</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>April 27, 2023</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.18&#42;<br>Windows: v1.6.18&#42;</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.20&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.7.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.7/rn/vmware-vsphere-container-storage-plugin-27-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.6</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1264957">v2.7.1&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v271-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.12&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v12410">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.1.2</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.1/rn/vmware-nsx-container-plugin-401-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.69&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.11.0<br>Wavefront Proxy: v11.3</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1286963"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.58 or later&#42;
</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1286963"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-4-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.3.  
&#42;&#42;&#42; NSX Management Plane API to NSX Policy API Migration requires VMware NSX v4.0.1.1 or later.  

<br>
### <a id="1-15-4-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.4 are from 
<%= vars.k8s_runtime_abbr %> v1.15.3 and earlier <%= vars.k8s_runtime_abbr %> v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> v1.14.6 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  

<br>
### <a id="1-15-4-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.4 includes the following enhancements:

#### <a id="1-15-4-csi-enhancements"></a> vSphere CSI Driver Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.4 includes the following vSphere CSI Driver enhancements: 

* Supports the snapshot and restore feature for persistent volumes. For more information, see [Customize the Maximum Number of Volume Snapshots](vsphere-cns.md#customize-max-snapshot).


#### <a id="1-15-4-features-network-profiles"></a> Network Profiles Enhancements

Supports configuring additional NCP Network Profiles parameters:  

* `nsx_v3.cookie_name`, `nsx_v3.members_per_medium_lbs`, `nsx_v3.members_per_small_lbs`, `nsx_v3.natfirewallmatch`, 
`nsx_v3.ncp_enforced_pool_member_limit`, `nsx_v3.relax_scale_validation`  
 
For more information, see [cni_configurations Extensions Parameters](network-profiles-define.html#cni-extensions) 
in _Creating and Managing Network Profiles_.  

<br>
<%= vars.k8s_runtime_abbr %> v1.15.4 also includes the following minor enhancements:  

* Increases the length of the `insecure_registries` column to 4K characters.  
* Supports configuring the Fluent Bit memory limit. 

<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-2-csi-on-public-clouds"></a> Supports Public Cloud CSI Drivers

<%= vars.k8s_runtime_abbr %> v1.15.2 supports the AWS, Azure, and Google Cloud CSI Drivers.  

For more information on using a public cloud CSI Driver with <%= vars.k8s_runtime_abbr %> Kubernetes clusters, 
see [Limitations on Using a Public Cloud CSI Driver](#1-15-2-csi-driver-limits) below.  
<% end %>

<br>
### <a id="1-15-4-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.4 resolves the following issues:

* Fixes `NullPointerException` error when creating a Compute Profile configured with `instances: 0` and the `max_worker_instances` parameter.  

<% if vars.product_version == "TKGI v1.15.6"  %>
* **[Security Fix]** Component bumps fix the following:  
    * Upgrades cAdvisor:  
        * Fixes [CVE-2005-2541](https://nvd.nist.gov/vuln/detail/CVE-2005-2541), 
                [CVE-2021-3345](https://nvd.nist.gov/vuln/detail/CVE-2021-3345), 
                [CVE-2021-20231](https://nvd.nist.gov/vuln/detail/CVE-2021-20231), 
                [CVE-2021-20232](https://nvd.nist.gov/vuln/detail/CVE-2021-20232).  
<% end %>


<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

<br>
###<a id="1-15-4-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.15.3
are also in <%= vars.product_short %> v1.15.4.
See the <%= vars.k8s_runtime_abbr %> v1.15.3 [Known Issues](#1-15-3-known-issues) below.  

<%= vars.k8s_runtime_abbr %> v1.15.4 also has the following known issues:  

<hr>

#### <a id="1-15-4-delete-cluster-deprovision"></a> During Delete Cluster the PKS-API Deprovision Remains in In Progress State

On occasion, delete cluster does not exit the drain cluster task and the PKS-API deprovision remains in `In Progress` state. BOSH logging prevents the statefulset PersistentVolume from detaching during drain node.  

**Workaround**

To resume the BOSH task:  

1. In vCenter, manually detach the cluster's PersistentVolumeClaim.  
2. Stop the worker node's `pre-stop` process.   

<hr>

<br>
<br>
## <a id="management-console-1-15-4"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.4

**Release Date**: April 27, 2023

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<br>
### <a id="management-console-1-15-4-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1150&productId=1339">v1.15.4</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>April 27, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-4">v1.15.4</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.56&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Tanzu-Operations-Manager/2.10/vmware-tanzu-ops-manager/release-notes.html#v21056-1">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.12&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v12410">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1264957">v2.7.1&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v271-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.488&#42;</td>
    </tr>
</table>

<a id="management-console-1-15-4-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-15-4-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.4 are from 
<%= vars.k8s_runtime_abbr %> MC v1.15.3 and earlier <%= vars.k8s_runtime_abbr %> MC v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> MC v1.14.6 and earlier <%= vars.k8s_runtime_abbr %> MC v1.14 patches.  

<br>
### <a id="management-console-1-15-4-features"></a>Features

This release of the <%= vars.product_short %> Management Console includes the following enhancements:  

* Prevents deploying multiple <%= vars.k8s_runtime_abbr %> instances on a vCenter Server. By using the <%= vars.k8s_runtime_abbr %> MC, you can now deploy only one instance of <%= vars.k8s_runtime_abbr %> on a vCenter Server.  
<a id="1-15-4-disable-multi-deployments-vc"></a>

<br>
### <a id="management-console-1-15-4-bug-fixes"></a>Resolved Issues

This release of the <%= vars.product_short %> Management Console resolves the following issues:  

* Fixes [Previous nsx-t-superuser-certificate Is Restored during <%= vars.k8s_runtime_abbr %> MC Upgrade](#management-console-1-15-0-cert-roll-back).  


<% if vars.product_version == "COMMENTED"  %>
<%#
This release of the <  %= vars.product_short %  > Management Console includes no new features or resolved issues.      
This release of the TKGI Management Console includes no new features or resolved issues.
< %= vars.k8s_runtime_abbr % > Management Console v1.15.3 has the following features and enhancements:
< %= vars.k8s_runtime_abbr % > Management Console v1.15.3 has the following resolved issues:  
* Fixes [](#management-console-1-13-0-).  
 #%>
<% end %>


<br>
### <a id="management-console-1-15-4-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.15.3
are also in <%= vars.product_short %> Management Console v1.15.4. 
See the <%= vars.k8s_runtime_abbr %> Management Console v1.15.3 [Known Issues](#management-console-1-15-3-known-issues) below.  
<% if vars.product_version == "COMMENTED"  %>
The <%= vars.product_short %> Management Console v1.15.4 has the following known issues:  
<% end %>
<hr>

<br>
<br>
## <a id="1-15-3"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.3

**Release Date**: March 16, 2023


### <a id="1-15-3-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1260274">v1.15.3</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>March 16, 2023</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.6<br>Windows: v1.6.6</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.17&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.6.2</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.6/rn/vmware-vsphere-container-storage-plugin-26-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.6</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1236026">v2.7.0&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v270-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.10&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v1248">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.1.2&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.1/rn/vmware-nsx-container-plugin-401-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.64&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.11.0<br>Wavefront Proxy: v11.3</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1260274"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.55 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1260274"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-3-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.3.  
&#42;&#42;&#42; NSX Management Plane API to NSX Policy API Migration requires VMware NSX v4.0.1.1 or later.  

<br>
### <a id="1-15-3-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.3 are from 
<%= vars.k8s_runtime_abbr %> v1.15.2 and earlier <%= vars.k8s_runtime_abbr %> v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> v1.14.4 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  

<br>
### <a id="1-15-3-features"></a> Features and Enhancements

This release of the <%= vars.product_short %> includes no new features or resolved issues.


<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-2-features-network-profiles"></a> Network Profiles Enhancements

Supports configuring additional NCP Network Profiles parameters:  

* `nsx_v3.cookie_name`, `nsx_v3.members_per_medium_lbs`, `nsx_v3.members_per_small_lbs`, `nsx_v3.natfirewallmatch`, 
`nsx_v3.ncp_enforced_pool_member_limit`, `nsx_v3.relax_scale_validation`  
 
For more information, see [cni_configurations Extensions Parameters](network-profiles-define.html#cni-extensions) 
in _Creating and Managing Network Profiles_.  
<% end %>



<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-2-csi-on-public-clouds"></a> Supports Public Cloud CSI Drivers

<%= vars.k8s_runtime_abbr %> v1.15.2 supports the AWS, Azure, and Google Cloud CSI Drivers.  

For more information on using a public cloud CSI Driver with <%= vars.k8s_runtime_abbr %> Kubernetes clusters, 
see [Limitations on Using a Public Cloud CSI Driver](#1-15-2-csi-driver-limits) below.  
<% end %>


<br>
### <a id="1-15-3-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.3 resolves the following issues:  

* Component bumps fix the following Known Issues:  
    * NCP v4.0.1.2:  
        * Fixes Misconfigured Ingress Invalidates All Ingresses.  
* Fixes [CSI Driver Image Missing After High Disk Utilization](#1-15-0-csi-driver-missing).  
* Fixes [Telegraf In-Host Monitoring Does Not Collect kubelet Metrics](#1-15-0-kubelet-mtrics-not-collected).  
* Fixes [The 'kube-state-metrics' ClusterRole Is Deleted during Cluster Upgrade](#1-15-0-cluster-role-deleted).  
* Fixes ['Input not an X.509 certificate' When Applying Change on the <%= vars.k8s_runtime_abbr %> Tile](#1-15-0-cert-error-terminator).  
* Fixes [Updating and Upgrading a Cluster Can Timeout While Stopping containerd](#1-15-2-cluster-upgrade-error).  

<% if vars.product_version == "TKGI v1.15.4"  %>
* **[Security Fix]** Component bumps fix the following:  
    * Upgrades cAdvisor:  
        * Fixes [CVE-2005-2541](https://nvd.nist.gov/vuln/detail/CVE-2005-2541), 
                [CVE-2021-3345](https://nvd.nist.gov/vuln/detail/CVE-2021-3345), 
                [CVE-2021-20231](https://nvd.nist.gov/vuln/detail/CVE-2021-20231), 
                [CVE-2021-20232](https://nvd.nist.gov/vuln/detail/CVE-2021-20232).  
<% end %>

<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

<br>
###<a id="1-15-3-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.15.2
are also in <%= vars.product_short %> v1.15.3.
See the <%= vars.k8s_runtime_abbr %> v1.15.2 [Known Issues](#1-15-2-known-issues) below.  

<hr>

<br>
<br>
## <a id="management-console-1-15-3"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.3

**Release Date**: March 16, 2023

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<br>
### <a id="management-console-1-15-3-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1150&productId=1339">v1.15.3</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>March 16, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-3">v1.15.3</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.53</td>
        <td style="text-align: center;"><a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-53">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.10&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v1249">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1236026">v2.7.0&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v270-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.448&#42;</td>
    </tr>
</table>

<a id="management-console-1-15-3-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-15-3-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.3 are from 
<%= vars.k8s_runtime_abbr %> MC v1.15.2 and earlier <%= vars.k8s_runtime_abbr %> MC v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> MC v1.14.4 and earlier <%= vars.k8s_runtime_abbr %> MC v1.14 patches.  

<br>
### <a id="management-console-1-15-3-features"></a>Features and Resolved Issues

This release of the <%= vars.product_short %> Management Console includes no new features or resolved issues.  

<br>
### <a id="management-console-1-15-3-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.15.2 
are also in <%= vars.product_short %> Management Console v1.15.3. 
See the <%= vars.k8s_runtime_abbr %> Management Console v1.15.2 [Known Issues](#management-console-1-15-2-known-issues) below.  

<hr>

<br>
<br>
## <a id="1-15-2"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.2

**Release Date**: January 17, 2023

<br>
### <a id="1-15-2-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1238616">v1.15.2</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>January 17, 2023</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.6<br>Windows: v1.6.6</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.15&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.6.2</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.6/rn/vmware-vsphere-container-storage-plugin-26-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.6&#42;</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1202448">v2.6.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v262-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.9&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v1248">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.1.1&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.1/rn/vmware-nsx-container-plugin-401-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.62&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.11.0<br>Wavefront Proxy: v11.3</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1238616"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.55 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1238616"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-2-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.2.  
&#42;&#42;&#42; NSX Management Plane API to NSX Policy API Migration requires VMware NSX v4.0.1.1 or later.  

<br>
### <a id="1-15-2-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.2 are from 
<%= vars.k8s_runtime_abbr %> v1.15.1  and earlier <%= vars.k8s_runtime_abbr %> v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> v1.14.4 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  

<br>
### <a id="1-15-2-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.2 includes the following features and enhancements:

* Supports running the vROPs cAdvisor daemonset without Privileged permission. No longer requires that cAdvisor be run with Privileged permission.  
* Enables the VMware vSphere Container Storage Plug-in ability to suspend a specific datastore for volume provisioning using Cloud Native Storage Manager. 
For more information, 
see [VMware vSphere Container Storage Plug-in 2.5 Release Notes](https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.5/rn/vmware-vsphere-container-storage-plugin-25-release-notes/index.html).  
* Component bumps:  
    * Upgrades the `fluent-plugin-vmware-loginsight` Fluentd output plugin to [v1.3.1](https://rubygems.org/gems/fluent-plugin-vmware-loginsight/versions/1.3.1). 
    `fluent-plugin-vmware-loginsight` forwards logs to VMware Log Insight.  


<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-2-features-network-profiles"></a> Network Profiles Enhancements

Supports configuring additional NCP Network Profiles parameters:  

* `nsx_v3.cookie_name`, `nsx_v3.members_per_medium_lbs`, `nsx_v3.members_per_small_lbs`, `nsx_v3.natfirewallmatch`, 
`nsx_v3.ncp_enforced_pool_member_limit`, `nsx_v3.relax_scale_validation`  
 
For more information, see [cni_configurations Extensions Parameters](network-profiles-define.html#cni-extensions) 
in _Creating and Managing Network Profiles_.  
<% end %>



<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-2-csi-on-public-clouds"></a> Supports Public Cloud CSI Drivers

<%= vars.k8s_runtime_abbr %> v1.15.2 supports the AWS, Azure, and Google Cloud CSI Drivers.  

For more information on using a public cloud CSI Driver with <%= vars.k8s_runtime_abbr %> Kubernetes clusters, 
see [Limitations on Using a Public Cloud CSI Driver](#1-15-2-csi-driver-limits) below.  
<% end %>


<br>
### <a id="1-15-2-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.2 resolves the following issues:  

* Fixes [Windows Worker Nodes Are Unresponsive after Update-Cluster and Upgrade-Cluster](#1-15-0-upgrade-windows-failure).  
* Fixes MP2P Migration does not migrate a cluster's SSL Profile if the cluster's Network Profile is configured to use the default SSL Profile `nsx-default-client-ssl-profile`.  

<% if vars.product_version == "TKGI v1.15.3"  %>
* **[Security Fix]** Component bumps fix the following:
    * Upgrades cAdvisor to v1.39.x:
        * Fixes [CVE-2021-20232](https://nvd.nist.gov/vuln/detail/CVE-2021-20232), [CVE-2021-20231](https://nvd.nist.gov/vuln/detail/CVE-2021-20231), [CVE-2021-3345](https://nvd.nist.gov/vuln/detail/CVE-2021-3345), [CVE-2005-2541](https://nvd.nist.gov/vuln/detail/CVE-2005-2541).  
<% end %>

<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

<br>
###<a id="1-15-2-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.15.1
are also in <%= vars.product_short %> v1.15.2.
See the <%= vars.k8s_runtime_abbr %> v1.15.1 [Known Issues](#1-15-1-known-issues) below.  

<%= vars.k8s_runtime_abbr %> v1.15.2 also has the following known issues:  

<hr>

#### <a id="1-15-2-cluster-upgrade-error"></a> Updating and Upgrading a Cluster Can Timeout While Stopping containerd

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.3](#1-15-3-bug-fixes).  

Updating and upgrading a TKGI v1.15.2 cluster can fail while stopping Monitored Services because the job has timed out while stopping the `containerd` service.  

**Symptom**

Updating or upgrading a TKGI v1.15.2 cluster fails while stopping Monitored Services, logging errors similar to the following:  

```
Updating instance worker: worker/... (0) (canary)
L executing pre-stop: worker/... (0) (canary)
L executing drain: worker/... (0) (canary)
L stopping jobs: worker/... (0) (canary) 
                    L Error: Action Failed get_task: Task ... result: Stopping Monitored Services: Stopping services '[containerd]' errored
Error: Action Failed get_task: Task ... result: Stopping Monitored Services: Stopping services '[containerd]' erroredTask ... 
Finished 
```


**Explanation**  

The `containerd` job stops existing containerd containers while updating or upgrading a cluster. 
The `containerd` job has taken longer than 180 seconds to complete resulting in a timeout.  

**Workaround**  

Restart your cluster update or upgrade process. 
If needed, restart the update or upgrade process several times to modify all of the workers in your cluster.  

<hr>

<br>
<br>
## <a id="management-console-1-15-2"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.2

**Release Date**: January 17, 2023

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<br>
### <a id="management-console-1-15-2-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1150&productId=1339">v1.15.2</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>January 17, 2023</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-2">v1.15.2</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.52&#42;</td>
        <td style="text-align: center;"><a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-52">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.9&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v1248">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1202448">v2.6.2&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v262-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.376&#42;</td>
    </tr>
</table>

<a id="management-console-1-15-2-component-updates"></a> &#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-15-2-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.2 are from 
<%= vars.k8s_runtime_abbr %> MC v1.15.1 and earlier <%= vars.k8s_runtime_abbr %> MC v1.15 patches, and 
<%= vars.k8s_runtime_abbr %> MC v1.14.4 and earlier <%= vars.k8s_runtime_abbr %> MC v1.14 patches.  

<br>
### <a id="management-console-1-15-2-features"></a>Features and Resolved Issues

This release of the <%= vars.product_short %> Management Console includes no new features or resolved issues.  

<br>
### <a id="management-console-1-15-2-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.15.1 
are also in <%= vars.product_short %> Management Console v1.15.2. 
See the <%= vars.k8s_runtime_abbr %> Management Console v1.15.1 [Known Issues](#management-console-1-15-1-known-issues) below.  

<hr>

<br>
<br>
## <a id="1-15-1"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.1

**Release Date**: November 22, 2022

<br>
### <a id="1-15-1-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1205849">v1.15.1</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>November 22, 2022</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.6<br>Windows: v1.6.6</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.13&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.6.2&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.6/rn/vmware-vsphere-container-storage-plugin-26-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.4</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1187210">v2.6.1&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v261-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.7&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v1246">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.1.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.1/rn/vmware-nsx-container-plugin-401-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.58&#42;</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.11.0<br>Wavefront Proxy: v11.3</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1205849"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>&#42;&#42;&#42;.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.51 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1205849"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-1-component-updates"></a>&#42;  Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.1.  
&#42;&#42;&#42; NSX Management Plane API to NSX Policy API Migration requires VMware NSX v4.0.1.1 or later.  

<br>
### <a id="1-15-1-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.1 are from 
<%= vars.k8s_runtime_abbr %> v1.15.0, and 
<%= vars.k8s_runtime_abbr %> v1.14.3 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  


<br>
### <a id="1-15-1-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.1 includes the following features and enhancements:  

#### <a id="1-15-1-features-mp2p-migration"></a> Supports Migrating <%= vars.k8s_runtime_abbr %> to NSX Policy API

Supports promoting <%= vars.k8s_runtime_abbr %> and <%= vars.k8s_runtime_abbr %> Kubernetes clusters and workloads 
from NSX Management Plane API to NSX Policy API on vSphere with VMware NSX v4.0.1.1.  
 
For more information, see [Migrating the NSX Management Plane API to NSX Policy API - Overview](mp2p-migration-concepts.html).  


#### <a id="1-15-1-features-velero-vsphere"></a> Supports the Velero vSphere Plugin

Supports backing up and restoring <%= vars.k8s_runtime_abbr %> and <%= vars.k8s_runtime_abbr %> Kubernetes clusters on vSphere using the Velero vSphere Plugin.  
 
For more information, see [Installing Velero vSphere Plugin](velero-install-vsphere.html).  


#### <a id="1-15-1-csi-on-multi-data-centers"></a> vSphere CSI Supports Multiple Data Centers

Supports using the vSphere Container Storage Interface (CSI) Driver on cluster worker nodes 
that are distributed across multiple data centers. For more information, 
see [Configure CNS Data Centers](vsphere-cns.html#cns-datacenters) 
in _Deploying and Managing Cloud Native Storage (CNS) on vSphere_.  

<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-1-features-network-profiles"></a> Network Profiles Enhancements

Supports configuring additional NCP Network Profiles parameters:  

* `nsx_v3.cookie_name`, `nsx_v3.members_per_medium_lbs`, `nsx_v3.members_per_small_lbs`, `nsx_v3.natfirewallmatch`, 
`nsx_v3.ncp_enforced_pool_member_limit`, `nsx_v3.relax_scale_validation`  
 
For more information, see [cni_configurations Extensions Parameters](network-profiles-define.html#cni-extensions) 
in _Creating and Managing Network Profiles_.  
<% end %>



<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-1-csi-on-public-clouds"></a> Supports Public Cloud CSI Drivers

<%= vars.k8s_runtime_abbr %> v1.15.1 supports the AWS, Azure, and Google Cloud CSI Drivers.  

For more information on using a public cloud CSI Driver with <%= vars.k8s_runtime_abbr %> Kubernetes clusters, 
see [Limitations on Using a Public Cloud CSI Driver](#1-15-1-csi-driver-limits) below.  
<% end %>


<br>
### <a id="1-15-1-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.1 resolves the following issues:  

<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

* Component bumps fix the following Known Issues:  
    * Upgrades Kubernetes to v1.24.7:  
        * Fixes [CVE-2021-25749: runAsNonRoot logic bypass for Windows containers](https://github.com/kubernetes/kubernetes/issues/112192).  
    * Upgrades NCP to v4.0.1.0:  
        * Fixes [<%= vars.k8s_runtime_abbr %> Certificate Rotation Might Remove NSX Ingress Certificates from <%= vars.k8s_runtime_abbr %>](#1-15-0-rotated-certs-partial-list).  
    * Upgrades CSI Driver for vSphere to v2.6.2:  
        * Fixes [Persistent Volumes Fail to Detach from Nodes](#1-15-0-pv-not-attached-to-new-node).  
    * Upgrades Fluent Bit to v1.9.3:  
        * Fixes [Fluent Bit Does Not Merge Containerd Runtime Cluster Multi-Line Entries](#1-15-0-fluentd-multiline).  
* Fixes [Pods on Clusters Using the containerd-Runtime Enter a CrashLoopBackOff State](#1-15-0-crashloopbackoff-after-containerd).  
* Fixes [Switching Your Default CNI to Antrea is Not Supported](#1-15-0-antrea-switch-disabled).  
* Fixes [Timeout While Switching Container Runtimes If the Docker Directory Is Too Large](#1-15-0-large-docker-timeout).  

<br>
###<a id="1-15-1-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.15.0
are also in <%= vars.product_short %> v1.15.1.
See the <%= vars.k8s_runtime_abbr %> v1.15.0 [Known Issues](#1-15-0-known-issues) below.  

<hr>

<br>
<br>
## <a id="management-console-1-15-1"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.1

**Release Date**: November 22, 2022

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<br>
### <a id="management-console-1-15-1-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1150&productId=1339">v1.15.1</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>November 22, 2022</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-1">v1.15.1</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.49&#42;</td>
        <td style="text-align: center;"><a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-49">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.7&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md#changelog-since-v1246">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1187210">v2.6.1&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v261-0">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.330&#42;</td>
    </tr>
</table>

<a id="management-console-1-15-1-component-updates"></a>&#42; Components marked with an asterisk have been updated.

<br>
### <a id="management-console-1-15-1-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.1 are from 
<%= vars.k8s_runtime_abbr %> MC v1.15.0, and 
<%= vars.k8s_runtime_abbr %> MC v1.14.3 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  

<br>
### <a id="management-console-1-15-1-features"></a>Features and Resolved Issues

This release of the <%= vars.product_short %> Management Console includes no new features or resolved issues.  

<br>
### <a id="management-console-1-15-1-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.15.0 
are also in <%= vars.product_short %> Management Console v1.15.1. 
See the <%= vars.k8s_runtime_abbr %> Management Console v1.15.0 [Known Issues](#management-console-1-15-0-known-issues) below.  

<hr>

<br>
<br>
## <a id="1-15-0"></a><%= vars.k8s_runtime_abbr %> <%= vars.product_version %>.0

**Release Date**: September 20, 2022

<br>
### <a id="1-15-0-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://network.pivotal.io/products/pivotal-container-service#/releases/1162514">v1.15.0</a></td>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>September 20, 2022</td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v1.5.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Container-Networking-with-Antrea/1.5.0/rn/vmware-container-networking-with-antrea-150-release-notes/index.html">Release Notes</a></td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td colspan=2>v0.39.1</td>
    </tr>
    <tr>
        <td>Containerd</td>
        <td colspan=2>Linux: v1.6.6&#42;<br>Windows: v1.6.6&#42;</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td colspan=2>v1.8.6+vmware.9&#42;</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.6.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.6/rn/vmware-vsphere-container-storage-plugin-26-release-notes/index.html">Release Notes</a></td>
    </tr>
    <% if vars.product_version == "COMMENTED"  %>
    <tr>
        <td>Docker</td>
        <td colspan=2>Linux: v20.10.9<br>Windows: v20.10.9</td>
    </tr>
    <% end %>
    <tr>
        <td>etcd</td>
        <td colspan=2>v3.5.4</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1128636">v2.5.3</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v253-8">Release Notes</a></td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.24.3&#42;</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.23.md#changelog-since-v1239">Release Notes</a></td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td colspan=2>v0.6.1&#42;</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v4.0.0.0&#42;</td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-NSX-Container-Plugin/4.0.0/rn/vmware-nsx-container-plugin-400-release-notes/index.html">Release Notes</a></td>
        <% if vars.product_version == "COMMENTED"  %>
        <td colspan=2>v4.0.0.0&#42;</td>
        <% end %>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)
        <br>(in BOSH&nbsp;pxc-release)</td>
        <td>v5.7.38-31.59
        <br>pxc-release: v0.44.0</td>
        <td style="text-align: center;">Release Notes:
        <br><a href="https://docs.percona.com/percona-xtradb-cluster/5.7/release-notes/5.7.38-31.59.html">PXC</a>
        <br><a href="https://github.com/cloudfoundry/pxc-release/releases/tag/v0.44.0">pxc-release</a>
        </td>
    </tr>
    <tr>
        <td>UAA</td>
        <td colspan=2>v74.5.48</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=VELERO-181">v1.8.1</a></td>
        <td style="text-align: center;"><a href="https://github.com/vmware-tanzu/velero/releases/tag/v1.8.1">Release Notes</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.5&#42;&#42;, v4.4&#42;&#42;, and v4.3.1</td>
        <td style="text-align: center;">Release Notes: <br>
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.5/rn/vmware-cloud-foundation-45-release-notes/index.html">v4.5</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.4/rn/VMware-Cloud-Foundation-44-Release-Notes.html">v4.4</a>, 
            <a href="https://docs.vmware.com/en/VMware-Cloud-Foundation/4.3.1/rn/VMware-Cloud-Foundation-431-Release-Notes.html">v4.3.1</a>
        </td>
    </tr>
    <tr>
        <td>Wavefront</td>
        <td colspan=2>Wavefront Collector: v1.11.0&#42;<br>Wavefront Proxy: v11.3&#42;</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th colspan=2>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1162514"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>VMware NSX</td>
        <td rowspan=2 colspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
        <%# All versions link: https://interopmatrix.vmware.com/Interoperability?col=644&row=0, #%>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td colspan=2>v2019.51 or later</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td colspan=2>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1162514"><%= vars.product_network %></a>.</td>
    </tr>
</table>

<a id="1-15-0-component-updates"></a> &#42; Components marked with an asterisk have been updated.  
&#42;&#42; VCF v4.5 and v4.4 are supported but have not been tested with <%= vars.k8s_runtime_abbr %> v1.15.0.  

<br>
### <a id="1-15-0-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.15.0 are from 
<%= vars.k8s_runtime_abbr %> v1.14.2 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  

<br>
### <a id="1-15-0-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.15.0 has the following breaking changes:

* Upgrades Kubernetes to v1.24:  

    * Removes support for Dockershim.   
<br> 
        Kubernetes support for the Docker container runtime has been entirely removed. 
        <%= vars.k8s_runtime_abbr %> v1.15 supports the containerd container runtime. 
        All existing <%= vars.k8s_runtime_abbr %> Kubernetes clusters using the Docker container runtime 
        are switched to the containerd container runtime during the upgrade to <%= vars.k8s_runtime_abbr %> v1.15.  

        <p class="note warning"><strong>Warning</strong>: During the <%= vars.k8s_runtime_abbr %> v1.15 upgrade, 
            cluster workloads on clusters that switch from using the Docker container runtime to containerd will experience downtime.  
            <br>
            Cluster workloads do not experience downtime when <code>tkgi update-cluster</code> is used to switch container runtimes.
            To avoid workload downtime, <%= vars.recommended_by %> recommends that you 
            switch your Docker container runtime clusters to containerd before upgrading to <%= vars.k8s_runtime_abbr %> v1.15. 
            For more information, 
            see <a href="#1-15-0-coredns-downtime">Cluster Workloads Experience Downtime While Upgrading and Switching Container Runtimes</a> below.
        </p>  
     
        The tkgi cli `create-cluster` and `update-cluster` commands 
        no longer support the `runtime` and `lock_container_runtime` flags in configuration files.  
        
    
    * On public clouds, support for in-tree storage volumes has been removed.  
<br> 
        Migration from public cloud in-tree storage volumes to the CSI driver is required.  
        
        If your TKGI environment is on a public cloud, you must install the required CSI driver on your clusters 
        before upgrading to <%= vars.k8s_runtime_abbr %> v1.15.0. 
        For more information on migrating in-tree storage volumes to the CSI driver, 
        see [Install the Public Cloud CSI Driver Before Upgrading](checklist.html#install-csi-driver-public-cloud) 
        in _Upgrade Preparation Checklist for Tanzu Kubernetes Grid Integrated Edition_.  
        
        For information on using a public cloud CSI Driver with <%= vars.k8s_runtime_abbr %> Kubernetes clusters, 
        see [Limitations on Using a Public Cloud CSI Driver](#1-15-0-csi-driver-limits) below.  
        
    For more information about Kubernetes v1.24, see 
    [Kubernetes Removals and Deprecations In 1.24](https://kubernetes.io/blog/2022/04/07/upcoming-changes-in-kubernetes-1-24/) 
    in the Kubernetes documentation.  

* fluent-bit `sink-resources` requires a CA certificate with a SAN field:

    * The custom CA certificate used to secure fluent-bit log forwarding connections must include a `SAN` field. 
    If the certificate does not include a `SAN` field, 
    fluent-bit will not send logs and will record the following fluent-bit Pod log error:  

    ```
    build tls conn err: x509: certificate relies on legacy Common Name field, use SANs instead
    ```


For additional breaking changes, see [Deprecations](#1-15-0-deprecations) below.  

<br>
### <a id="1-15-0-features"></a> Features and Enhancements

<%= vars.k8s_runtime_abbr %> v1.15.0 includes the following features and enhancements:

#### <a id="1-15-0-features-security"></a>Security Features

Passes additional CIS Kubernetes Benchmarks:  

* **1.3.7**: Controller Mgr: Ensure that the `--bind-address` argument is set to `127.0.0.1`.  
* **1.4.2**: Scheduler: Ensure that the `--bind-address` argument is set to `127.0.0.1`.  

For more information, see [CIS Kubernetes Benchmarks](./security.html#benchmarks).  


#### <a id="1-15-0-features-kubernetes-profiles"></a>Kubernetes Profiles Enhancements

Supports the following Kubernetes Profiles enhancements:  

**Supports Changing the Service Cluster IP Range**  

Kubernetes Profiles configuration now supports changing the service cluster IP range using `customizations`. 
For more information, see [Modify the Service Cluster IP Range](k8s-profiles.html#extend-service-ip-range) in _Using Kubernetes Profiles_.  


#### <a id="1-15-0-features-network-profiles"></a>Network Profiles Enhancements

Supports the following Network Profiles enhancements:  

**Supports Configuring Additional NCP Parameters**

Network Profiles configuration now supports configuring the NCP `nsx_v3.l4_lb_auto_scaling` parameter. 
For more information, see [cni_configurations Extensions Parameters](network-profiles-define.html#cni-extensions) 
in _Creating and Managing Network Profiles_.  


#### <a id="1-15-0-tenant-isolation"></a>Tenant Isolation Enhancements

Supports isolating tenants using VRF Tier-0 gateways. For more information, 
see [Using a VRF Tier-0 Gateway Configuration for Tenant Isolation](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.15/tkgi/GUID-nsxt-multi-t0.html#about-vrf-gateway-isolation)
in _Isolating Tenants_.  


<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-0-csi-on-public-clouds"></a>Supports Public Cloud CSI Drivers

<%= vars.k8s_runtime_abbr %> v1.15.0 supports the AWS, Azure, and Google Cloud CSI Drivers.  

For more information on using a public cloud CSI Driver with <%= vars.k8s_runtime_abbr %> Kubernetes clusters, 
see [Limitations on Using a Public Cloud CSI Driver](#1-15-0-csi-driver-limits) below.  
<% end %>

#### <a id="1-15-0-telegraf-enhancements"></a>Supports Reporting Additional Metrics 

Supports the following telegraf metrics reporting enhancements:

* Supports configuring telegraf to export output using the `metric_version=1` format instead of the default `metric_version=2` format.  
* Supports reporting Kubernetes Scheduler Metrics.  
* Supports reporting telegraf agent process metrics.  

For more information, 
see [Configure Telegraf in the Tile](monitor-etcd.html#connect) 
in _Configuring Telegraf in TKGI_. 
For more information on Telegraf output formats, 
see [Example Output](https://github.com/influxdata/telegraf/blob/v1.20.3/plugins/inputs/prometheus/README.md#example-output) 
in the Telegraf GitHub documentation.  


#### <a id="1-15-0-enhancements"></a>Additional Features

<%= vars.k8s_runtime_abbr %> v1.15.0 includes the following additional features:

* Supports VMware NSX v4.0.0.1.  
* Supports disabling load balancer SNAT for workloads in a single-tier Policy API topology. 
For more information, see [Deploy Workloads on vSphere with NSX-T
](deploy-workloads.html#external-lb-nsxt) 
in _Deploying and Exposing Basic Linux Workloads_.  
* Improves `create-cluster`, `update-cluster`, and `delete-cluster` performance at scale on NSX for vSphere.  

<br>
### <a id="1-15-0-bug-fixes"></a>Resolved Issues

<%= vars.k8s_runtime_abbr %> v1.15.0 resolves the following issues:  

* **[Security Fix]** Fixes the following CVEs:  
  * Open SSL vulnerabilities: 
      * Fixes: [CVE-2022-0778](https://nvd.nist.gov/vuln/detail/CVE-2022-0778), 
  [CVE-2022-1292](https://nvd.nist.gov/vuln/detail/CVE-2022-1292), 
  [CVE-2022-1343](https://nvd.nist.gov/vuln/detail/CVE-2022-1343), 
  [CVE-2022-1434](https://nvd.nist.gov/vuln/detail/CVE-2022-1434), 
  [CVE-2022-1473](https://nvd.nist.gov/vuln/detail/CVE-2022-1473), 
  and [CVE-2022-2068](https://nvd.nist.gov/vuln/detail/CVE-2022-2068).  
  * TKGI API: 
      * Fixes: Diffie-Hellman <= 1024 bits vulnerability [CVE-2015-4000](https://nvd.nist.gov/vuln/detail/CVE-2015-4000).  

* **[Security Fix]** Component bumps fix the following:  
    * Upgrades golang to v1.17.9:  
        * Fixes [CVE-2022-23772](https://nvd.nist.gov/vuln/detail/CVE-2022-23772), [CVE-2022-23773](https://nvd.nist.gov/vuln/detail/CVE-2022-23773), 
        [CVE-2022-23806](https://nvd.nist.gov/vuln/detail/CVE-2022-23806), [CVE-2022-24921](https://nvd.nist.gov/vuln/detail/CVE-2022-24921), 
        and [CVE-2022-27191](https://nvd.nist.gov/vuln/detail/CVE-2022-27191).  
    * Upgrades JDK to v11.0.15:  
        * Fixes numerous moderate security issues. For more information, 
        see [Oracle Java SE Risk Matrix](https://www.oracle.com/security-alerts/cpuoct2020.html#AppendixJAVA) 
        in the _Oracle Critical Patch Update_ documentation.  
      
<% if vars.product_version == "COMMENTED"  %>
* **[Security Fix]** Component bumps fix the following:  
    * Harbor:  
        * Fixes [Harbor <2.52 includes multiple failures to validate user permission](https://github.com/goharbor/cve-notification/security/advisories).  
<% end %>
* Fixes [The Docker Image Remains after Switching to the Containerd Container Runtime](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-docker-image-not-removed).
* Fixes [Healthwatch Unable to Scrape Kube Scheduler Metrics](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-healthwatch-metrics).  
* Fixes [Custom BOSH vm_extensions Configuration Settings Applied Inconsistently to Cluster VMs](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-vm-extensions-toggle).
* Fixes [Automatic vSphere CSI Driver Integration Ignores Proxy Configuration](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-csi-proxy-issue).
* Fixes [Windows Pause Image Not Pulled from Private Harbor Registry](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-pause-image-not-pulled).
* Fixes [VMDKs Are Deleted during Migration from In-Tree Storage to CSI](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-vmdks-deleted-during-migration).
* Fixes [Upgrade of Windows cluster that has containerd as the container runtime can fail](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-1-windows-cluster-upgrade).
* Fixes [Kubernetes Services Cannot Be Accessed from a Windows Pod in Some Windows Clusters](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-windows-cluster-ncp-issue).
* Fixes [Some Windows Pods Become Unreachable](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-2-windows-cluster-ncp-issue-2).  
* Fixes [vROPs cAdvisor Daemonset Is Not Running after Upgrading <%= vars.k8s_runtime_abbr %>](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-vrops-not-running).  
* Fixes [The vsphere-csi-webhook Is Missing after Upgrading a Cluster](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-1-webhook-missing).  
* Fixes [Kubernetes Pods on NSX-T Become Stuck in a Creating State](#1-15-0-hyperbus-error). This issue is fixed by using NSX-T v3.2 or later.  
<% if vars.product_version == "COMMENTED"  %>
* Fixes [Switching Your Default CNI to Antrea is Not Supported](https://docs.vmware.com/en/VMware-Tanzu-Kubernetes-Grid-Integrated-Edition/1.14/tkgi/GUID-release-notes.html#1-14-0-antrea-switch-disabled).
* Fixes [Docker Commands No Longer Work on Worker VMs](#1-14-0-docker-commands-disabled).
<% end %>
<% if vars.product_version == "COMMENTED"  %>
<%#
* Fixes [](#1-14-0-).      
* Fixes the following CVEs:  
  *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-).  
* Component bumps fix the following CVEs:  
    *  [CVE-2021-](https://nvd.nist.gov/vuln/detail/CVE-2021-): .  
    #%>
<% end %>

<br>
### <a id="1-15-0-deprecations"></a><a id="1-15-0-upcoming-deprecations"></a> Deprecations


The following <%= vars.k8s_runtime_abbr %> features have been deprecated or removed from <%= vars.k8s_runtime_abbr %> v1.15:  

* **Docker Support**: Kubernetes support for the Docker container runtime has been entirely removed in Kubernetes v1.24. 
<%= vars.k8s_runtime_abbr %> v1.15 supports the containerd container runtime.  

* **The `log_dropped_traffic` CNI Configuration parameter**: In <%= vars.k8s_runtime_abbr %> v1.15.0 and later, 
    the `log_dropped_traffic` CNI Configuration parameter is ignored.  

    To configure logging in a Network Profile, modify the `log_firewall_traffic` parameter. For more information, 
    see `log_settings` in the [`cni_configurations` Parameters](network-profiles-define.html#cni-params) section in _Creating and Managing Network Profiles_.  
    
* **Pod Security Policy Support**: Kubernetes Pod Security Policy (PSP) support has been deprecated and PSP support will be entirely removed in Kubernetes v1.25.
Kubernetes v1.23 and v1.24 provide beta support for Pod Security Admission.
For more information, see [Pod Security Admission](https://kubernetes.io/docs/concepts/security/pod-security-admission/) and
[Enforce Pod Security Standards with Namespace Labels](https://kubernetes.io/docs/tasks/configure-pod-container/enforce-standards-namespace-labels/)
in the Kubernetes documentation.  
<%#* **Management API**: Management API will be deprecated and later replaced with Policy API in future <%= vars.k8s_runtime_abbr %  \n   > versions. VMware does not recommend that you use Management API  \n   in future <%= vars.k8s_runtime_abbr %  \n   > versions. #%>
<%#* Support for `` has been removed and can no longer be configured in the < %= vars.k8s_runtime_abbr % > tile.  \n     \n   #### <a id="1-14-0-upcoming-deprecations"></a> Upcoming Deprecations  \n     \n   The following < %= vars.k8s_runtime_abbr % > features will be deprecated or removed in future versions of < %= vars.k8s_runtime_abbr % >:   \n   #%>

* **Flannel Support**: Support for the Flannel Container Networking Interface (CNI) is deprecated.
<%= vars.recommended_by %> recommends that you switch your Flannel CNI-configured clusters to the Antrea CNI.
For more information about Flannel CNI deprecation, see
[About Switching from the Flannel CNI to the Antrea CNI](understanding-upgrades.html#cni)
in _About Tanzu Kubernetes Grid Integrated Edition Upgrades_.  

* **In-Tree vSphere Storage Volume Support**: In-Tree vSphere Storage volume support has been deprecated and will be entirely removed in a future Kubernetes version. 
For information on how to manually migrate In-Tree vSphere Storage volumes on existing <%= vars.k8s_runtime_abbr %> clusters from In-Tree vSphere Storage
to the automatically installed vSphere CSI Driver, see
[Migrate In-Tree vSphere Storage to the vSphere CSI Driver](vsphere-cns.html#migrate-to-csi) 
in _Deploying and Managing Cloud Native Storage (CNS) on vSphere_.  

<br>
###<a id="1-15-0-known-issues"></a>Known Issues

<%= vars.k8s_runtime_abbr %> v1.15.0 has the following known issues.  

<hr>

#### <a id="1-15-0-renamed-ops-man"></a> TKGI MC Unable to Manage TKGI after Restoring the TKGI Control Plane from Backup

**Symptom**

After you restore Ops Manager and the <%= vars.control_plane %> VM from backup,
<%= vars.k8s_runtime_abbr %> functions normally, but your <%= vars.k8s_runtime_abbr %> MC tabs
include the following error: "...product 'pivotal-container service' is not deployed...".

**Explanation**

<%= vars.k8s_runtime_abbr %> MC is associated with an Ops Manager with a specific name.
If you rename Ops Manager with a new name while restoring, your <%= vars.k8s_runtime_abbr %> MC
will not recognize the restored Ops Manager and cannot manage it.

<hr>

#### <a id="1-15-0-hyperbus-error"></a> Kubernetes Pods on NSX-T Become Stuck in a Creating State

This issue is fixed by using NSX-T v3.2 or later.  

**Symptom**

The pods in your <%= vars.k8s_runtime_abbr %> Kubernetes clusters on NSX-T become stuck in a
creating state.
The connections between nsx-node-agent and hyperbus repeatedly close, log
`Couldn't connect to 'tcp://...' (error: 111-Connection refused)`, and have a status of
`COMMUNICATION_ERROR`.

**Explanation**

For information and workaround steps for this Known Issue, see
[Issue 2795268: Connection between nsx-node-agent and hyperbus flips and Kubernetes pod is stuck at creating state](https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/NSX-Container-Plugin-312-Release-Notes.html#RNA_11559)
in _NSX Container Plugin 3.1.2 Release Notes_ in the VMware documentation.

<hr>

#### <a id="1-15-0-azure-apply-changes"></a> Error: Could Not Execute "Apply-Changes" in Azure Environment

**Symptom**

After clicking **Apply Changes** on the <%= vars.k8s_runtime_abbr %> tile in an Azure environment,
you experience an error '_...could not execute "apply-changes"..._' with either of the following descriptions:

* _{"errors":{"base":["undefined method 'location' for nil:NilClass"]}}_
* _FailedError.new("Resource Groups in region '#{location}' do not support Availability Zones"))_

For example:

```
INFO | 2020-09-21 03:46:49 +0000 | Vessel::Workflows::Installer#run | Install product (apply changes)
2020/09/21 03:47:02 could not execute "apply-changes": installation failed to trigger: request failed: unexpected response from /api/v0/installations:
HTTP/1.1 500 Internal Server Error
Transfer-Encoding: chunked
Cache-Control: no-cache, no-store
Connection: keep-alive
Content-Type: application/json; charset=utf-8
Date: Mon, 21 Sep 2020 17:51:50 GMT
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Pragma: no-cache
Referrer-Policy: strict-origin-when-cross-origin
Server: Ops Manager
Strict-Transport-Security: max-age=31536000; includeSubDomains
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Frame-Options: SAMEORIGIN
X-Permitted-Cross-Domain-Policies: none
X-Request-Id: f5fc99c1-21a7-45c3-7f39
X-Runtime: 9.905591
X-Xss-Protection: 1; mode=block

44
{"errors":{"base":["undefined method `location' for nil:NilClass"]}}
0
```

**Explanation**

The Azure CPI endpoint used by Ops Manager has been changed and
your installed version of Ops Manager is not compatible with the new endpoint.

**Workaround**

Run the following Ops Manager CLI command:

```
om --skip-ssl-validation --username USERNAME --password PASSWORD --target https://OPSMAN-API curl --silent --path /api/v0/staged/director/verifiers/install_time/IaasConfigurationVerifier -x PUT -d '{ "enabled": false }'
```

Where:

* `USERNAME` is the account to use to run Ops Manager API commands.
* `PASSWORD` is the password for the account.
* `OPSMAN-API` is the IP address for the Ops Manager API

For more information, see
[Error 'undefined method location' is received when running Apply Change on Azure](https://community.pivotal.io/s/article/undefined-method-location-when-running-Apply-Change-on-Azure?language=en_US) in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-15-0-vrops-windows-clusters"></a> VMware vRealize Operations Does Not Support Windows Worker-Based Kubernetes Clusters

VMware vRealize Operations (vROPs) does not support Windows worker-based Kubernetes clusters and
cannot be used to manage <%= vars.k8s_runtime_abbr %>-provisioned Windows workers.

<hr>

#### <a id="1-15-0-wavefront-no-win"></a><%= vars.k8s_runtime_abbr %> Wavefront Requires Manual Installation for Windows Workers

To monitor Windows-based worker node clusters with a Wavefront collector and proxy, you must first install Wavefront on the clusters manually, using Helm.
For instructions, see the [Wavefront](windows-monitoring.html#wavefront) section of the
_Monitoring Windows Worker Clusters and Nodes_ topic.

<hr>
#### <a id="1-15-0-ping"></a>Pinging Windows Worker Kubernetes Clusters Does Not Work

<%= vars.k8s_runtime_abbr %>-provisioned Windows worker-based Kubernetes clusters inherit a Kubernetes limitation that prevents outbound ICMP communication from workers.
As a result, pinging Windows workers does not work.

For information about this limitation, see [Limitations > Networking](https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#networking-1) in the _Windows in Kubernetes_ documentation.

<hr>

#### <a id="1-15-0-windows-velero-limitations"></a> Velero Does Not Support Backing Up Stateful Windows Workloads

You can use Velero to back up stateless <%= vars.k8s_runtime_abbr %>-provisioned Windows workers only.
You cannot use Velero to back up stateful Windows applications.
For more information, see [Velero on Windows](https://velero.io/docs/v1.6/basic-install/#velero-on-windows) in
_Basic Install_ in the Velero documentation.

<hr>

#### <a id="1-15-0-tmc-on-gcp"></a>Tanzu Mission Control Integration Not Supported on GCP

<%= vars.k8s_runtime_abbr %> on Google Cloud Platform (GCP) does not support
Tanzu Mission Control (TMC) integration, which is configured in
the **<%= vars.product_tile %>** tile > the **Tanzu Mission Control** pane.

If you intend to run <%= vars.k8s_runtime_abbr %> on GCP,
skip this pane when configuring the <%= vars.product_tile %> tile.

<hr>

#### <a id="1-15-0-tmc-restic"></a>TMC Data Protection Feature Requires Privileged <%= vars.k8s_runtime_abbr %> Containers

TMC Data Protection feature supports privileged <%= vars.k8s_runtime_abbr %> containers only.
For more information, see [Plans](installing-vsphere.html#plans) in the _Installing TKGI_ topic for your IaaS.

<hr>

#### <a id="1-15-0-profile-no-win-gmsa"></a>Windows Worker Kubernetes Clusters with Group Managed Service Account Do Not Support Compute Profiles

Windows worker-based Kubernetes clusters integrated with group Managed Service Account (gMSA) cannot be managed using compute profiles.

<hr>

#### <a id="1-15-0-profile-no-win-flannel"></a> Windows Worker Kubernetes Clusters on Flannel Do Not Support Compute Profiles

On vSphere with NSX-T networking you can use compute profiles with both Linux and Windows worker&#8209;based Kubernetes clusters.
On vSphere with Flannel networking, you can apply compute profiles only to Linux clusters.

<hr>

#### <a id="1-15-0-profile-resize-down"></a>TKGI CLI Does Not Prevent Reducing the Control Plane Node Count

TKGI CLI does not prevent accidentally reducing a cluster's control plane node count using a compute profile.

<p class="note warning"><strong>Warning:</strong>
    Reducing a cluster's control plane node count can destroy the cluster.
    Do not scale out or scale in existing control plane nodes by reconfiguring the TKGI tile or by using a compute profile.
    Reducing a cluster's number of control plane nodes might remove a control plane node and cause the cluster to become inactive.
</p>

<hr>

#### <a id="1-15-0-in-windows-notready-nodes"></a> Windows Cluster Nodes Not Deleted After VM Deleted

**Symptom**

After you delete a VM using the management console of your infrastructure provider, you notice a Windows worker node
that had been on that VM is now in a `notReady` state.

**Solution**

1. To identify the leftover node:

    ```
    kubectl get no -o wide
    ```
1. Locate nodes on the returned list that are in a `notReady` state and have the same IP address as another node in the list.
1. To manually delete a `notReady` node:

    ```
    kubectl delete node NODE-NAME
    ```
    Where `NODE-NAME` is the name of the node in the `notReady` state.

<hr>

#### <a id="1-15-0-oidc-response-header"></a>502 Bad Gateway After OIDC Login

**Symptom**

You experience a "502 Bad Gateway" error from the NSX load balancer after you log in to OIDC.

**Explanation**

A large response header has exceeded your NSX-T load balancer maximum
response header size. The default maximum response header size is 10,240 characters and should
be resized to 50,000.

**Workaround**

If you experience this issue, manually reconfigure your NSX-T `request_header_size`
and `response_header_size` to 50,000 characters.
For information about configuring NSX-T default header sizes,
see [OIDC Response Header Overflow](https://community.pivotal.io/s/article/OIDC-Response-Header-overflow) in the Knowledge Base.

<hr>

#### <a id="1-15-0-windows-proxy"></a> Difficulty Changing Proxy for Windows Workers

You must configure a global proxy in the <%= vars.product_tile %> tile > **Networking** pane before you create any Windows workers that use the proxy.

You cannot change the proxy configuration for Windows workers in an existing cluster.

<hr>

#### <a id="1-15-0-http-proxy-password"></a> Character Limitations in HTTP Proxy Password

For vSphere with NSX-T, the HTTP Proxy password field does not support the following special characters: `&` or `;`.

<hr>

#### <a id="1-15-0-harbor-storage-config"></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>

#### <a id="1-15-0-resizing-worker-nodes"></a> Ingress Controller Statefulset Fails to Start After Resizing Worker Nodes

**Symptom**

Permissions are removed from your cluster's files and processes after resizing the persistent disk
during a cluster upgrade. The ingress controller statefulset fails to start.

**Explanation**

When resizing a persistent disk, Bosh migrates the data from the old disk to the new disk but
does not copy the files' extended attributes.

**Workaround**

To resolve the problem, complete the steps in
[Ingress controller statefulset fails to start after resize of worker nodes with permission denied]
(https://community.pivotal.io/s/article/5000e00001nCJxT1603094435795?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-15-0-security-group"></a>Azure Default Security Group Is Not Automatically Assigned to Cluster VMs

**Symptom**

You experience issues when configuring a load balancer for a multi-control plane node Kubernetes cluster or creating a service of type `LoadBalancer`.
Additionally, in the Azure portal, the **VM** > **Networking** page does not display
any inbound and outbound traffic rules for your cluster VMs.

**Explanation**

As part of configuring the <%= vars.product_tile %> tile for Azure, you enter **Default Security Group** in the **Kubernetes Cloud Provider** pane.
When you create a Kubernetes cluster, <%= vars.product_short %> automatically assigns this security group to each VM in the cluster.
However, on Azure the automatic assignment might not occur.

As a result, your inbound and outbound traffic rules defined in the security group are not applied to the cluster VMs.

**Workaround**

If you experience this issue, manually assign the default security group to each VM NIC in your cluster.

<hr>

#### <a id="1-15-0-uuid-length"></a> One Plan ID Longer than Other Plan IDs

**Symptom**

One of your plan IDs is one character longer than your other plan IDs.

**Explanation**

In <%= vars.k8s_runtime_abbr %>, each plan has a unique plan ID.
A plan ID is normally a UUID consisting of 32 alphanumeric characters and 4 hyphens.
However, the **Plan 4** ID consists of 33 alphanumeric characters and 4 hyphens.

**Solution**

You can safely configure and use **Plan 4**.
The length of the **Plan 4** ID does not affect the functionality of **Plan 4** clusters.

If you require all plan IDs to have identical length, do not activate or use **Plan 4**.

<hr>

#### <a id="1-15-0-db-down-after-vm-stopped"></a> Database Cluster Stops After a Database Instance is Stopped

**Symptom**

After you stop one instance in a multiple-instance database cluster, the cluster stops,
or communication between the remaining databases times out, and the entire cluster becomes unreachable.

The following might be in your UAA log:

```
WSREP has not yet prepared node for application use
```

**Explanation**

The database cluster is unable to recover automatically because a member is no longer available to reconcile quorum.

<hr>

#### <a id="1-15-0-velero-vsphere-pvs"></a> Velero Back Up Fails for vSphere PVs Attached to Clusters on Kubernetes v1.20 and Later

**Symptom**

Backing up vSphere persistent volumes using Velero fails and your Velero backup log includes the following error:

```
rpc error: code = Unknown desc = Failed during IsObjectBlocked check: Could not translate selfLink to CRD name
```

**Explanation**

This is a known issue when backing up clusters on Kubernetes v1.20 and later using the
Velero Plugin for vSphere v1.1.0 or earlier.

**Workaround**

To resolve the problem, complete the steps in
[Velero backups of vSphere persistent volumes fail on Kubernetes clusters version 1.20 or higher (83314)](https://kb.vmware.com/s/article/83314)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-15-0-creating-two-windows-clusters-fails"></a> Creating Two Windows Clusters at the Same Time Fails

**Symptom**

The first time that you try to create two Windows clusters at the same time, the creation of one of
the clusters fails. If you run `pks cluster CLUSTER-NAME` to examine the last action taken on the
cluster, you see the following:

<pre class="terminal">
Last Action: Create
Last Action State: failed
Last Action Description: Instance provisioning failed: There was a problem completing your request.
. . .
operation: create, error-message: Failed to acquire lock
. . .
locking task id is 111, description: 'create deployment'
</pre>

**Explanation**

This is a known issue that occurs the first time that you create two Windows clusters concurrently.

**Workaround**

Recreate the failed cluster. This issue only occurs the first time that you create two Windows
clusters concurrently.


<hr>

#### <a id="1-15-0-delete-cluster-not-stopped"></a> Deleted Clusters are Listed in Cluster Lists

**Symptom**

After running `tkgi delete-cluster` and cluster deletion has completed,
the deleted cluster continues to be listed when running `tkgi clusters`.

**Workaround**

You must manually remove the deleted cluster using a customized version of the ncp_cleanup script.
For more information, see
[Deleting a Tanzu Kubernetes Grid Integrated Edition cluster with "tkgi delete-cluster" stuck "in progress" status](https://community.pivotal.io/s/article/pks-delete-cluster-in-progress-after-the-cluster-has-been-deleted?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-15-0-errors-after-reinstall"></a> BOSH Director Logs the Error 'Duplicate vm extension name'

**Symptom**

After you uninstall <%= vars.k8s_runtime_abbr %>, then reinstall <%= vars.k8s_runtime_abbr %> in the same environment,
BOSH Director logs errors similar to the following:

```
.../gems/bosh-director-0.0.0/lib/bosh/director/deployment_plan/cloud_manifest_parser.rb:120:in `parse_vm_extensions': Duplicate vm extension name 'disk_enable_uuid' (Bosh::Director::DeploymentDuplicateVmExtensionName)
```

**Explanation**

The `pivotal-container-service` cloud-config was not removed when you uninstalled the <%= vars.k8s_runtime_abbr %> tile,
and it remained active.
When you reinstalled the <%= vars.k8s_runtime_abbr %> tile, an additional `pivotal-container-service` cloud-config was created,
causing the metrics_server to fall into a crash-loop state.

**Workaround**

You must manually remove the `pivotal-container-service` cloud-config after removing your <%= vars.k8s_runtime_abbr %> deployment,
including after removing the <%= vars.k8s_runtime_abbr %> tile from Ops Manager.

For more information, see ["Duplicate vm extension name" error when metrics_server runs on Director VM in Tanzu Kubernetes Grid Integrated Edition](https://community.pivotal.io/s/article/5000e00001oHXvP1631027033087?language=en_US)
in the VMware Tanzu Community Knowledge Base.

<hr>

#### <a id="1-15-0-whitespace-pksapi"></a> The <%= vars.control_plane %> FQDN Must Not Include Trailing Whitespace

**Symptom**

Your <%= vars.k8s_runtime_abbr %> logs include the following error:

```
'uaa'. Errors are:- Error filling in template 'uaa.yml.erb' (line 59: Client redirect-uri is invalid: uaa.clients.pks_cli.redirect-uri Client redirect-uri is invalid: uaa.clients.pks_cluster_client.redirect-uri)
```

**Explanation**

The <%= vars.control_plane %> fully-qualified domain name (FQDN) for your cluster contains leading or trailing whitespace.

**Workaround**

Do not include whitespace in the <%= vars.k8s_runtime_abbr %> tile **API Hostname (FQDN)** field.

<hr>

#### <a id="1-15-0-cannot-backup-with-tmc"></a> TMC Cluster Data Protection Backup Fails After Upgrading <%= vars.k8s_runtime_abbr %>

The TMC Cluster Data Protection Backup fails in <%= vars.k8s_runtime_abbr %> environments upgraded from an earlier version.

**Symptom**

The TMC Cluster Data Protection Backup fails to back up your existing clusters and logs the following error:

```
error executing custom action (groupResource=customresourcedefinitions.apiextensions.k8s.io, namespace=, name=ncpconfigs.nsx.vmware.com): rpc error: code = Unknown desc = error fetching v1beta1 version of ncpconfigs.nsx.vmware.com: the server could not find the requested resource
```

**Explanation**

Kubernetes v1.22 disallows the `spec.preserveUnknownFields: true` configuration in your existing clusters and the creation of a v1 CustomResourceDefinitions configuration fails.

<hr>

#### <a id="1-15-0-cannot-restore-with-tmc"></a> TMC Cluster Data Protection Restore Fails When Using Antrea CNI

The TMC Cluster Data Protection Restore operation can fail when restoring multiple Antea resources.

**Symptom**

The TMC Cluster Data Protection Restore fails and logs errors that requests to restore the `admission webhook` have been denied.

**Explanation**

Velero has encountered a race condition while operating a resource.
For more information, see
[Allow customizing restore order for Kubernetes controllers and their managed resources](https://github.com/vmware-tanzu/velero/issues/4045)
in the Velero GitHub repository.

<hr>

#### <a id="1-15-0-cvds-with-nvds"></a> <%= vars.k8s_runtime_abbr %> Does Not Support CVDS / NVDS Mixed Environments

<%= vars.k8s_runtime_abbr %> does not support environments where there are multiple matching networks, such as a mixed CVDS/NVDS environment.

**Symptom**

<%= vars.k8s_runtime_abbr %> logs errors similar to the following in an environment with multiple matching networks:

```
LastOperationstatus='failed', description='Instance provisioning failed:
There was a problem completing your request. Please contact your operations team providing the following information:
service: p.pks, service-instance-guid: ..., broker-request-id: ..., task-id: ..., operation: create,
error-message: Unknown CPI error 'Unknown' with message 'undefined method `mob' for <VimSdk::Vim::OpaqueNetwork:' in create_vm' CPI method
```

**Explanation**

<%= vars.k8s_runtime_abbr %> cannot identify which of the matching networks you intend to use and has selected the wrong network.

<hr>

#### <a id="1-15-0-ovsdb-server-failure"></a> Occasionally update-cluster Does Not Complete for Windows Workers

Occasionally, `tkgi update-cluster` hangs while updating a Windows worker node instance and the BOSH task cannot finish and exits.

**Symptom**

The `ovsdb-server` service has stopped but other processes report that it is running.

**Explanation**

The `ovsdb-server.pid` file uses the pid for a process that is not the ovsdb-server.

To confirm that this is the root cause for `tkgi update-cluster` to hang:

* To verify the `ovsdb-server` service has actually stopped, run the PowerShell `Get-services` command on the Windows worker node.
* To verify that other processes report the `ovsdb-server` service is still running:
<br>
    1. Review the ovsdb-server `job-service-wrapper.err.log` log file.
<br>
        The `job-service-wrapper.err.log` log file is located at:

        ```
        C:\var\vcap\sys\log\openvswitch-windows\ovsdb-server\job-service-wrapper.err.log
        ```
    1. Confirm that after the flushing processes, the log includes an error similar to the following:

        ```
        Pid-Guard : ovsdb-server is already runing, please stop it first
        At C:\var\vcap\jobs\openvswitch-windows\bin\ovsdb-server_ctl.ps1:30 char:5
        +     Pid-Guard $PIDFILE "ovsdb-server"
        +     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
            + CategoryInfo          : NotSpecified: ( [Write-Error], WriteErrorException
            + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException,Pid-Guard
        ```
* To verify the root cause:
<br>
    1. Run the following PowerShell commands on the Windows worker node:

        ```
        $RUN_DIR = "C:\var\vcap\sys\run\openvswitch-windows"
        $PIDFILE = "$RUN_DIR\ovsdb-server.pid"
        $pid1 = Get-Content $PidFile -First 1
        echo $pid1
        $rst = Get-Process -Id $pid1 -ErrorAction SilentlyContinue
        echo $rst
        ```
    1. Confirm the returned `ProcessName` is not `ovsdb-server`.

**Workaround**

To resolve this issue for a single Windows worker:

1. SSH to the affected worker node.
1. Run the following:

    ```
    rm C:\var\vcap\sys\run\openvswitch-windows\ovsdb-server.pid
    ```
1. Wait for the `ovsdb-server` process to start.
1. Confirm the dependent services also start.


<hr>

#### <a id="1-15-0-harbor-241"></a> Harbor Private Projects Are Inaccessible after Upgrading to <%= vars.k8s_runtime_abbr %> v1.13.0

If LDAP is enabled, Harbor private projects are inaccessible after upgrading to <%= vars.k8s_runtime_abbr %> v1.13.0.
For more information, see [Private projects become inaccessible after upgrading Harbor for TKGI to v2.4.x with LDAP feature enabled](https://community.pivotal.io/s/article/After-upgrading-Harbor-tile-to-v2-4-x-with-LDAP-feature-enabled-private-projects-turn-unaccessible?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="1-15-0-stemcell-tar-support"></a> Deployments Fail on <%= vars.k8s_runtime_abbr %> Windows Worker-based Kubernetes Clusters after the January 2022 Microsoft Windows Security Patch

Microsoft changed Microsoft Windows' support for tar file commands in the January 2022 Microsoft Windows security patch.

Packaging scripts that use tar commands for Windows worker-based Kubernetes Cluster deployments
can fail after the Microsoft tar command patch update has been applied.

The BOSH agent used by vSphere stemcells built by stembuild v2019.43 and earlier use tar commands that are no longer supported
and will fail if the Microsoft Windows security patch has been applied.


**Workaround**

stembuild v2019.44 and later include a version of the BOSH agent that does not use unsupported tar commands.

If you use vSphere stemcells, use stembuild 2019.44 or later to avoid the BOSH agent tar error.  

<hr>
<% if vars.product_version == "v1.15"  %>

#### <a id="1-15-0-coredns-downtime"></a> Cluster Workloads Experience Downtime While Upgrading and Switching Container Runtimes

The workloads on a cluster will experience a period of downtime if the cluster runtime is automatically switched from Docker to containerd 
during a <%= vars.k8s_runtime_abbr %> upgrade.  

**Explanation**  

By default, clusters are switched from the Docker container runtime to containerd while upgrading <%= vars.k8s_runtime_abbr %> to a newer <%= vars.k8s_runtime_abbr %> version.  

If a <%= vars.k8s_runtime_abbr %> upgrade switches a cluster container runtime, the workloads on that cluster will experience a period of downtime.  

Administrators have the option to switch container runtimes manually before upgrading <%= vars.k8s_runtime_abbr %>. 
Administrators can also tag a cluster to not switch container runtimes automatically during a <%= vars.k8s_runtime_abbr %> upgrade.  

**Workaround**

To avoid workload downtime, manually switch the cluster's container runtime to containerd before upgrading to <%= vars.k8s_runtime_abbr %> v1.14
or configure the cluster so that the <%= vars.k8s_runtime_abbr %> upgrade does not switch the cluster's container runtime.  

If you must allow the container runtime switch to occur during a <%= vars.k8s_runtime_abbr %> upgrade, 
avoid workload downtime by completing the following steps before upgrading to <%= vars.k8s_runtime_abbr %> v1.14:  

1. Pull down the coreDNS image used in your <%= vars.k8s_runtime_abbr %> v1.13 Kubernetes clusters.  

    * If you are upgrading <%= vars.k8s_runtime_abbr %> from v1.13.2 through v1.13.6 to <%= vars.k8s_runtime_abbr %> v1.14.0 and later:  
    
        ```
        docker pull projects.registry.vmware.com/tkg/coredns:v1.8.4_vmware.7
        ```  
        
    * If you are upgrading from <%= vars.k8s_runtime_abbr %> v1.13.0 or v1.13.1 to <%= vars.k8s_runtime_abbr %> v1.14.0 and later:  
    
        1. SSH to one of the worker nodes.  
        1. Use the following `alias docker` command:  
        
            ```
            alias docker="/var/vcap/packages/docker/bin/docker --host unix:///var/vcap/sys/run/docker/docker.sock"
            ```
            
        1. Export the coreDNS image using [`docker save`](https://docs.docker.com/engine/reference/commandline/save/).  
            
1. Upload the coreDNS image to your custom image registry.  
1. Modify the coreDNS deployment to use the uploaded image. 
Repeat this step for all of the <%= vars.k8s_runtime_abbr %> Kubernetes clusters with workloads that should remain up during the upgrade.  
1. Upgrade <%= vars.k8s_runtime_abbr %> from v1.13 to <%= vars.k8s_runtime_abbr %> v1.14.  

    During worker upgrades the coreDNS image in the custom image registry is available, avoiding coreDNS downtime. 
    After upgrading a cluster, the workers use the coreDNS version installed by the <%= vars.k8s_runtime_abbr %> upgrade.  


<hr>
<% end %>  


#### <a id="1-15-0-fluentd-multiline"></a> Fluent Bit Does Not Merge Containerd Runtime Cluster Multi-Line Entries

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes).

The Fluent Bit Docker, CRI, Go, Java, and Python multi-line parser does not merge containerd runtime cluster log entries
belonging to the same context into a single log entry.

<hr>


#### <a id="1-15-0-antrea-switch-disabled"></a> Switching Your Default CNI to Antrea is Not Supported

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes).

You cannot switch your default CNI from Flannel to Antrea during <%= vars.k8s_runtime_abbr %> upgrade 
if <%= vars.k8s_runtime_abbr %> is running on Ops Manager v2.10.40 or later.  

<hr>

#### <a id="1-15-0-https-ingress-outage"></a> HTTPS Ingress Outage During VMware NSX Certificate Rotation

When the <%= vars.k8s_runtime_abbr %> CLI rotates VMware NSX certificates, HTTPS Ingress with customer-defined TLS experiences a brief outage.

Explanation

When the <%= vars.k8s_runtime_abbr %> CLI rotates VMware NSX certificates, it updates the default certificate IDs in the HTTPS Load Balancer (LB) virtual server,
and removes the server name indicator (SNI) certificate IDs on the LB Virtual Server. This causes a brief outage of HTTPS Ingress with customer-defined TLS.
After the certificate rotation, NSX Container Plugin (NCP) restarts and resets the removed SNI.

<hr>

###<a id="1-15-0-csi-driver-limits"></a>Limitations on Using a Public Cloud CSI Driver

If you enable a public cloud CSI Driver on a <%= vars.k8s_runtime_abbr %> cluster, 
you must take additional steps before deleting，upgrading, or updating the cluster.  


**Deleting a Cluster on a Public Cloud**

When deleting a cluster that uses a public cloud CSI Driver:  

1. Manually delete the workload PVCs and PVs before deleting the cluster.  
1. Delete the cluster. 
For  more information on deleting clusters, see [Deleting Clusters](delete-cluster.html).  


**Upgrading a Cluster on a Public Cloud**

When upgrading a cluster that uses a public cloud CSI Driver:  

* No preparation steps are needed when upgrading a multi-worker node cluster.  
* To prepare a single-worker node cluster for upgrading:  

    1. Resize the cluster to two or more worker nodes before upgrading the cluster. 
    For more information, see [Scaling Existing Clusters](scale-clusters.html).  
    1. Upgrade the cluster. 
    For  more information on upgrading clusters, see [Upgrading Clusters](upgrade-clusters.html).  

**Updating a Cluster on a Public Cloud**

When updating a cluster that uses a public cloud CSI Driver:  

* No preparation step are needed when updating a multi-worker node cluster.  
* To prepare a single-worker node cluster for updating:  

    1. Resize the cluster to two or more worker nodes before updating the cluster. 
    For more information, see [Scaling Existing Clusters](scale-clusters.html).  
    1. Update the cluster.  

<hr>

#### <a id="1-15-0-upgrade-windows-failure"></a> Windows Worker Nodes Are Unresponsive after Update-Cluster and Upgrade-Cluster

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.2](#1-15-2-bug-fixes). 

While updating or upgrading a Windows Worker cluster that uses the containerd container runtime, some of the cluster's nodes can become unresponsive. 
During the cluster update or upgrade, the node drain step for the cluster's nodes can time out and not finish.  

**Symptom**

While updating or upgrading a Windows Worker cluster, the drain step for some nodes hangs for an extended period, and the nodes enter an `unresponsive agent` state. 
The update or upgrade process eventually logs the error `Error: Timed out sending 'get_task' to instance` for the `executing drain` step.  


**Workaround**  

If the upgrade/update node drain step for your windows Worker cluster is waiting to timeout, you can manually stop the drain process and re-start your cluster upgrade/update.

To stop the upgrade/update node drain process and re-start your cluster upgrade/update:  

1. SSH to your jump host.  
1. Determine the VM for the cluster being upgraded/updated and the task ID of the node drain step that is running.  
1. Confirm BOSH resurrection is enabled.  
1. Run the following command to stop the task:  

    ```
    bosh cancel-task TASK-ID
    ```
    
    Where `TASK-ID` is the task ID for the node drain step that is running.  
    
1. Run the following command to delete the VM:  

    ```
    bosh delete-vm VM-ID
    ```
    
    Where `VM-ID` is the VM of the cluster being upgrade/updated.  
    
1. Wait for BOSH Resurrection to recreate the missing VM.  
1. Restart the upgrade or update cluster process for your cluster.  


<hr>

#### <a id="1-15-0-large-docker-timeout"></a> Timeout While Switching Container Runtimes If the Docker Directory Is Too Large 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes). 

Switching a cluster's container runtime from Docker to containerd can timeout and fail 
if the Docker directory contains many files.  

**Description**

A timeout occurs during the `remove Docker` step while switching a cluster's container runtime 
from Docker to containerd if the Docker directory contains too many files to delete within 
the 180-second timeout interval.  

**Workaround**

To work around this issue:  

1. Manually remove the `/var/vcap/store/docker` directory.  
1. Re-start the process that stopped due to the time out.  

<hr>


#### <a id="1-15-0-pv-not-attached-to-new-node"></a> Persistent Volumes Fail to Detach from Nodes

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes). 

If a Pod is recreated in a new instance node, the persistent volume might remain attached to the old node.  

**Symptom**  

A persistent volume remains attached to an old node, and attachment errors similar to the following are logged:  

```
Warning FailedMount... kubelet Unable to attach or mount volumes: unmounted volumes=..., unattached volumes=...: timed out waiting for the condition
Warning FailedMount... kubelet Unable to attach or mount volumes: unmounted volumes=..., unattached volumes=...: timed out waiting for the condition
Warning FailedAttachVolume... attachdetach-controller AttachVolume.Attach failed for volume...: 
rpc error: code = Internal desc = failed to attach disk:... with node:... err failed to attach cns volume:... to node vm:.... 
fault: "(*types.LocalizedMethodFault)(0xc000c88d80)({\n DynamicData: (types.DynamicData)
``` 

For more information, 
see [Persistent volume fails to be detached from a node](https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.5/rn/vmware-vsphere-container-storage-plugin-25-release-notes/index.html#known-issues) 
in _VMware vSphere Container Storage Plug-in 2.5 Release Notes_.  


<hr>


#### <a id="1-15-0-crashloopbackoff-after-containerd"></a> Pods on Clusters Using the containerd-Runtime Enter a CrashLoopBackOff State
   
This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes).  

Pods in a cluster that has been switched from the Docker container runtime to containerd might enter a CrashLoopBackOff state. 
If the container runtime switch is part of a cluster upgrade, the upgrade halts.  

**Symptom**

The Pods that have entered the CrashLoopBackOff state log the following:

```
Warning FailedCreatePodSandBox... Failed to create pod sandbox: rpc error: code = 
Unknown desc = failed to create containerd task: failed to start shim: 
write /var/vcap/sys/run/containerd/io.containerd.runtime.v2.task/.../config.json: 
no space left on device: unknown
```

The `/var/vcap/data/sys/run` directory on the instance node with Pods that have entered the CrashLoopBackOff state is full.  

<hr>

#### <a id="1-15-0-kubelet-mtrics-not-collected"></a> Telegraf In-Host Monitoring Does Not Collect kubelet Metrics

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.3](#1-15-3-bug-fixes).  

**Symptom**

Telegraf in-host monitoring does not include kubelet metrics and instead logs errors similar to the following 
in worker VM `/var/vcap/sys/log/metric-sink/telegraf.stderr.log` log files:  

```
E! [inputs.kubernetes::kubelet] Error in plugin: https://localhost:10250/stats/summary returned HTTP status 401 Unauthorized
```

**Explanation**

In Kubernetes 1.24 and later, the beta `LegacyServiceAccountTokenNoAutoGeneration` feature gate is enabled by default. 
While this feature is enabled, the expected Secret API objects containing service account tokens are no longer auto-generated, 
and in-host monitoring does not authenticate.


<hr>

#### <a id="1-15-0-csi-driver-missing"></a> CSI Driver Image Missing After High Disk Utilization

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.3](#1-15-3-bug-fixes).  

The CSI driver might be missing on a worker node in an air-gapped environment.  

**Explanation**

A garbage collection event is triggered when a worker node experiences low available disk capacity. To increase storage capacity, the garbage collector deletes unused image files, deleting the CSI driver image.  

Usually, a worker node automatically pulls a replacement CSI driver image if the image is missing, but in an air-gapped environment, it cannot.  

<hr>

#### <a id="1-15-0-cert-error-terminator"></a> 'Input not an X.509 certificate' When Applying Change on the <%= vars.k8s_runtime_abbr %> Tile

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.3](#1-15-3-bug-fixes).  

The <%= vars.k8s_runtime_abbr %> tile might report an error similar to the following 
when `Applying Changes` with a correctly formatted certificate.  

```
Setting up key store, trust store and installing certs.
keytool error: java.lang.Exception: Input not an X.509 certificate
pre-start.stdout.log 
```

**Explanation**

The certificate contains one or more certificate keywords, for example, `BEGIN` or `END`, and does not validate.  


<hr>

###<a id="1-15-0-csi-driver-limits-vsphere"></a>Limitations on Using the VMware vSphere CSI Driver

The VMware vSphere CSI Driver supports a limited set of VMware vSphere features. 
Before enabling the vSphere CSI Driver on a <%= vars.k8s_runtime_abbr %> cluster, 
confirm the cluster and storage configuration are supported by the driver. 
For more information, see [Unsupported Features and Limitations](vsphere-cns.html#unsupported-features) 
in _Deploying and Managing Cloud Native Storage (CNS) on vSphere_.  


<hr>

###<a id="1-15-0-csi-driver-limits-public-cloud"></a>Limitations on Using a Public Cloud CSI Driver

If you enable a public cloud CSI Driver on a <%= vars.k8s_runtime_abbr %> cluster, 
you must take additional steps before deleting，upgrading, or updating the cluster.  


**Deleting a Cluster on a Public Cloud**

When deleting a cluster that uses a public cloud CSI Driver:  

1. Manually delete the workload PVCs and PVs before deleting the cluster.  
1. Delete the cluster. 
For  more information on deleting clusters, see [Deleting Clusters](delete-cluster.html).  


**Upgrading a Cluster on a Public Cloud**

When upgrading a cluster that uses a public cloud CSI Driver:  

* No preparation steps are needed when upgrading a multi-worker node cluster.  
* To prepare a single-worker node cluster for upgrading:  

    1. Resize the cluster to two or more worker nodes before upgrading the cluster. 
    For more information, see [Scaling Existing Clusters](scale-clusters.html).  
    1. Upgrade the cluster. 
    For  more information on upgrading clusters, see [Upgrading Clusters](upgrade-clusters.html).  

**Updating a Cluster on a Public Cloud**

When updating a cluster that uses a public cloud CSI Driver:  

* No preparation step are needed when updating a multi-worker node cluster.  
* To prepare a single-worker node cluster for updating:  

    1. Resize the cluster to two or more worker nodes before updating the cluster. 
    For more information, see [Scaling Existing Clusters](scale-clusters.html).  
    1. Update the cluster.  

<hr>

#### <a id="1-15-0-nsx-upgrade-w-policy-resources"></a> <%= vars.k8s_runtime_abbr %> Clusters Fail after NSX Upgrade If They Use NSGroup Policy API Resources

<%= vars.k8s_runtime_abbr %> supports clusters that use NSGroup Policy API resources, but Policy API NSGroups created in one NSX version will be empty after upgrading NSX to a newer version.  

**Workaround**  

BOSH reconfigures a deployment's NSGroup members if the deployment is redeployed.  

After upgrading NSX, redeploy affected deployments to reconfigure their NSGroup members:  

1. Re-**Apply Changes** on the Ops Manager UI to redeploy <%= vars.k8s_runtime_abbr %> tile deployments.  
1. Re-deploy the affected cluster deployments.  

<hr>

#### <a id="1-15-0-bbr-restore-etcd-failure"></a> Kubernetes API Server and etcd Daemon Occasionally Fail to Start During BBR Restore

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.5](#1-15-5-bug-fixes).  

The Kubernetes API server or the etcd daemon on a cluster control plane node might not start during a BBR restore, stopping the restore.  

**Symptom**  

During a BBR restore, the `post-restore-unlock` script occasionally times out while starting the etcd daemon or Kubernetes API server. 

For example, the `post-restore-unlock` script shows the following when the etcd daemon fails to start:  

```
Error attempting to run post-restore-unlock for job bbr-etcd on master...
+ NAME=post-restore-unlock
+ LOG_DIR=/var/vcap/sys/log/bbr-etcd
+ exec
++ tee -a /var/vcap/sys/log/bbr-etcd/post-restore-unlock.stdout.log
...
monit has started etcd
+ timeout 1200 /bin/bash
waiting for etcd daemon to start
Process 'etcd'     not monitored - start pending
...
waiting for etcd daemon to start
Process 'etcd'     initializing
etcd daemon was unable to start after 1200 seconds
+ exit 1 - exit code 1 
```

**Workaround**  

Restart the BBR restore if the Kubernetes API server or the etcd daemon fails to start.  


<hr>

#### <a id="1-15-0-cluster-role-deleted"></a> The 'kube-state-metrics' ClusterRole Is Deleted during Cluster Upgrade

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.3](#1-15-3-bug-fixes).  

The `wavefront-proxy-errand` deletes the `kube-state-metrics` ClusterRole during cluster upgrade. The deleted ClusterRole must be manually restored after upgrading a cluster.


<hr>

#### <a id="1-15-0-fluent-bit-memory"></a> The Fluent Bit Pod Restarts Due to Out-of-Memory Issue

<% if vars.product_version == "COMMENTED"  %>
This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.4](#1-15-4-bug-fixes).  
<% end %>
When the LogSink feature is enabled, the Fluent Bit Pod can experience an out-of-memory issue during high memory utilization. 
An `OOMKilled` error is logged, Kubernetes exit code 137, and the Fluent Bit pod restarts.  

**Workaround**

In <%= vars.k8s_runtime_abbr %> v1.15.4 and later, increase the Fluent Bit Pod memory limit.  
For more information, see [Log Sink Resources](installing-vsphere.html#log-sinks) in the _Installing <%= vars.product_short %>_ topic for your IaaS.  

<hr>

#### <a id="1-15-0-rotated-certs-expiring-in-opsman"></a> Rotated <%= vars.k8s_runtime_abbr %> Certificates Remain Listed as Expiring on the Ops Manager Certificates List

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.5](#1-15-5-bug-fixes).  

After rotating certificates, the Ops Manager list of certificates shows the `pks_api_internal_2018 `certificate on each cluster remains expiring on the original expiration date.  

**Explanation**

The Ops Manager list of certificates is displaying stale data for `pks_api_internal_2018` certificates.


<hr>

#### <a id="1-15-0-rotated-certs-partial-list"></a> <%= vars.k8s_runtime_abbr %> Certificate Rotation Might Remove NSX Ingress Certificates from <%= vars.k8s_runtime_abbr %>

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes).  

When rotating certificates using the `tkgi rotate-certificates --only-nsx` command, 
<%= vars.k8s_runtime_abbr %> certificate rotation might remove the <%= vars.k8s_runtime_abbr %> certificates used for ingress from the NSX virtual server. 
For example, `rotate-certificates --only-nsx` might remove the NSX Load Balancer certificate or the NSX Manager Superuser Principal Identity certificate 
from <%= vars.k8s_runtime_abbr %> when this issue occurs.  

**Explanation**  

When `tkgi rotate-certificates --only-nsx` rotates the NSX ingress certificates, 
`rotate-certificates` removes and then replaces the certificates. 
After removing the ingress certificates, `rotate-certificates` relies on NCP for a list of the NSX ingress certificates to restore, 
but NCP v4.0.0 provides an incomplete list of certificates.  

This occurs because NCP v4.0.0 does not collate the paginated certificate list returned by the NSX API 
and provides `tkgi rotate-certificates` with a maximum of **50** certificates.  


**Workaround**  

To manually rotate an admin-defined NSX-T certificate that is not rotated using the `tkgi rotate-certificates --only-nsx` command:  

1. Delete the TLS secret.  
1. Recreate the TLS secret.  

<hr>

#### <a id="1-15-0-secrets-not-rotated"></a> The Validator Secret Certificate Is Not Rotated

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.5](#1-15-5-bug-fixes).  

The certificates signed by `pks-ca`, 
for example, the `pks-system` namespace validator, `event-controller`, and `fluent-bit` secret certificates, 
are not rotated by running `tkgi rotate-certificates` and are not automatically rotated during cluster upgrades.  

**Workaround**  

To rotate the certificates signed by `pks-ca`:  

1. Delete the `event-controller`, `fluent-bit`, and `pks-system` namespace validator secrets.  

1. If you also want to rotate the pks-ca certificate, delete the pks-ca secret.  

1. To generate a new pks-ca certificate and or leaf certificates, apply the cert-generator job:  

    1. Backup the `cert-generator` job as yaml.  
    1. Delete the `cert-generator` job.  
    1. Apply the backup `cert-generator` yaml.  
    1. Restart `event-controller`, `fluent-bit`, and the `pks-system` namespace validator.  


<hr>

<% if vars.product_version == "COMMENTED"  %>
#### <a id="1-15-0-container-migration-image-access"></a> Workload Downtime after Switching Container Runtimes from Docker to containerd

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.1](#1-15-1-bug-fixes).  

Pods on updated worker nodes do not automatically restart after switching a cluster's container runtime from Docker to containerd.

**Explanation**

The Docker image is not available to containerd after successfully switching a cluster's container runtime to containerd. 
Pods on the cluster crash before a new YAML configuration for containerd can be applied.


#### <a id="1-15-0-incorrect-max-volumes"></a> <%= vars.k8s_runtime_abbr %> Sets the Maximum Persistent Volumes per Node to 59 Instead of 45

In <%= vars.k8s_runtime_abbr %>, the maximum number of persistent volumes for a node is set to 59, instead of 45. 

**Explanation**

The three available SCSI controllers in a node in <%= vars.k8s_runtime_abbr %>  support 45 persistent volumes in total. However, 
the `MAX_VOLUMES_PER_NODE` parameter, which sets the maximum number of persistent volumes supported in a vSphere CSI node 
is set to 59, instead of 45.

#### <a id="1-15-0-telegraf-metric-sink-crash"></a> Some Telegraf Metric-Sink Pods Crash After <%= vars.k8s_runtime_abbr %> Upgrade

After upgrading <%= vars.k8s_runtime_abbr %> to 1.15.x, some of the Telegraf metric-sink pods crash with this error:

```
Events:
  Type    Reason   Age                     From     Message
  ----    ------   ----                    ----     -------
  Normal  BackOff  4m18s (x547 over 129m)  kubelet  Back-off pulling image "cnabu-docker-local.artifactory.eng.vmware.com/oratos/telegraf:1a3337bb81890b3ca0848b5dd456 

```

**Explanation**

Some of the Telegraf Metric-Sink Pods cannot pull images from the repository.



<hr>
<% end %>


## <a id="management-console-1-15-0"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.15.0

**Release Date**: September 20, 2022

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions might differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

### <a id="management-console-1-15-0-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Element</th>
        <th colspan=2>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td colspan=2><a href="https://customerconnect.vmware.com/downloads/info/slug/infrastructure_operations_management/vmware_tanzu_kubernetes_grid_integrated_edition/1_15">v1.15.0</td>
            <% if vars.product_version == "COMMENTED"  %>
            https://customerconnect.vmware.com/downloads/details?downloadGroup=TKGIMC-1130&productId=1231
            <% end %>
    </tr>
    <tr>
        <td>Release date</td>
        <td colspan=2>September 20, 2022</td>
    </tr>
    <tr>
        <td>Installed <%= vars.k8s_runtime_abbr %> version</td>
        <td colspan=2><a href="#1-15-0">v1.15.0</a></td>
    </tr>
    <tr>
        <td>Installed Ops Manager version</td>
        <td>v2.10.46&#42;</td>
        <td style="text-align: center;"><a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-46">Release Notes</a></td>
    </tr>
    <tr>
        <th>Component</th>
        <th colspan=2>Version</th>
    </tr>
    <tr>
        <td>Installed Kubernetes version</td>
        <td>v1.24.3</td>
        <td style="text-align: center;"><a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.23.md#changelog-since-v1239">Release Notes</a></td>
    </tr>
    <tr>
        <td>Installed Harbor Registry version</td>
        <td><a href="https://network.pivotal.io/products/harbor-container-registry/#/releases/1128636">v2.5.3&#42;</a></td>
        <td style="text-align: center;"><a href="https://docs.vmware.com/en/VMware-Harbor-Registry/services/vmware-harbor-registry/GUID-release-notes.html#v253-8">Release Notes</a></td>
    </tr>
    <tr>
        <td>Linux stemcell</td>
        <td colspan=2>v621.265&#42;</td>
    </tr>
</table>

<a id="management-console-1-15-0-component-updates"></a>&#42; Components marked with an asterisk have been updated.

### <a id="management-console-1-15-0-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.15.0 are from
<%= vars.k8s_runtime_abbr %> MC v1.14.2 and earlier <%= vars.k8s_runtime_abbr %> v1.14 patches.  

### <a id="management-console-1-15-0-features"></a>Features and Resolved Issues

<%= vars.k8s_runtime_abbr %> Management Console v1.15.0 includes the following features:  

* <%= vars.k8s_runtime_abbr %> MC OS has been upgraded to Photon OS 4.0. 
For more information about Photon OS 4.0, 
see [What is New in Photon OS 4](https://vmware.github.io/photon/docs/whats-new/) in the Project Photon OS documentation.  

 
### <a id="management-console-1-15-0-deprecations"></a> Deprecations

The following <%= vars.k8s_runtime_abbr %> features have been deprecated 
or removed from <%= vars.k8s_runtime_abbr %> Management Console v1.15:

### <a id="management-console-1-15-0-known-issues"></a> Known Issues

The <%= vars.product_short %> Management Console v1.15.0 has the following known issues:

<hr>

#### <a id="management-console-1-15-0-vrli-https"></a> vRealize Log Insight Integration Does Not Support HTTPS Connections

**Symptom**

The <%= vars.product_short %> Management Console integration to vRealize Log Insight does not support connections to the HTTPS port on the vRealize Log Insight server.

**Workaround**

1. Use SSH to log in to the <%= vars.product_short %> Management Console appliance VM.
1. Open the file `/lib/systemd/system/pks-loginsight.service` in a text editor.
1. Add `-e LOG_SERVER_ENABLE_SSL_VERIFY=false`.
1. Set `-e LOG_SERVER_USE_SSL=true`.

    The resulting file should look like the following example:

    ```
    ExecStart=/bin/docker run --privileged --restart=always --network=pks
    -v /var/log/journal:/var/log/journal
    --name=pks-loginsight
    -e TYPE=gear2-vm
    -e LOG_SERVER_HOST=${LOGINSIGHT_HOST}
    -e LOG_SERVER_PORT=${LOGINSIGHT_PORT}
    -e LOG_SERVER_ENABLE_SSL_VERIFY=false
    -e LOG_SERVER_USE_SSL=true
    -e LOG_SERVER_AGENT_ID=${LOGINSIGHT_ID}
    pksoctopus/vrli-journald:v07092019
    ```

1. Save the file and run `systemctl daemon-reload`.
1. To restart the vRealize Log Insight service, run `systemctl restart pks-loginsight.service`.

<%= vars.product_short %> Management Console can now send logs to the HTTPS port on the vRealize Log Insight server.

<hr>

#### <a id="management-console-1-15-0-vsphere-ha"></a> vSphere HA causes Management Console ovfenv Data Corruption

**Symptom**

If you enable vSphere HA on a cluster, if the TKGI Management Console appliance VM is running on a
host in that cluster, and if the host reboots, vSphere HA recreates a new TKGI Management Console
appliance VM on another host in the cluster. Due to an issue with vSphere HA, the `ovfenv` data for
the newly created appliance VM is corrupted and the new appliance VM does not boot up with the
correct network configuration.

**Workaround**

1. In the vSphere Client, right-click the appliance VM and select **Power** > **Shut Down Guest OS**.
1. Right-click the appliance again and select Edit Settings.
1. Select **VM Options** and click **OK**.
1. Verify under Recent Tasks that a `Reconfigure virtual machine` task has run on the appliance VM.
1. Power on the appliance VM.

<hr>

#### <a id="management-console-1-15-0-k8s-profile"></a> Base64 encoded file arguments are not decoded in Kubernetes profiles

**Symptom**

Some file arguments in Kubernetes profiles are base64 encoded. When the management console displays
the Kubernetes profile, some file arguments are not decoded.

**Workaround**

Run `echo "$content" | base64 --decode`

<hr>

#### <a id="management-console-1-15-0-network-profile"></a> Network profiles not immediately selectable

**Symptom**

If you create network profiles and then try to apply them in the Create Cluster page, the new
profiles are not available for selection.

**Workaround**

Log out of the management console and log back in again.

<hr>

#### <a id="management-console-1-15-0-cluster-summary"></a> Real-Time IP information not displayed for network profiles

**Symptom**

In the cluster summary page, only default IP pool, pod IP block, node IP block values are displayed,
rather than the real-time values from the associated network profile.

**Workaround**

None

<hr>
#### <a id="management-console-1-15-0-harbor-storage-config"></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>

#### <a id="management-console-1-15-0-re-import-windows-stemcell"></a> Windows Stemcells Must be Re-Imported After Upgrading Ops Manager

**Symptom**

After upgrading Ops Manager, your Management Console does not recognize a Windows stemcell imported
when using the prior version of Ops Manager.

**Workaround**

If your Management Console does not recognize a Windows stemcell after upgrading Ops Manager:

1. Re-import your previously imported Windows stemcell.
2. **Apply Changes** to <%= vars.k8s_runtime_abbr %> MC.

<hr>

#### <a id="management-console-1-15-0-cluster-group-name"></a> Your New Clusters Are Not Shown In Tanzu Mission Control

**Symptom**

After you create a cluster, Tanzu Mission Control does not include the cluster in cluster lists.
You have a "_Resource not found_" error similar to the following in your BOSH logs:

```
Cluster Name in TMC: cluster-1
Cluster Name Prefix: tkgi-my-prefix-
Group Name in TMC: my-prefix-clusters
Cluster Description in TMC: VMware Enterprise PKS Attaching cluster ''tkgi-my-prefix-cluster-1'' to TMC
Fetching token successful
request POST:/v1alpha1/clusters,
response 404 Not Found:{"error":"Resource not found - clustergroup(my-prefix-clusters)
org id(d859dc9f-g622-426d-8c91-939a9f13dea9)",
"code":5,"message":"Resource not found - clustergroup(my-prefix-clusters)
```

**Explanation**

The cluster group you assign a cluster to must be defined in Tanzu Mission Control
before you assign your cluster to the cluster group in the <%= vars.k8s_runtime_abbr %> Management Console.

**Workaround**

To resolve the problem, complete the steps in
[Attaching a Tanzu Kubernetes Grid Integrated (TKGI) cluster to Tanzu Mission Control (TMC) fails with "Resource not found - clustergroup(cluster-group-name)"](https://community.pivotal.io/s/article/tkgi-tmc-attach-fail)
in the VMware Tanzu Knowledge Base.

<hr>

#### <a id="management-console-1-15-0-cert-roll-back"></a> Previous nsx-t-superuser-certificate Is Restored during <%= vars.k8s_runtime_abbr %> MC Upgrade

This issue is fixed in [<%= vars.k8s_runtime_abbr %> MC v1.15.4](#management-console-1-15-4-bug-fixes).  

Upgrading the <%= vars.k8s_runtime_abbr %> MC after rotating the `nsx-t-superuser-certificate` certificate restores the previous `nsx-t-superuser-certificate` certificate. For example, this issue occurs if you upgrade <%= vars.k8s_runtime_abbr %> MC after following the steps in [How to renew the nsx-t-superuser-certificate used by Principal Identity user (80355)](https://kb.vmware.com/s/article/80355).  

<hr>

#### <a id="management-console-1-15-0-network-profile-ingress-persistence"></a> <%= vars.k8s_runtime_abbr %> MC Unable to Create a Network Profile Configured with Source IP Ingress Persistence

<% if vars.product_version == "COMMENTED"  %>
This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.15.6](#1-15-6-bug-fixes).  
<% end %>

The <%= vars.k8s_runtime_abbr %> MC halts and returns the following error when creating a network profile which includes an `ingress_persistence_settings.persistence_type` configuration:  

```
Failed to save network profile. ingress_persistence_settings.persistence_type in body should be one of [none cookie]
```

<hr>
