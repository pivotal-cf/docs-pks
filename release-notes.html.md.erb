---
title: Release Notes
owner: TKGI
topictype: releasenotes
---

This topic contains release notes for <%= vars.product_short %> (<%= vars.k8s_runtime_abbr %>) v1.10.

<p class="note warning"><strong>Warning:</strong> Before installing or upgrading to <%= vars.product_short %> v1.10,
review the <a href="#1-10-0-breaking-changes">Breaking Changes</a> below.
</p>

## <a id="1-10-8"></a><%= vars.k8s_runtime_abbr %> v1.10.8

**Release Date**: December 22, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you upgrade to <%= vars.k8s_runtime_abbr %> v1.10.8 or later
as soon as possible to mitigate the Apache Log4j vulnerabilities 
<a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a>. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-10-8-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td><a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/1016949">v1.10.8</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>December 22, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0_vmware.15</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>
            Linux: v20.10.9<br>
            Windows: v19.03.19
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.4.1</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.16</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.2</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.39.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.29</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v10.12</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/releases/1016949"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/releases/1016949"><%= vars.product_network %></a>.</td>
    </tr>
</table>

### <a id="1-10-8-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.8 are from <%= vars.k8s_runtime_abbr %> v1.10.7 and earlier v1.10 patches,
and from <%= vars.k8s_runtime_abbr %> v1.9.0 and later patches.


### <a id="1-10-8-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.8.

* **[Security Fix]** Fixes the following CVEs:
  * Apache Log4j vulnerability [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228).   
  * Apache Log4j vulnerability [CVE-2021-45046](https://nvd.nist.gov/vuln/detail/CVE-2021-45046). 

<%#
* **[Bug Fix]** Fixes [BOSH Director Logs the Error 'Duplicate vm extension name 'disk_enable_uuid''](#1-10-0-errors-after-reinstall).    
#%>

#### <a id="1-10-8-component-updates"></a>Component Updates

The following components have been updated:

* Bumps Harbor to v2.4.1.  
* Bumps UAA to v74.5.29.  
* Bumps Wavefront Proxy: v10.12.  

<%#* Bumps Docker Linux to v20.10.9.  
* Bumps Docker Windows to v19.03.19.  
* Bumps Harbor to v2.3.3.  
* Bumps Kubernetes to v1.19.16.  
* Bumps Percona XtraDB Cluster (PXC) to v0.39.0.  
* Bumps Windows Pause Image to v3.6.  
#%>

###<a id="1-10-8-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.7 are also in <%= vars.product_short %> v1.10.8.
See the <%= vars.k8s_runtime_abbr %> v1.10.7 [Known Issues](#1-10-7-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<hr>

## <a id="management-console-1-10-8"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.8

**Release Date**: December 22, 2021

### <a id="management-console-1-10-8-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an
    opinionated installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ
    from or be more limited than what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td><a href="https://customerconnect.vmware.com/downloads/get-download?downloadGroup=TKGIMC-1100">v1.10.8</a></td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>December 22, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td><a href="#1-10-8">v1.10.8</a></td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td><a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">v2.10.24</a></td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.16</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.4.1</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.183</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
</table>

<br>

### <a id="management-console-1-10-8-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.8 are from <%= vars.k8s_runtime_abbr %> MC v1.10.7 and earlier v1.10 patches,
and from <%= vars.k8s_runtime_abbr %> MC v1.9.0 and later patches.


### <a id="management-console-1-10-8-features"></a>Features

<%= vars.product_short %> Management Console v1.10.8 updates include:  

<%# * **[Bug Fix]** Fixes something. %>

### <a id="management-console-1-10-8-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.7
are also in <%= vars.product_short %> Management Console v1.10.8.
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.7
[Known Issues](#management-console-1-10-7-known-issues) below.

<hr>

## <a id="1-10-7"></a><%= vars.k8s_runtime_abbr %> v1.10.7

**Release Date**: November 17, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-10-7-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.7</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>November 17, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0_vmware.15</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>
            Linux: v20.10.9<br>
            Windows: v19.03.19
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.3.3</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.16</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.2</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.39.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.26</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v9.2</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/releases/964988"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,6128&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/releases/964988"><%= vars.product_network %></a>.</td>
    </tr>
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) in _Ops Manager v2.10 Release Notes_.  


### <a id="1-10-7-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.7 are from <%= vars.k8s_runtime_abbr %> v1.10.6 and earlier v1.10 patches,
and from <%= vars.k8s_runtime_abbr %> v1.9.0 and later patches.


### <a id="1-10-7-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.7.

* **[Security Fix]** Component bumps fix the following CVEs:
    * containerd [CVE-2021-41103](https://nvd.nist.gov/vuln/detail/CVE-2021-41103): 
    Unprivileged Linux users can traverse directory contents and execute programs.  
* **[Enhancement]** Now supports 3rd-party agents that previously failed to start and returned the error:  

    ```
    Error: failed to start container "agent": Error response from daemon: 
    path / is mounted on/ but it is not a shared or slave mount.
    ```
* **[Bug Fix]** Fixes [Some Kubernetes Logs Are Not Forwarded after Upgrading](#1-10-0-logs-not-forwarded).  
* **[Bug Fix]** Fixes infrequent occurrences of error: `kubectl: unbound variable` while creating multiple clusters simultaneously.  
* **[Bug Fix]** Fixes [`tkgi clusters` Returns the Incorrect Number of Worker Instances](#1-10-0-incorrect-worker-count).  

<%#
* **[Bug Fix]** Fixes [BOSH Director Logs the Error 'Duplicate vm extension name 'disk_enable_uuid''](#1-10-0-errors-after-reinstall).    
#%>

#### <a id="1-10-7-component-updates"></a>Component Updates

The following components have been updated:

* Bumps Docker Linux to v20.10.9.  
* Bumps Docker Windows to v19.03.19.  
* Bumps Harbor to v2.3.3.  
* Bumps Kubernetes to v1.19.16.  
* Bumps Percona XtraDB Cluster (PXC) to v0.39.0.  
* Bumps Windows Pause Image to v3.6.  


###<a id="1-10-7-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.6 are also in <%= vars.product_short %> v1.10.7.
See the <%= vars.k8s_runtime_abbr %> v1.10.5 [Known Issues](#1-10-5-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>

## <a id="management-console-1-10-7"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.7

**Release Date**: November 17, 2021

### <a id="management-console-1-10-7-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an
    opinionated installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ
    from or be more limited than what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.7</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>November 17, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.7</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.20</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.16</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.3.3</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.171</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
</table>

<br>

### <a id="management-console-1-10-7-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.7 are from <%= vars.k8s_runtime_abbr %> MC v1.10.6 and earlier v1.10 patches,
and from <%= vars.k8s_runtime_abbr %> MC v1.9.0 and later patches.


### <a id="management-console-1-10-7-features"></a>Features

<%= vars.product_short %> Management Console v1.10.7 updates include:  

<%# * **[Bug Fix]** Fixes something. %>

### <a id="management-console-1-10-7-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.6
are also in <%= vars.product_short %> Management Console v1.10.7.
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.6
[Known Issues](#management-console-1-10-5-known-issues) below.

<hr>


## <a id="1-10-6"></a><%= vars.k8s_runtime_abbr %> v1.10.6

**Release Date**: October 12, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id="1-10-6-snapshot"></a><a id="product-snapshot"></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.6</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>October 12, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0_vmware.15</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>    
    <tr>
        <td>Docker</td>
        <td>
            Linux: v20.10.7<br>
            Windows: v19.03.18
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.3.2</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.15</td>
    </tr>    
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.2</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.37.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.26</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v9.2</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/releases/964988"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,6128&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/releases/964988"><%= vars.product_network %></a>.</td>
    </tr>
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) in _Ops Manager v2.10 Release Notes_.  


### <a id="1-10-6-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.6 are from <%= vars.k8s_runtime_abbr %> v1.10.5 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.9.6 and earlier v1.9 patches.

<%#
### <a id="1-10-6-features"></a>Features

This section describes new features and changes in < %= vars.product_short % > v1.10.6.


* **[Bug Fix]** Fixes [BOSH Director Logs the Error 'Duplicate vm extension name 'disk_enable_uuid''](#1-10-0-errors-after-reinstall).    
* **[Security Fix]** Component bumps fix the following CVEs:  

    * 
#%>

#### <a id="1-10-6-component-updates"></a>Component Updates

The following components have been updated:

* Bumps CoreDNS to v1.7.0_vmware.15.  
* Bumps Docker for Windows to v19.03.18.  
* Bumps Harbor to v2.3.2.  
* Bumps Kubernetes to v1.19.15.  
* Bumps UAA to v74.5.26.  



###<a id="1-10-6-known-issues"></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.5 are also in <%= vars.product_short %> v1.10.6.
See the <%= vars.k8s_runtime_abbr %> v1.10.5 [Known Issues](#1-10-5-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>

## <a id="management-console-1-10-6"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.6

**Release Date**: October 12, 2021

### <a id="management-console-1-10-6-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an
    opinionated installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ
    from or be more limited than what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.6</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>October 12, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.6</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.18</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.15</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.3.2</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.154</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
</table>

<br>

### <a id="management-console-1-10-6-upgrade"></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.6 are from <%= vars.k8s_runtime_abbr %> MC v1.10.5 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.9.6 and earlier v1.9 patches.  


### <a id="management-console-1-10-6-features"></a>Features

<%= vars.product_short %> Management Console v1.10.6 updates include:  

<%# * **[Bug Fix]** Fixes something. %>

### <a id="management-console-1-10-6-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.5 
are also in <%= vars.product_short %> Management Console v1.10.6. 
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.5 
[Known Issues](#management-console-1-10-5-known-issues) below.  

<hr>




## <a id="1-10-5"></a><%= vars.k8s_runtime_abbr %> v1.10.5

**Release Date**: August 17, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-10-5-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.5</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>August 17, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0_vmware.13</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>    
    <tr>
        <td>Docker</td>
        <td>
            Linux: v20.10.7<br>
            Windows: v19.03.17
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.2.3</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.13</td>
    </tr>    
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.2</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.37.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.24</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v9.2</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/938497"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5921&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/938497"><%= vars.product_network %></a>.</td>
    </tr>
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 


### <a id='1-10-5-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.5 are from <%= vars.k8s_runtime_abbr %> v1.10.4 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.9.6 and earlier v1.9 patches.


### <a id="1-10-5-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.5.

* **[Bug Fix]** Fixes [Wavefront Collector is Duplicated or Not Collecting from <%= vars.k8s_runtime_abbr %> Namespaces](#1-10-0-dual-wavefront-collectors).  
* **[Bug Fix]** Fixes ["drain-cluster-windows" Errand Does Not Exist](#1-10-4-drain-cluster-windows-errand-does-not-exist).  
* **[Bug Fix]** The `observability-manager` ClusterRole and the `metric-controller` ClusterRole 
now use the `observability-manager` and `metric-controller` PodSecurityPolicy (PSP) instead of using the `pks-priviledged` PSP.  
<%#
* **[Security Fix]** Component bumps fix the following CVEs:  

    * 
#%>

#### <a id="1-10-5-component-updates"></a>Component Updates

The following components have been updated:


* Bumps CoreDNS to v1.7.0_vmware.13.  
* Bumps Docker Windows to v19.03.17.  
* Bumps Harbor to v2.2.3.  
* Bumps Kubernetes to v1.19.13.  
* Bumps Percona XtraDB Cluster (PXC) to v0.37.0.  
* Bumps UAA to v74.5.24.  

###<a id='1-10-5-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.4 are also in <%= vars.product_short %> v1.10.5.
See the <%= vars.k8s_runtime_abbr %> v1.10.4 [Known Issues](#1-10-4-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>


<hr>

## <a id="management-console-1-10-5"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.5

**Release Date**: August 17, 2021

### <a id="management-console-1-10-5-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an
    opinionated installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ
    from or be more limited than what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.5</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>August 17, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.5</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.16</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.13</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.3</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.136</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.37 or later</td>
    </tr>
</table>

<br>

### <a id='management-console-1-10-5-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.5 are from <%= vars.k8s_runtime_abbr %> MC v1.10.4 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.9.6 and earlier v1.9 patches.

### <a id="management-console-1-10-5-features"></a>Features

<%= vars.product_short %> Management Console v1.10.5 updates include:  

<%# * **[Bug Fix]** Fixes something. %>

### <a id="management-console-1-10-5-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.4 
are also in <%= vars.product_short %> Management Console v1.10.5. 
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.4 
[Known Issues](#management-console-1-10-4-known-issues) below.  

<hr>


## <a id="1-10-4"></a><%= vars.k8s_runtime_abbr %> v1.10.4

**Release Date**: July 1, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-10-4-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.4</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>July 1, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.39.1</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0_vmware.9</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>    
    <tr>
        <td>Docker</td>
        <td>
            Linux: v20.10.7<br>
            Windows: v19.03.14
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.2.2</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.10</td>
    </tr>    
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.2</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.35.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.23</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v9.2</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/908899"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5870&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/908899"><%= vars.product_network %></a>.</td>
    </tr>
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 


### <a id='1-10-4-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.4 are from <%= vars.k8s_runtime_abbr %> v1.10.3 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.9.5 and earlier v1.9 patches.


### <a id="1-10-4-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.4.

* **[Bug Fix]** Fixes [Windows Workloads With Attached Dynamic PVs Must Be Removed before Deleting a Cluster](#1-10-0-windows-dynamic-pvs).  
* **[Bug Fix]** Fixes [Cluster Fails to Restart](#1-10-0-ncp-port-protocol-limit).  
* **[Bug Fix]** Fixes [You Cannot Use vRealize Log Insight (vRLI) to Monitor NCP](#1-10-0-ncp-not-in-vrli).   
* **[Bug Fix]** Fixes [The <%= vars.k8s_runtime_abbr %> API VM fluentd.stdout.log Grows While vRealize Log Insight is Disabled](#1-10-0-fluentd-log-overflow).  
* **[Security Fix]** Component bumps fix the following CVEs:  

    * runc [CVE-2021-30465](https://github.com/opencontainers/runc/security/advisories/GHSA-c3xm-pvg7-gh7r): 
    Symlink-exchange attack vulnerability.  
    * OpenSSL [CVE-2020-1971](https://nvd.nist.gov/vuln/detail/CVE-2020-1971): 
    Null pointer dereference flaw.  


#### <a id="1-10-4-component-updates"></a>Component Updates

The following components have been updated:

* Bumps cAdvisor to v0.39.1.  
* Bumps Docker Linux to v20.10.7.  
* Bumps Harbor to v2.2.2.  
* Bumps NCP to v3.1.0.2.  
* Bumps PXC to v0.35.0.  
* Bumps UAA to v74.5.23.  
* Bumps Xenial stemcell to v621.130.  

###<a id='1-10-4-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.3 are also in <%= vars.product_short %> v1.10.4.
See the <%= vars.k8s_runtime_abbr %> v1.10.3 [Known Issues](#1-10-3-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>
#### <a id="1-10-4-drain-cluster-windows-errand-does-not-exist"></a> "drain-cluster-windows" Errand Does Not Exist 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.5](#1-10-5-features).

**Symptom**

When you delete a Linux cluster, the `drain-cluster-windows` errand reports the following error:

```
Errand 'drain-cluster-windows' doesn't exist
```

**Explanation**

When you delete a cluster, the following errands run:

* `drain-cluster`
* `drain-cluster-windows`

Both errands run regardless of whether the cluster is a Linux or Windows cluster.

On a Linux cluster, the Windows cluster and the `drain-cluster-windows` errand do not exist. The log shows the following:

```
Task 572
Task 572 | 11:39:54 | Preparing deployment: Preparing deployment
Task 572 | 11:39:54 | Deprecation: Global 'properties' are deprecated. Please define 'properties' at the job level.
Task 572 | 11:39:56 | Preparing deployment: Preparing deployment (00:00:02)
 L Error: Errand 'drain-cluster-windows' doesn't exist
Task 572 | 11:39:56 | Error: Errand 'drain-cluster-windows' doesn't exist
Task 572 Started Tue Jun 29 11:39:54 UTC 2021
Task 572 Finished Tue Jun 29 11:39:56 UTC 2021
Task 572 Duration 00:00:02
Task 572 error
```

On a Windows cluster, both the `drain-cluster` and `drain-cluster-windows` errands exist, and no
error messages are generated.

**Workaround**

No workaround is necessary. The error message is informational, accurate, and does not negatively
impact deleting the cluster.

<hr>

## <a id="management-console-1-10-4"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.4

**Release Date**: July 1, 2021

### <a id="management-console-1-10-4-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an
    opinionated installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ
    from or be more limited than what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.4</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>July 1, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.4</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.14</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.10</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.2</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.131</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
</table>

<br>

### <a id='management-console-1-10-4-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.4 are from <%= vars.k8s_runtime_abbr %> MC v1.10.3 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.9.5 and earlier v1.9 patches.


### <a id="management-console-1-10-4-features"></a>Features

<%= vars.product_short %> Management Console v1.10.4 updates include:  

<%# * **[Bug Fix]** Fixes something. %>

### <a id="management-console-1-10-4-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.3 
are also in <%= vars.product_short %> Management Console v1.10.4. 
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.3 
[Known Issues](#management-console-1-10-3-known-issues) below.  

<hr>

## <a id="1-10-3"></a><%= vars.k8s_runtime_abbr %> v1.10.3

**Release Date**: June 17, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-10-3-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.3</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>June 17, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.35.0</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0_vmware.8</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>    
    <tr>
        <td>Docker</td>
        <td>
            Linux: v19.03.14<br>
            Windows: v19.03.14
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.2.1</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.10</td>
    </tr>    
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.1</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.33.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.22</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v9.2</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/902334"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5817&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/902334"><%= vars.product_network %></a>.</td>
    </tr>    
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 

### <a id='1-10-3-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.3 are from <%= vars.k8s_runtime_abbr %> v1.10.2 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> v1.9.5 and earlier v1.9 patches.


### <a id="1-10-3-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.3.  

* **[Bug Fix]** Fixes [Nodes with More Than 30 Stateful Pods Are in a NotReady State](#1-10-2-runc-node-notready).  

###<a id='1-10-3-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.2 are also in <%= vars.product_short %> v1.10.3. 
See the <%= vars.k8s_runtime_abbr %> v1.10.2 [Known Issues](#1-10-2-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>

<hr>

## <a id="management-console-1-10-3"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.3

**Release Date**: June 17, 2021

### <a id="management-console-1-10-3-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.3</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>June 17, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.3</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.11</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.10</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.1</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.125</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
</table>

<br>
### <a id='management-console-1-10-3-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.3 are from <%= vars.k8s_runtime_abbr %> MC v1.10.2 and earlier v1.10 patches, 
and from <%= vars.k8s_runtime_abbr %> MC v1.9.5 and earlier v1.9 patches.


### <a id="management-console-1-10-3-features"></a>Features

<%= vars.product_short %> Management Console v1.10.3 updates include:  

* **[Bug Fix]** Fixes [Nodes with More Than 30 Stateful Pods Are in a NotReady State](#1-10-2-runc-node-notready).  

### <a id="management-console-1-10-3-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.2 
are also in <%= vars.product_short %> Management Console v1.10.3. 
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.2 
[Known Issues](#management-console-1-10-2-known-issues) below.  

<hr>

## <a id="1-10-2"></a><%= vars.k8s_runtime_abbr %> v1.10.2 - Withdrawn

<p class="note warning"><strong>Warning:</strong> 
    This release has been removed from VMware Tanzu Network because of the issue:
    <a href="#1-10-2-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a>.
</p>

**Release Date**: May 21, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-10-2-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.2</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>May 21, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Antrea</td>
        <td>v0.11.3</td>
    </tr>
    <tr>
        <td>cAdvisor</td>
        <td>v0.35.0</td>
    </tr>  
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.8</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>    
    <tr>
        <td>Docker</td>
        <td>
            Linux: v19.03.14<br>
            Windows: v19.03.14
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>    
    <tr>
        <td>Harbor</td>
        <td>v2.2.1</td>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.10</td>
    </tr>    
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.1</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.33.0</td>
    </tr>    
    <tr>
        <td>UAA</td>
        <td>v74.5.22</td>
    </tr>    
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>    
    <tr>
        <td>Wavefront</td>
        <td>Wavefront Collector: v1.2.6<br>Wavefront Proxy: v9.2</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/887863"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5734&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>

    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr> 
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/887863"><%= vars.product_network %></a>.</td>
    </tr>    
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 

### <a id='1-10-2-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.2 are from <%= vars.k8s_runtime_abbr %> v1.10.1, v1.10.0, 
and from <%= vars.k8s_runtime_abbr %> v1.9.5 and earlier v1.9 patches.


<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.10.2. 
For more information, see <a href="#1-10-2-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a> below.  
</p>

### <a id="1-10-2-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.2.  

* **[Bug Fix]** Fixes [Workloads Using Dynamic PVs Must be Removed Before Deleting a Cluster](#1-10-1-drain-dynamic-pvs).  
* **[Bug Fix]** Fixes [On NSX-T v3.1 the Transport Zone and Edge Transport Node Switch Names Must be Identical](#1-10-0-node-names-match).  
* **[Bug Fix]** Fixes [The <%= vars.control_plane %> Does Not Import the Current <%= vars.k8s_runtime_abbr %> CA Certificates](#1-10-0-import-single-cert).  
<%# 
* **[Bug Fix]** Fixes [Logs Do Not Forward When Using logsink with TLS Enabled](#1-10-0-tls-prevents-log-forwarding).  
#%>
* **[Bug Fix]** Fixes [NSX-T Pre-Check Errand Fails Due to Edge Node CPU Memory Configuration](#1-10-0-eight-size-error).  
* **[Security Fix]** Component bumps fix the following CVEs:
  * Kubernetes [CVE-2021-25736](https://github.com/kubernetes/kubernetes/pull/99958): 
  Windows kube-proxy LoadBalancer contention.  
<%#  * OpenSSL [CVE-2020-1971](https://nvd.nist.gov/vuln/detail/CVE-2020-1971):
  Null pointer dereference flaw.#%>
  * runc [CVE-2021-30465](https://github.com/opencontainers/runc/security/advisories/GHSA-c3xm-pvg7-gh7r): 
  Symlink-exchange attack vulnerability.  
  
#### <a id="1-10-2-component-updates"></a>Component Updates

The following components have been updated:

* Bumps Kubernetes to v1.19.10.

###<a id='1-10-2-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.1 are also in <%= vars.product_short %> v1.10.2. 
See the <%= vars.k8s_runtime_abbr %> v1.10.1 [Known Issues](#1-10-1-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>


<hr>
#### <a id="1-10-2-runc-node-notready"></a> Nodes with More Than 30 Stateful Pods Are in a NotReady State

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.3](#1-10-3-features).

<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
    or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.10.2.
</p>

**Symptom**  

Nodes that have more than 50 Pods or more than 30 stateful Pods are in a `NotReady` state, 
and you see the following errors in kubelet logs:

```
Error syncing pod ... skipping: rpc error: code = DeadlineExceeded desc = context deadline exceeded
skipping pod synchronization - PLEG is not healthy: pleg was last seen active...
skipping pod synchronization - PLEG is not healthy: pleg was last seen active...
failed to collect filesystem stats - rootDiskErr: could not stat .. to get inode usage: stat ...: no such file or directory, extraDiskErr: could not stat
```

**Explanation**

The runc component has introduced instability into nodes consisting of 50 or more Pods or 30 or more statefulset Pods. 
For more information, see [loading seccomp filter: invalid argument](https://github.com/opencontainers/runc/issues/2865) 
in the runc GitHub repository.  

<hr>

## <a id="management-console-1-10-2"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.2 - Withdrawn

<p class="note warning"><strong>Warning:</strong> 
    This release has been removed from VMware Tanzu Network because of the issue:
    <a href="#1-10-2-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a>.
</p>

**Release Date**: May 21, 2021

### <a id="management-console-1-10-2-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.2</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>May 21, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.2</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.11</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.10</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.2.1</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.125</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
</table>

<br>
### <a id='management-console-1-10-2-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.2 are from <%= vars.k8s_runtime_abbr %> MC v1.10.1, v1.10.0, 
and from <%= vars.k8s_runtime_abbr %> MC v1.9.5 and earlier v1.9 patches.  


<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.10.2. 
For more information, see <a href="#1-10-2-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a> above.  
</p>

### <a id="management-console-1-10-2-features"></a>Features

<%= vars.product_short %> Management Console v1.10.2 updates include:  

* **[Bug Fix]** Fixes [On NSX-T v3.1 the Transport Zone and Edge Transport Node Switch Names Must be Identical](#1-10-0-node-names-match).  
* **[Bug Fix]** Fixes [Management Console Deletes Custom Workload Configurations](#management-console-1-10-0-addons-spec).  

### <a id="management-console-1-10-2-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.1 
are also in <%= vars.product_short %> Management Console v1.10.2. 
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.1 [Known Issues](#management-console-1-10-1-known-issues) below.

<p class="note warning"><strong>Warning:</strong> If you have nodes with more than 30 stateful Pods 
or nodes with a total of more than 50 Pods, do not upgrade to <%= vars.k8s_runtime_abbr %> v1.10.2. 
For more information, see <a href="#1-10-2-runc-node-notready">Nodes with More Than 30 Stateful Pods Are in a NotReady State</a> above.  
</p>

<hr>

## <a id="1-10-1"></a><%= vars.k8s_runtime_abbr %> v1.10.1

**Release Date**: April 12, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-10-1-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.1</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>April 12, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.9</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.8</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>
            Linux: v19.03.14<br>
            Windows: v19.03.14
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.1</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.33.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.22</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/863377"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service/#/releases/863377"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.34 or later</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,5487&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.1.3</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 

### <a id='1-10-1-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.1 are from <%= vars.k8s_runtime_abbr %> v1.10.0, 
and from <%= vars.k8s_runtime_abbr %> v1.9.5 and earlier v1.9 patches.


### <a id="1-10-1-features"></a>Features

This section describes new features and changes in <%= vars.product_short %> v1.10.1.  

* **[Bug Fix]** Fixes [Certain Linux Nodes Are Unable to Complete the Drain Process during a TKGI Upgrade](#bosh-stop-doesnt-drain).  
* **[Bug Fix]** Fixes [Windows Pods Are Unable to Complete the Drain Process during a TKGI Upgrade or Update](#1-10-0-windows-drain-error).  
* **[Bug Fix]** Fixes [TKGI CLI Resize and Update Cluster Commands Remove Network Profile CNI Configuration from a Cluster]
(#1-10-0-do-notuse-resize-cluster).
* **[Bug Fix]** Fixes [<%= vars.k8s_runtime_abbr %> CLI `get-credentials` Returns an od-broker" Error](#1-10-0-od-broker).  
* **[Bug Fix]** Fixes [Your Cluster Returns the Error 'PodCIDR is Empty for Node'](#1-10-0-stale-ip-problem).  
* **[Bug Fix]** Fixes [Network Profiles Does Not Support the `failover_mode` Parameter](#1-10-0-failover-mode).  
* **[Bug Fix]** Fixes [FQDNs in <%= vars.k8s_runtime_abbr %> API Commands Cannot Contain Uppercase Letters](#1-10-0-uppercase-bosh-dns).  
* **[Enhancement]** <%= vars.k8s_runtime_abbr %> v1.10.1 returns an error if a network profile configuration changes a parameter that does not support 
modification.  

#### <a id="1-10-1-component-updates"></a>Component Updates

The following components have been updated:

* Bumps Kubernetes to v1.19.4.

###<a id='1-10-1-known-issues'></a>Known Issues

Except where noted, the known issues in <%= vars.product_short %> v1.10.0 are also in <%= vars.product_short %> v1.10.1. 
See the <%= vars.k8s_runtime_abbr %> v1.10.0 [Known Issues](#1-10-0-known-issues) below.  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>


<hr>
#### <a id='1-10-1-drain-dynamic-pvs'></a> Workloads Using Dynamic PVs Must be Removed Before Deleting a Cluster

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.2](#1-10-2-features).

**Symptom**  

Your `tkgi delete-cluster` operation hangs while draining a worker VM containing a Pod bound to one or more dynamic persistent volumes (PVs).  

**Workaround** 

Before deleting the cluster, remove all workloads.

If you have already attempted to delete a cluster and your workloads with dynamic PVs have stopped, 
remove the dynamic PVs attached to the worker VMs in your cluster. 
For information about removing dynamic PVs from a worker VM, see 
[Workloads using dynamic PersistentVolumes (PVs) must be removed before deleting a cluster]
(https://kb.vmware.com/s/article/83403?lang=en_US&queryTerm=000083403) in the Knowledge Base.  

<hr>

## <a id="management-console-1-10-1"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.1

**Release Date**: April 12, 2021

### <a id="management-console-1-10-1-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.
</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.1</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>April 12, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.1</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.8</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.9</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.1.3</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.117</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.31 or later</td>
    </tr>
</table>

<br>
### <a id='management-console-1-10-1-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.1 are from <%= vars.k8s_runtime_abbr %> MC v1.10.0, 
and from <%= vars.k8s_runtime_abbr %> MC v1.9.5 and earlier v1.9 patches.  


### <a id="management-console-1-10-1-features"></a>Features

<%= vars.product_short %> Management Console v1.10.1 updates include:  

* **[Bug Fix]** Fixes [Management Console UI Does Not Open If the Management Console Uses Custom Certificates](#management-console-1-10-0-ui-customcerts).  
* **[Enhancement]** TKGI Management Console v1.10.1 can retrieve the transport zone of an NSX-T v3.1 edge node transport node. 
For more information, see [On NSX-T v3.1 the Transport Zone and Edge Transport Node Switch Names Must be Identical](#1-10-0-node-names-match).  

### <a id="management-console-1-10-1-known-issues"></a> Known Issues

Except where noted, the known issues in <%= vars.product_short %> Management Console v1.10.0 
are also in <%= vars.product_short %> Management Console v1.10.1. 
See the <%= vars.k8s_runtime_abbr %>  Management Console v1.10.0 [Known Issues](#management-console-1-10-0-known-issues) below.

<hr>

#### <a id="management-console-1-10-1-single-edge-node-auto-nat-mode"></a> <%= vars.k8s_runtime_abbr %> MC Does Not Support Single-Edge Node Configurations in Automated NAT Mode

<%# 
This issue is fixed in [< %= vars.k8s_runtime_abbr % > v1.10.8](#1-10-8-bug-fixes).
#%>
**Symptom**

The <%= vars.k8s_runtime_abbr %> Configuration view within <%= vars.k8s_runtime_abbr %> MC displays the following error:

```
Fail to configure NSX for TKGI: Traceback (most recent call last): File"scripts/nsx_automoaror.py", line 182, 
in &lt;module&gt; edgee_tzs |= extra_edge2_tzs TpeError: unsupported operand type(s) for |=:'dict' and 'dict'
```

<hr>

## <a id="1-10-0"></a><%= vars.k8s_runtime_abbr %> v1.10.0

**Release Date**: January 28, 2021  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

### <a id='1-10-0-snapshot'></a><a id='product-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.10.0</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>January 28, 2021</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.19.6</td>
    </tr>
    <tr>
        <td>CoreDNS</td>
        <td>v1.7.0+vmware.5</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>
            Linux: v19.03.14<br>
            Windows: v19.03.14
        </td>
    </tr>
    <tr>
        <td>etcd</td>
        <td>v3.4.13</td>
    </tr>
    <tr>
        <td>Metrics Server</td>
        <td>v0.3.6</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v3.1.0.1</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.31.0</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.5.21</td>
    </tr>
    <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    </tr>
    <tr>
        <td>VMware Cloud Foundation (VCF)</td>
        <td>v4.2.0</td>
    </tr>
    <tr>
        <td>Ops Manager</td>
        <td>To mitigate the Apache Log4j vulnerability <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a>,
        upgrade to <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24">Ops Manager v2.10.24</a> 
        or later as soon as possible. 
        See <a href="https://network.pivotal.io/products/pivotal-container-service#/releases/820908"><%= vars.product_network %>&#42;</a>.</td>
    </tr>
    <tr>
        <td>Xenial stemcells</td>
        <td>See <a href="https://network.pivotal.io/products/pivotal-container-service#/releases/820908"><%= vars.product_network %></a>.</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.29 or later</td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td rowspan=2>See <a href="https://interopmatrix.vmware.com/Interoperability?col=644,4803&row=0,">VMware Product Interoperability Matrices</a>.</td></td>
    </tr>
    <tr>
        <td>vSphere</td>
    </tr>
    <tr>
        <td>CSI Driver for vSphere</td>
        <td>v2.0.1</td>
    </tr>
    <tr>
        <td>Harbor</td>
        <td>v2.1.1</td>
    </tr>
    <tr>
        <td>Velero</td>
        <td><a href="https://my.vmware.com/en/group/vmware/downloads/details?downloadGroup=VELERO-142&productId=1113&rPId=58884">v1.4.2</a></td>
    </tr>
</table>
&#42; Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. 
For more information, see [v2.10.15](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15) 
and [v2.10.17](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17) in _Ops Manager v2.10 Release Notes_. 

### <a id='1-10-0-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.10.0 are from <%= vars.k8s_runtime_abbr %> v1.9.3 and earlier v1.9 patches.  


### <a id="1-10-0-breaking-changes"></a>Breaking Changes

<%= vars.k8s_runtime_abbr %> v1.10.0 has the following breaking changes:

* Fluent Bit has been upgraded to Fluent Bit v1.5.7:  

    * Previous versions of <%= vars.k8s_runtime_abbr %> have used Fluent Bit v1.3.4. 
    For information on the differences between the Fluent Bit v1.3.4 and v1.5.7 releases, see 
    [Upgrade Notes](https://docs.fluentbit.io/manual/installation/upgrade-notes) in the Fluent Bit documentation.  

    * By default, Fluent Bit v1.5.7 limits the size of Kubernetes log metadata to 32&nbsp;KB. 
    For more information, see [Some Kubernetes Logs Are Not Forwarded after Upgrading](#1-10-0-logs-not-forwarded) 
    in the <%= vars.k8s_runtime_abbr %> v1.10.0 Known Issues below.


### <a id="1-10-0-features"></a>Features

This section describes new features and changes in <%= vars.product_full %> v1.10.0.

* (Beta) Supports high availability (HA) mode in <%= vars.product_short %>.
You can now scale the number of VM instances for the following <%= vars.product_short %> control plane jobs:

    * <%= vars.product_short %> API and UAA
    * <%= vars.product_short %> database

    To configure HA (beta) for new <%= vars.k8s_runtime_abbr %> v1.10 installations, see [Resource Config](installing-vsphere.html#resource-config) in the _Installing_ topic for your IaaS.
    To configure HA (beta) for <%= vars.product_short %> v1.10 upgrades from v1.9, see [Upgrading Enterprise PKS](upgrade.html) or [Upgrading Enterprise PKS with NSX-T](upgrade-nsxt.html)
    and follow the instructions in _(Optional) Scale to <%= vars.k8s_runtime_abbr %> High Availability Mode_.
    <p class="note warning"><strong>Warning:</strong> HA mode is a beta feature. Do not scale your <strong><%= vars.k8s_runtime_abbr %> API</strong> or <strong><%= vars.k8s_runtime_abbr %> Database</strong> to more than one instance in production environments.</p>
* Removes **Wavefront Alert Recipient**, **Create pre-defined Wavefront alerts errand**, and **Delete pre-defined Wavefront alerts errand** from the <%= vars.product_short %> tile. For more information, see [<%= vars.k8s_runtime_abbr %>-Defined Wavefront Alerts Removed from the Tile](#1-10-0-wavefront-integration) below.
* **[Enhancement]** Reduced the possibility of <%= vars.k8s_runtime_abbr %> CLI `get-credentials` returning the error "_od-broker is processing a request for the same instance... please try again later_" during periods of intermittent latency.
* **[Enhancement]** Swap is now disabled by default. For more information, see [Swap Is Disabled by Default ](#1-10-0-swap-disabled) in _Breaking Changes_ below.
* **[Enhancement]** Improves error messages for cluster creation, update and upgrade failures. 
For more information, see [Cluster Creation, Update and Upgrade Failure Error Messages No Longer Truncated](#1-10-0-cluster-errors) in _Breaking Changes_ below.
* **[Security Fix]** Passes additional CIS Kubernetes Benchmarks. See [<%= vars.k8s_runtime_abbr %> Cluster Benchmarks](./security.html#benchmarks) for details.
* **[Bug Fix]** The VMware vRealize Log Insight Integration (vRLI) **Rate limiting** feature has been restored. For information about configuring vRLI rate limiting, see [Host Monitoring](installing-nsx-t.html#syslog) in _Installing <%= vars.product_short %> on vSphere with NSX-T_.
* **[Bug Fix]** Fixes [Your <%= vars.k8s_runtime_abbr %> Cluster Fails to Start After Changing Your Worker Node's Compute Profile AZ](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-2-compute-profile-az-worker).
* **[Bug Fix]** Fixes [<%= vars.k8s_runtime_abbr %> Upgrade or Install Fails with Error "x509: certificate relies on legacy Common Name field"](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-0-failed-upgrade). 
* **[Bug Fix]** Fixes [Cluster Creation Fails During the 'Creating Load Balancer' Step](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-0-401-403). 
* **[Bug Fix]** Fixes [Network Profile Required with Compute Profile](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-0-az-network-profile).  
* **[Bug Fix]** Fixes [Kubernetes Worker Nodes Run Out of Space](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-0-k8s-race-condition).
* **[Bug Fix]** Fixes [Compute Profile Dropped From Clusters During BOSH Upgrade](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-0-profile-bosh-upgrade).  

<%#
* **[Bug Fix]** Fixes [You Cannot Change a Master Node's AZ](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-0-compute-profile-az-master).  
%>

#### <a id="1-10-0-proxy"></a>Cluster-Specific Proxy Settings (NSX-T and AWS)

You can configure proxy settings specific to individual <%= vars.k8s_runtime_abbr %> clusters,
overriding the global settings in the <%= vars.k8s_runtime_abbr %> tile > **Networking** pane.
For more information, see [Configure Cluster Proxies](proxies-cluster.html).

#### <a id="1-10-0-antrea-cni"></a>Supports the Antrea CNI

<%= vars.product_short %> now provides the option to use the Antrea Container Network Interface (CNI) as
the CNI for new <%= vars.k8s_runtime_abbr %>-provisioned clusters. For more information about 
using Antrea as your CNI, see [About Upgrading from the Flannel CNI to the Antrea CNI](understanding-upgrades.html#cni) 
in _About <%= vars.product_short %> Upgrades_.

#### <a id="1-10-0-cert-rotate"></a>NSX-T Certificate Rotation

You can now rotate TKGI-provisioned Kubernetes cluster NSX-T TLS certificates using a TKGI CLI command. 
For more information, see [Certificate Rotation](nsxt-certs-rotate.html).

#### <a id="1-10-0-node-labels-and-taints"></a>Apply Persistent Node Labels and Node Taints Using Compute Profiles

On vSphere and vSphere with NSX-T, <%= vars.product_short %> supports applying persistent labels and taints to a Kubernetes node using Compute Profiles. 
For more information see [`node_pools` Block](compute-profiles-manage.html#worker-nodes) 
in _Creating and Managing Compute Profiles with the CLI (vSphere)_.

#### <a id="1-10-0-windows-ad-support"></a>Windows Worker Kubernetes Clusters Support Active Directory

Windows Server with Active Directory can now control access to <%= vars.k8s_runtime_abbr %> Windows worker-based Kubernetes clusters 
through integration with group Managed Service Account (gMSA). For more information, see [Authenticate Windows Clusters with Active Directory](gmsa.html).

#### <a id="1-10-0-wavefront-integration"></a> <%= vars.k8s_runtime_abbr %>-Defined Wavefront Alerts Removed from the Tile

<%= vars.k8s_runtime_abbr %> v1.10 removes the following configuration options from the Wavefront integration in the tile:

* **Create pre-defined Wavefront alerts errand**
* **Delete pre-defined Wavefront alerts errand**
* **Wavefront Alert Recipient**

If you want to enable pre-defined Wavefront alerts for <%= vars.k8s_runtime_abbr %> v1.10, configure your alert targets in Wavefront. For a list of available alerts, see [Predefined Alerts for the Integration](https://docs.wavefront.com/integrations_tkgi.html#predefined-alerts-for-the-integration).

If you enabled the **Create pre-defined Wavefront alerts errand** and **Wavefront Alert Recipient** in an earlier version of
<%= vars.k8s_runtime_abbr %> and you upgrade your environment to v1.10, you will continue to receive the
<%= vars.k8s_runtime_abbr %>-defined alerts. Uninstall these alerts in the Wavefront UI if you plan to configure alert targets for TKGI in Wavefront, by following the instructions below:

1. In Wavefront, navigate to **Integrations** > **VMware Tanzu Kubernetes Grid Integrated Edition**.
1. Click the **Alerts** tab and then click **Uninstall All**.

#### <a id="1-10-0-component-updates"></a>Component Updates

The following components have been updated:

* Bumps Kubernetes to v1.19.4.
* Bumps Xenial stemcell to v621.94.
* Bumps NCP to v3.1.0.17170700.
* Bumps PXC to v0.31.0.
* Bumps UAA to v74.5.21.

### <a id="1-10-0-breaking-changes"></a> Breaking Changes

TKGI v1.10.0 has the following breaking changes. 

#### <a id='1-10-0-nsxt-3'></a> <%= vars.k8s_runtime_abbr %> v1.10 Is Not Compatible with NSX-T v2.5.2 or Earlier 

<%= vars.k8s_runtime_abbr %> v1.10 is not compatible with NSX-T v2.5.2 or earlier. 
If you are deploying <%= vars.k8s_runtime_abbr %> v1.10 to NSX-T, your NSX-T version must be 
NSX-T v3.0.1 or later. For more information about upgrading NSX-T and <%= vars.k8s_runtime_abbr %>, 
see [Upgrade Order for Tanzu Kubernetes Grid Integrated Edition Environments on vSphere](upgrade-scenarios.html) 
and [Upgrading Tanzu Kubernetes Grid Integrated Edition (NSX-T Networking)](upgrade-nsxt.html).  

#### <a id='1-10-0-swap-disabled'></a> Swap Is Disabled by Default  

Swap is now disabled on all worker nodes. 
In previous versions of <%= vars.product_short %>, Swap was enabled, but upstream Kubernetes does not support this setting. 
You cannot enable swap through the TKGI CLI, and manually configuring swap is not permitted. 

#### <a id='1-10-0-cluster-errors'></a> Cluster Creation, Update and Upgrade Failure Error Messages No Longer Truncated

<%= vars.product_short %> v1.10 includes improved error messages for cluster creation, update and upgrade failures. 
Previously, error messages greater than 128 bytes were truncated. In <%= vars.k8s_runtime_abbr %> v1.10 
logged cluster creation and upgrade failure error messages are no longer truncated. 

#### <a id='1-10-0-node-names-match'></a> On NSX-T v3.1 the Transport Zone and Edge Transport Node Switch Names Must be Identical 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.2](#1-10-2-features) and
[<%= vars.k8s_runtime_abbr %> MC v1.10.2](#management-console-1-10-2-features).  

The NSX-T Transport Zone and Edge Transport Node switch names must be identical if <%= vars.k8s_runtime_abbr %> v1.10 is installed on NSX-T v3.1. 
For more information, see [Configuring NSX-T Data Center v3.1 Transport Zones and Edge Node Switches for <%= vars.product_short %>]
(nsxt-3-1-install-delta.html).

#### <a id='1-10-0-san-required'></a> Kubectl Authentication Requires a Certificate Generated With a SAN

Kubernetes now requires the certificate used for Kubernetes authentication to be generated with a Subject Alternate Name (SAN). 
If you are using OIDC for Kubernetes authentication, the certificate serving the OIDC provider must include a SAN.  

If you provide Kubernetes with a certificate generated without a SAN, kubectl commands will fail with an error: "_You must be logged in to the server (Unauthorized)_".  

###<a id='1-10-0-known-issues'></a>Known Issues

<%= vars.k8s_runtime_abbr %> v1.10.0 has the following known issues:  

<p class="note warning"><strong>Warning:</strong> VMware recommends that you take steps to mitigate
the Apache Log4j vulnerabilities <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a> and <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45046">CVE-2021-45046</a> as soon as possible. 
For more information, see <a href="#1-10-0-log4j-cve-2021-44228">Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046</a> below.
</p>

<p class="note warning"><strong>Warning:</strong> Do not use <%= vars.k8s_runtime_abbr %> with Ops Manager v2.10.15 or with Ops Manager v2.10.17 and vSphere CPIv2. For more information, see 
<a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-15">v2.10.15</a> and <a href="https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-17">v2.10.17</a> 
in <i>Ops Manager v2.10 Release Notes</i>. 
</p>


<hr>
#### <a id="1-10-0-nsxt-302-310"></a> Pods Stop After Upgrading From NSX-T v3.0.2 to v3.1.0 on vSphere 7.0 and 7.0.1

**Symptom**

Your TKGI-provisioned Pods stop after upgrading from NSX-T v3.0.2 to NSX-T v3.1.0 on vSphere 7.0 and 7.0.1.

**Explanation**

For information, see [Issue 2603550: Some VMs are vMotioned and lose network connectivity during UA nodes upgrade]
(https://docs.vmware.com/en/VMware-NSX-T-Data-Center/3.1/rn/VMware-NSX-T-Data-Center-311-Release-Notes.html#2603550) in the _VMware NSX-T Data Center 3.1.1 Release Notes_.

**Workaround**

To avoid the loss of network connectivity during UA node upgrade, ensure DRS is set to manual mode during your upgrade from NSX-T v3.0.2 to v3.1.0.

If you upgraded to NSX-T v3.1.0 with DRS in automation mode, run the following on the affected Pods' master VMs to restore Pod connectivity:

```
monit restart ncp
```

For more information on upgrading NSX-T v3.0.2 to NSX-T v3.1.0, see [Upgrade NSX-T Data Center to v3.0 or v3.1](upgrade-nsxt.html#upgrade-nsxt).  

<hr>
#### <a id="1-10-0-azure-apply-changes"></a> Error: Could Not Execute "Apply-Changes" in Azure Environment

**Symptom**

After clicking **Apply Changes** on the <%= vars.k8s_runtime_abbr %> tile in an Azure environment, you experience
an error '_...could not execute "apply-changes"..._' with either of the following descriptions:

* _{"errors":{"base":["undefined method 'location' for nil:NilClass"]}}_
* _FailedError.new("Resource Groups in region '#{location}' do not support Availability Zones"))_

For example:

```
INFO | 2020-09-21 03:46:49 +0000 | Vessel::Workflows::Installer#run | Install product (apply changes)
2020/09/21 03:47:02 could not execute "apply-changes": installation failed to trigger: request failed: unexpected response from /api/v0/installations:
HTTP/1.1 500 Internal Server Error
Transfer-Encoding: chunked
Cache-Control: no-cache, no-store
Connection: keep-alive
Content-Type: application/json; charset=utf-8
Date: Mon, 21 Sep 2020 17:51:50 GMT
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Pragma: no-cache
Referrer-Policy: strict-origin-when-cross-origin
Server: Ops Manager
Strict-Transport-Security: max-age=31536000; includeSubDomains
X-Content-Type-Options: nosniff
X-Download-Options: noopen
X-Frame-Options: SAMEORIGIN
X-Permitted-Cross-Domain-Policies: none
X-Request-Id: f5fc99c1-21a7-45c3-7f39
X-Runtime: 9.905591
X-Xss-Protection: 1; mode=block

44
{"errors":{"base":["undefined method `location' for nil:NilClass"]}}
0
```

**Explanation**

The Azure CPI endpoint used by Ops Manager has been changed and
your installed version of Ops Manager is not compatible with the new endpoint.

**Workaround**

Run the following Ops Manager CLI command:

```
om --skip-ssl-validation --username USERNAME --password PASSWORD --target https://OPSMAN-API curl --silent --path /api/v0/staged/director/verifiers/install_time/IaasConfigurationVerifier -x PUT -d '{ "enabled": false }'
```

Where:

* `USERNAME` is the account to use to run Ops Manager API commands.
* `PASSWORD` is the password for the account.
* `OPSMAN-API` is the IP address for the Ops Manager API

For more information, see [Error 'undefined method location' is received when running Apply Change on Azure]
(https://community.pivotal.io/s/article/undefined-method-location-when-running-Apply-Change-on-Azure?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>
#### <a id="1-10-0-vrops-windows-clusters"></a> VMware vRealize Operations Does Not Support Windows Worker-Based Kubernetes Clusters

VMware vRealize Operations (vROPs) does not support Windows worker-based Kubernetes clusters and cannot be used to
manage <%= vars.k8s_runtime_abbr %>-provisioned Windows workers.

<hr>
#### <a id='1-10-0-wavefront-no-win'></a><%= vars.k8s_runtime_abbr %> Wavefront Requires Manual Installation for Windows Workers

To monitor Windows-based worker node clusters with a Wavefront collector and proxy, you must first install Wavefront on the clusters manually, using Helm.
For instructions, see the [Wavefront](windows-monitoring.html#wavefront) section of the _Monitoring Windows Worker Clusters and Nodes_ topic.

<hr>
#### <a id='1-10-0-ping'></a>Pinging Windows Worker Kubernetes Clusters Does Not Work

<%= vars.k8s_runtime_abbr %>-provisioned Windows worker-based Kubernetes clusters inherit a Kubernetes limitation that prevents
outbound ICMP communication from workers.
As a result, pinging Windows workers does not work.

For information about this limitation, see [Limitations > Networking](https://kubernetes.io/docs/setup/production-environment/windows/intro-windows-in-kubernetes/#networking-1)
in the _Windows in Kubernetes_ documentation.

<hr>
#### <a id="1-10-0-windows-velero-limitations"></a> Velero Does Not Support Backing Up Stateful Windows Workloads

You can use Velero to backup stateless <%= vars.k8s_runtime_abbr %>-provisioned Windows workers.
Velero can back up stateless Windows workloads only, and cannot be used to backup stateful Windows applications.
For more information, see [Velero on Windows](https://velero.io/docs/v1.4/basic-install/#velero-on-windows) in
_Basic Install_ in the Velero documentation.

<hr>
#### <a id="1-10-0-tmc-on-gcp"></a>Tanzu Mission Control Integration Not Supported on GCP

<%= vars.k8s_runtime_abbr %> on Google Cloud Platform (GCP) does not support
Tanzu Mission Control (TMC) integration, which is configured in
the **<%= vars.product_tile %>** tile > the **Tanzu Mission Control (Experimental)** pane.

If you intend to run <%= vars.k8s_runtime_abbr %> v1.9 on GCP,
skip this pane when configuring the <%= vars.product_tile %> tile.

<hr>
#### <a id='1-10-0-tmc-restic'></a>TMC Data Protection Feature Requires Privileged <%= vars.k8s_runtime_abbr %> Containers
TMC Data Protection feature supports privileged <%= vars.k8s_runtime_abbr %> containers only.
For more information, see [Plans](installing-vsphere.html#plans) in the _Installing TKGI_ topic for your IaaS.

<hr>
#### <a id="1-10-0-profile-no-win-gmsa"></a>Windows Worker Kubernetes Clusters with Group Managed Service Account Do Not Support Compute Profiles 

Windows worker-based Kubernetes clusters integrated with group Managed Service Account (gMSA) cannot be managed using compute profiles.  

<hr>
#### <a id="1-10-0-profile-no-win-flannel"></a> Windows Worker Kubernetes Clusters on Flannel Do Not Support Compute Profiles

On vSphere with NSX-T networking you can use compute profiles with both Linux and Windows worker&#8209;based Kubernetes clusters.
On vSphere with Flannel networking, you can apply compute profiles only to Linux clusters.

<hr>
#### <a id="1-10-0-old-profile-no-cli"></a><%= vars.k8s_runtime_abbr %> Does Not Support Managing Pre-<%= vars.k8s_runtime_abbr %> v1.9 Compute Profiles

Compute profiles created in <%= vars.k8s_runtime_abbr %> v1.8 and earlier have a different format
from current compute profiles.

<%= vars.k8s_runtime_abbr %> v1.10 does not support resizing, updating, upgrading, or
managing compute profiles using `tkgi` CLI compute profile commands,
on a cluster that has a compute profile created in <%= vars.k8s_runtime_abbr %> v1.8 and earlier.

<hr>
#### <a id="1-10-0-profile-resize-down"></a>TKGI CLI Does Not Prevent Reducing the Control Plane Node Count

TKGI CLI does not prevent accidentally reducing a cluster's control plane node count using a compute profile.

<p class="note warning"><strong>Warning:</strong>
    Reducing a cluster's control plane node count can destroy the cluster.
    Do not scale out or scale in existing master nodes by reconfiguring the TKGI tile or by using a compute profile.
    Reducing a cluster's number of control plane nodes may remove a master node and cause the cluster to become inactive.
</p>

<hr>
#### <a id="1-10-0-in-windows-notready-nodes"></a> Windows Cluster Nodes Not Deleted After VM Deleted

**Symptom**

After you delete a VM using the management console of your infrastructure provider, you notice a Windows worker node
that had been on that VM is now in a `notReady` state.

**Solution**

1. To identify the leftover node:

    ```
    kubectl get no -o wide
    ```
1. Locate nodes on the returned list that are in a `notReady` state and have the same IP address as another node in the list.
1. To manually delete a `notReady` node:

    ```
    kubectl delete node NODE-NAME
    ```
    Where `NODE-NAME` is the name of the node in the `notReady` state.

<hr>
#### <a id="1-10-0-oidc-response-header"></a>502 Bad Gateway After OIDC Login

**Symptom**

You experience a "502 Bad Gateway" error from the NSX load balancer after you log in to OIDC.

**Explanation**

A large response header has exceeded your NSX-T load balancer maximum
response header size. The default maximum response header size is 10,240 characters and should
be resized to 50,000.

**Workaround**

If you experience this issue, manually reconfigure your NSX-T `request_header_size`
and `response_header_size` to 50,000 characters.
For information about configuring NSX-T default header sizes,
see [OIDC Response Header Overflow](https://community.pivotal.io/s/article/OIDC-Response-Header-overflow) in the Knowledge Base.

<hr>
#### <a id='1-10-0-windows-proxy'></a> Difficulty Changing Proxy for Windows Workers

You must configure a global proxy in the <%= vars.product_tile %> tile > **Networking** pane before you create any Windows workers that use the proxy.

You cannot change the proxy configuration for Windows workers in an existing cluster.

<hr>
#### <a id='1-10-0-http-proxy-password'></a> Character Limitations in HTTP Proxy Password

For vSphere with NSX-T, the HTTP Proxy password field does not support the following special characters: `&` or `;`.

<hr>
#### <a id='1-10-0-harbor-storage-config'></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```

**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>
#### <a id='1-10-0-antrea-logging-interupt'></a> Unexplained Errors After Interrupting a Log Stream When Using Antrea Networking 

**Symptom**

While using Antrea networking, you observe unexplainable errors after you interrupt a log stream started using `kubectl logs -f POD-NAME`. 
The errors could include any of the following:  

* kubectl returns the error: "_Error from server (TooManyRequests): the server has received too many_".   
* `kube-apiserver` returns an http code `429`. 

**Explanation**

When using Antrea networking there is a chance that `konnectivity-agent` will become unstable after interrupting your kubectl log steam.

**Workaround**

To resolve the issue:  

1. Log in to the master VM:

    ```
    bosh -d DEPLOYMENT-NAME ssh master/0
    ````

1. Change to root:

    ```
    sudo -i
    ```

1. Restart `proxy-server`:

    ```
    monit restart proxy-server
    ```

1. Wait for `proxy-server` restart:

    ```
    monit summary
    ```

<hr>
#### <a id='1-10-0-resizing-worker-nodes'></a> Ingress Controller Statefulset Fails to Start After Resizing Worker Nodes

**Symptom**  

Permissions are removed from your clusters files and processes after resizing the persistent disk 
during a cluster upgrade. The ingress controller statefulset fails to start.

**Explanation**  

When resizing a persistent disk, Bosh migrates the data from the old disk to the new disk but 
does not copy the files extended attributes.

**Workaround**  

To resolve the problem, complete the steps in 
[Ingress controller statefulset fails to start after resize of worker nodes with permission denied]
(https://community.pivotal.io/s/article/5000e00001nCJxT1603094435795?language=en_US)
in the VMware Tanzu Knowledge Base.

<hr>
#### <a id="1-10-0-security-group"></a>Azure Default Security Group Is Not Automatically Assigned to Cluster VMs

**Symptom**

You experience issues when configuring a load balancer for a multi-master Kubernetes cluster or creating a service of type `LoadBalancer`.
Additionally, in the Azure portal, the **VM** > **Networking** page does not display
any inbound and outbound traffic rules for your cluster VMs.

**Explanation**

As part of configuring the <%= vars.product_tile %> tile for Azure, you enter **Default Security Group** in the **Kubernetes Cloud Provider** pane.
When you create a Kubernetes cluster, <%= vars.product_short %> automatically assigns this security group to each VM in the cluster.
However, on Azure the automatic assignment may not occur.

As a result, your inbound and outbound traffic rules defined in the security group are not applied to the cluster VMs.

**Workaround**

If you experience this issue, manually assign the default security group to each VM NIC in your cluster.

<hr>
#### <a id='1-10-0-uuid-length'></a> One Plan ID Longer than Other Plan IDs

**Symptom**

One of your plan IDs is one character longer than your other plan IDs.

**Explanation**

In <%= vars.k8s_runtime_abbr %>, each plan has a unique plan ID.
A plan ID is normally a UUID consisting of 32 alphanumeric characters and 4 hyphens.
However, the **Plan 4** ID consists of 33 alphanumeric characters and 4 hyphens.

**Solution**

You can safely configure and use **Plan 4**.
The length of the **Plan 4** ID does not affect the functionality of **Plan 4** clusters.

If you require all plan IDs to have identical length, do not activate or use **Plan 4**.

<hr>
#### <a id='1-10-0-uppercase-bosh-dns'></a> FQDNs in <%= vars.k8s_runtime_abbr %> API Commands Cannot Contain Uppercase Letters

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).

**Symptom**

<%= vars.k8s_runtime_abbr %> CLI commands fail with error:

```
Error: An error occurred in the PKS API when processing
```

**Explanation**

BOSH DNS, which <%= vars.k8s_runtime_abbr %> uses for its internal DNS, does not support uppercase letters in FQDNs.

**Workaround**

Use only lowercase letters in FQDNs that you assign to your <%= vars.control_plane %> VM in <%= vars.k8s_runtime_abbr %>. 

<%#
<%= vars.control_plane %     > logs include errors like:

```
Caused by: java.net.UnknownHostException: fqdn.example.com: Name or service not known
        at java.base/java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]
        at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:929) ~[na:na]
```

The fully-qualified domain names (FQDNs) that you use for vCenter or the <%= vars.control_plane %       > VM contain uppercase letters.

Running `nslookup` from your <%= vars.control_plane %       > VM succeeds with the FQDN with uppercase letters, but fails when you convert them to lowercase.

**Explanation**

BOSH DNS, which <%= vars.k8s_runtime_abbr %     > uses for its internal DNS, does not support uppercase letters in FQDNs.

**Workaround**

Use only lowercase letters in FQDNs that you assign to your vCenter or <%= vars.control_plane %     > VM in <%= vars.k8s_runtime_abbr %     >.  

#%>

<hr>
#### <a id='1-10-0-whitespace-pksapi'></a> The <%= vars.control_plane %> FQDN Must Not Include Trailing Whitespace

**Symptom**

Your <%= vars.k8s_runtime_abbr %> logs include the following error:

```
'uaa'. Errors are:- Error filling in template 'uaa.yml.erb' (line 59: Client redirect-uri is invalid: uaa.clients.pks_cli.redirect-uri Client redirect-uri is invalid: uaa.clients.pks_cluster_client.redirect-uri)
```

**Explanation**

The <%= vars.control_plane %> fully-qualified domain name (FQDN) for your cluster contains leading or trailing whitespace.  

**Workaround**

Do not include whitespace in the <%= vars.k8s_runtime_abbr %> tile **API Hostname (FQDN)** field.  

<hr>
#### <a id='1-10-0-od-broker'></a> <%= vars.k8s_runtime_abbr %> CLI `get-credentials` Returns an od-broker" Error

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).  
The probability of encountering this issue has been reduced in [<%= vars.k8s_runtime_abbr %> v1.10.0](#1-10-0-features).  

**Symptom**

The <%= vars.k8s_runtime_abbr %> CLI `get-credentials` occasionally returns the error "_od-broker is processing a request for the same instance... please try again later_" during periods of intermittent latency.

<hr>
#### <a id="1-10-0-bosh-stop-doesnt-drain"></a>Certain Linux Nodes Are Unable to Complete the Drain Process during a TKGI Upgrade

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).

**Symptom**

You may experience one or more of the following:  

* Your cluster upgrades are interrupted when upgrading the second node of a three-node Pod.  
* Pod eviction fails when either `bosh stop` or `tkgi upgrade-cluster` initiates kubectl drain.

**Explanation**

Ovs drain has finished, removing Pod networking before kubelet has completely drained the Pod. 
Draining a worker node has triggered the removal of a container interface on the node, 
blocking all network traffic from the Pod.

<hr>
#### <a id='1-10-0-do-notuse-resize-cluster'></a>TKGI CLI Resize and Update Cluster Commands Remove Network Profile CNI Configuration from a Cluster

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).

**Symptom**

In <%= vars.k8s_runtime_abbr %> v1.10.0, the network profile CNI configuration is dropped 
when updating the cluster using the `tkgi resize` or `tkgi update-cluster` CLI commands.  

**Solution**

To restore a CNI network profile configuration:  

1. Upgrade <%= vars.k8s_runtime_abbr %> to v1.10.1 or later.  
1. Upgrade your <%= vars.k8s_runtime_abbr %>-provisioned cluster to <%= vars.k8s_runtime_abbr %> v1.10.1 or later.  
1. To restore the network profile CNI configuration to your cluster, modify the cluster using either of the following:
    * The <%= vars.k8s_runtime_abbr %> CLI `resize` command:  

        ```
        tkgi resize CLUSTER-NAME
        ```
        Where `CLUSTER-NAME` is the name of your cluster.  
        * The <%= vars.k8s_runtime_abbr %> CLI `update-cluster` command:  
    * The <%= vars.k8s_runtime_abbr %> CLI `update-cluster` command:  

        ```
        tkgi update-cluster CLUSTER-NAME --network-profile PROFILE-NAME
        ```
        Where:
        * `CLUSTER-NAME` is the name of your cluster.
        * `PROFILE-NAME` is the name of the network profile previously applied to the cluster.

<hr>
#### <a id='1-10-0-stale-ip-problem'></a> Your Cluster Returns the Error 'PodCIDR is Empty for Node'

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).

**Symptom**

While using Antrea as your CNI, your cluster experiences connectivity issues, 
such as the overlay network failing to communicate with worker nodes. 
Your logs include errors, such as "_PodCIDR is empty for Node..._",
even though podCIDR is correctly configured and all Pods in your cluster have a running status.  

**Explanation**  

There is a stale IP address in a Pod in your cluster and the current version of Antrea cannot remove it.

**Workaround**

To remove a stale IP address:  

1. To locate a stale IP address:
    1. Verify the Antrea gateway interface has more than one IP address.
    1. If it does have more than one IP address, review the logs for when the IP addresses are initialized. 
    The last Antrea gateway interface IP address in the log is the only valid IP address for the interface. The preceding IP address(es) are stale
     and should be removed.  
1. To delete a stale IP address, run the following:

    ```
    ip addr del IP-ADDRESS dev GATEWAY-NAME
    ```
    Where:
    * `IP-ADDRESS` is the IP address to be removed.
    * `GATEWAY-NAME` is the name of your Antrea gateway.

    For example:
    <pre class="terminal">
    ip addr del 10.200.1.1/24 dev2 antrea-gw0
    </pre>

<hr>
#### <a id='1-10-0-failover-mode'></a> Network Profiles Does Not Support the `failover_mode` Parameter

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).  

**Symptom**

When you attempt to resize or update a cluster, the operation fails with logged errors similar to the following:  

```
Error processing update parameters: Unexpected field 'failover_mode'
```

**Explanation** 

The `failover_mode` network profile parameter has been incorrectly flagged as an unsupported parameter.  

**Workaround**  

To remove the `failover_mode` parameter from a network profile:  

1. Create a copy of the network profile configuration file used by your cluster.  
1. Remove the `failover_mode` parameter from the copy of the configuration file. 
For example, remove:  

    ```
    "failover_mode":"PREEMPTIVE",
    ```
1. Update the network profile for the cluster using the revised configuration file.  

You can now resize your cluster.  

<hr>
#### <a id='1-10-0-windows-drain-error'></a> Windows Pods Are Unable to Complete the Drain Process during a TKGI Upgrade or Update

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.1](#1-10-1-features).

**Symptom**

While upgrading or updating a Windows worker node, 
the procedure logs errors similar to the following and never completes:  

```
run cordon_node
node/95eefa70-2028-23vv-8b22-420ece043e21 cordoned
Successfully cordon_node
run drain_kubelet
node/95eefa70-2028-23vv-8b22-420ece043e21 already cordoned
node/95eefa70-2028-23vv-8b22-420ece043e21 drained

Successfully drain_kubelet
checking for attached PVs...
read non-k8s disk info from file
2 disks still attached
2 disks still attached
2 disks still attached
```

**Explanation**  

The drain process was unsuccessful because Windows Host Compute Service (HCS) created a virtual ephemeral disk 
for each container and DaemonSet cant be drained. 
For more information, see [How Daemon Pods are scheduled]
(https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/#how-daemon-pods-are-scheduled) 
in the Kubernetes documentation.  

<hr>
#### <a id='1-10-0-import-single-cert'></a> The <%= vars.control_plane %> Does Not Import the Current <%= vars.k8s_runtime_abbr %> CA Certificates 

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.2](#1-10-2-features).

**Symptom**

After rotating your <%= vars.k8s_runtime_abbr %> CA certificates, you notice the following:

* When using the <%= vars.control_plane %>, SSL authentication returns the following error and fails:  

    ```
    None of the TrustManagers trust this certificate chain executing POST https://100.104.252.16:8443/oauth/token
    ```
* The keystore file at `/var/vcap/jobs/pks-api/config/cacerts.jks`, contains only a single, stale certificate.

**Explanation** 

The keystore file used by the <%= vars.control_plane %> has not been updated with current CA certificates.  

<%#
**Workaround**  

To update the keystore file with current CA certificates:  
#%>

<hr>
#### <a id='1-10-0-db-down-after-vm-stopped'></a> Database Cluster Stops After a DB Instance Is Stopped 

**Symptom**

After you stop one instance in a multiple-instance database cluster, the cluster stops, 
or communication between the remaining databases times out, and the entire cluster becomes unreachable.

The following might be in your UAA log:

```
WSREP has not yet prepared node for application use
```

**Explanation** 

The database cluster is unable to recover automatically because a member is no longer available to reconcile quorum. 

<hr>
#### <a id='1-10-0-windows-dynamic-pvs'></a> Windows Workloads With Attached Dynamic PVs Must Be Removed before Deleting a Cluster

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.4](#1-10-4-features).

**Symptom**  

Your `tkgi delete-cluster` operation hangs while draining a Windows worker VM 
containing a Pod bound to one or more dynamic persistent volumes (PVs).  

**Workaround** 

Before deleting your Windows cluster, remove all workloads.  

<%#  #178899769
<hr>
#### <a id="1-10-0-tls-prevents-log-forwarding"></a>Logs Do Not Forward When Using logsink with TLS Enabled


This issue is fixed in [<%= vars.k8s_runtime_abbr % > v1.10.2](#1-10-2-features).


While TLS is enabled, you are unable to forward logs using logsink. 
For example, while TLS is disabled, namespace logs successfully forward to syslog using logsink, 
but while TLS is enabled the logs no longer forward.  
#%>

<hr>
#### <a id='1-10-0-eight-size-error'></a> NSX-T Pre-Check Errand Fails Due to Edge Node CPU Memory Configuration

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.2](#1-10-2-features).

**Symptom**

You have configured your NSX-T Edge Node VM as `medium` size,
and the NSX-T Pre-Check Errand fails with the following error:
"_ERROR: NSX-T Precheck failed due to Edge Node ... memory is less than 8GB_".

**Explanation**

The NSX-T Pre-Check Errand has failed because the NSX-T Edge Node has less than 8GB of available memory.

<hr>
#### <a id='1-10-0-eight-cores-error'></a> NSX-T Pre-Check Errand Fails Due to Edge Node CPU Count Configuration

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.8.0](https://docs.pivotal.io/tkgi/1-8/release-notes.html#1-8-0-features) and later 
and was incorrectly included in the <%= vars.k8s_runtime_abbr %> v1.10 Release Notes.

**Symptom**

You have configured your NSX-T Edge Node VM as `medium` size,
and the NSX-T Pre-Check Errand fails with the following error:
"_ERROR: NSX-T Precheck failed due to Edge Node ... no of cpu cores is less than 8_".

**Explanation**

The NSX-T Pre-Check Errand is erroneously returning the "_cpu cores is less than 8_" error.

**Solution**

You can safely configure your NSX-T Edge Node VMs as `medium` size and ignore the error.  

<hr>
#### <a id='1-10-0-fluentbit-clusterlogsink'></a> Fluent Bit ClusterLogSink Returns 'TCP Connection Failed' While CEIP Telemetry Services Are Disabled

<%# This issue is fixed in [< %= vars.k8s_runtime_abbr % > v1.10.4](#1-10-4-features). #%>

**Symptom**  

Fluent Bit ClusterLogSink logs the errors "_TCP connection failed_" and "_no upstream connections available_" 
after you disable CEIP Telemetry services:

```
[2020/10/14 10:38:50] [error] [io] TCP connection failed: telemetry.pks.internal:24224 (Connection timed out)
[2020/10/14 10:38:50] [error] [out_fw] no upstream connections available
[2020/10/14 10:41:08] [error] [io] TCP connection failed: telemetry.pks.internal:24224 (Connection timed out)
[2020/10/14 10:41:08] [error] [out_fw] no upstream connections available
[2020/10/14 10:43:51] [error] [io] TCP connection failed: telemetry.pks.internal:24224 (Connection timed out)
[2020/10/14 10:43:51] [error] [out_fw] no upstream connections available
[2020/10/14 10:43:51] [ warn] [engine] Task cannot be retried: task_id=0 thread_id=2 output=forward.0
```

**Explanation** 

Fluent Bit intermittently attempts to connect to the Telemetry Server during ClusterLogSink. 
The connection attempts fail while the CEIP Telemetry services are disabled, 
and Fluent Bit logs the failed connection attempts.  

<hr>
#### <a id='1-10-0-ncp-port-protocol-limit'></a> Cluster Fails to Restart

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.4](#1-10-4-features).  

**Symptom**  

A stopped cluster fails to restart and you see the following error in the NSX Container Plug-in (NCP) logs:

```
Response body {'httpStatus': 'BAD_REQUEST', 'module_name': 'nsx-search', 'error_code': 60513, 'error_message': 'The result set is too large. Please refine the search criteria.'}
```

**Explanation** 

This problem occurs on clusters with a network policy with more than twelve port-protocol fields.

**Workaround**

Modify the cluster network policy to have twelve or fewer port-protocol fields.

<hr>
#### <a id='1-10-0-ncp-not-in-vrli'></a> You Cannot Use vRealize Log Insight (vRLI) to Monitor NCP

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.4](#1-10-4-features).  

**Symptom**  

vRLI monitoring does not include NCP stdout or stderror.  

**Explanation** 

A bug in the vRLI configuration prevents inclusion of NCP stdout and stderror in vRLI.

**Workaround**

To write NCP logs for a cluster to vRLI:  

1. Confirm you have admin access to the master node.
1. Open `/var/vcap/jobs/fluentd/config/config.d/nsx-t.conf`.
1. Replace:  

    ```
    expression /^(?<num>[\w]+) (?<time>[^ ]+) (?<nsx_uuid>[^ ]+) (?<nsx_component>[^ ]+) (?<pid>[^ ]+) - \[.* level="(?<severity>[^\"]+)".*\] (?<message>.+)/
    ```

    with: 

    ```
    expression /^(?<time>[^ ]+) (?<nsx_uuid>[^ ]+) (?<nsx_component>[^ ]+) (?<pid>[^ ]+) - \[.* level="(?<severity>[^\"]+)".*\] (?<message>.+)/
    ```

<p class="note"><strong>Note</strong>: This workaround affects only the cluster you modified and does not persist.
</p>

<hr>
#### <a id='1-10-0-creating-two-windows-clusters-fails'></a> Creating Two Windows Clusters at the Same Time Fails

**Symptom**

The first time that you try to create two Windows clusters at the same time, the creation of one of
the clusters fails. If you run `pks cluster CLUSTER-NAME` to examine the last action taken on the
cluster, you see the following:

<pre class="terminal">
Last Action: Create
Last Action State: failed
Last Action Description: Instance provisioning failed: There was a problem completing your request.
. . .
operation: create, error-message: Failed to acquire lock
. . .
locking task id is 111, description: 'create deployment'
</pre>

**Explanation**

This is a known issue that occurs the first time that you create two Windows clusters concurrently.

**Workaround**

Recreate the failed cluster. This issue only occurs the first time that you create two Windows
clusters concurrently.  

<hr>
#### <a id='1-10-0-fluentd-log-overflow'></a> The <%= vars.k8s_runtime_abbr %> API VM fluentd.stdout.log Grows While vRealize Log Insight is Disabled

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.4](#1-10-4-features).  

**Symptom**  

While vRealize Log Insight (vRLI) is disabled, the log for `fluentd.stdout` on the <%= vars.k8s_runtime_abbr %> API VM
grows quite large and rolls over frequently.


**Explanation** 

The fluentd job on the <%= vars.k8s_runtime_abbr %> API VM automatically starts when vRLI is disabled. 
This fluentd job runs continuously, frequently writing inaccessible hostname errors to stdout 
for the non-existent vRLI endpoint. 
The fluentd stdout on the <%= vars.k8s_runtime_abbr %> API VM is logged in: 
`/var/vcap/sys/log/pks-vrli-control-plane-fluentd/fluentd.stdout.log`.


<hr>
#### <a id='1-10-0-dual-wavefront-collectors'></a> Wavefront Collector is Duplicated or Not Collecting from <%= vars.k8s_runtime_abbr %> Namespaces

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.5](#1-10-5-features).

**Symptom**

After upgrading <%= vars.k8s_runtime_abbr %> to <%= vars.k8s_runtime_abbr %> v1.10.0 or later, you observe that two Wavefront collectors are running instead of one. 
If one of the collectors stops, the remaining collector alternates between collecting metrics as itself and as the stopped collector. 
The `pks.kubernetes.daemonset.` and `pks.kubernetes.deployment.` namespaces may stop reporting.

**Explanation**

Two instances of Wavefront collector are currently installed and running: a v1.20 DaemonSet collector and a v1.26 Deployment collector. 
Both Wavefront collectors are running and collecting metrics. 
Only the v1.26 Deployment collector instance should be running. 

**Workaround**

You must remove the v1.20 DaemonSet Wavefront collector and leave the v1.26 Deployment collector running.

To remove the DaemonSet Wavefront collector:

1. Save the DaemonSet YAML creation file as `wf_daemonset.yaml`. 
Keep a copy of the file in case you need to restore the DaemonSet Wavefront collector.  

1. To delete the Wavefront Collector DaemonSet:

    ```
    kubectl delete daemonset wavefront-collector -n pks-system
    ```

If you later decide that you need to restore the DaemonSet collector, 
you can restore using the DaemonSet yaml creation file you saved earlier.

1. To restore the DaemonSet collector:

    ```
    kubectl apply -f wf_daemonset.yaml 
    kubetcl get daemonset/wavefront-collector -n pks-system -o yaml > wf_daemonset.yaml
    ```

<hr>
#### <a id='1-10-0-tags-lost-during-update'></a> Tags Applied Using tkgi cli Commands Are Removed during `tkgi update-cluster` 

**Symptom**

The tags you applied to a cluster using the tkgi cli `--tags` parameter are removed whenever you run `tkgi update-cluster`.

**Workaround**

Specify the `--tags` parameter when updating a cluster using `tkgi update-cluster`:

1. To confirm the existing tags on a cluster:

    ```
    tkgi cluster CLUSTER-NAME
    ```

    Where `CLUSTER-NAME` is the name of the cluster to update.  
<br>
    Note the tags listed under `Tags:`.  

1. When running `tkgi update-cluster`, include the `--tags` parameter, specifying all of the existing tags on the cluster.

<hr>
#### <a id="1-10-0-renamed-ops-man"></a> TKGI MC Unable to Manage TKGI after Restoring the TKGI Control Plane from Backup

**Symptom**

After you restore Ops Manager and the <%= vars.control_plane %> VM from backup, <%= vars.k8s_runtime_abbr %> functions normally, 
but your <%= vars.k8s_runtime_abbr %> MC tabs include the following error: product pivotal-container service is not deployed. 

**Explanation**

<%= vars.k8s_runtime_abbr %> MC is associated with an Ops Manager with a specific name. 
If you rename Ops Manager with a new name while restoring, 
your <%= vars.k8s_runtime_abbr %> MC will not recognize the restored Ops Manager and cannot manage it.  

<hr>
#### <a id="1-10-0-all-saml-are-signed"></a> SAML Authentication Requests Are Always Signed

**Symptom**

After you disable the SAML Identity Provider **Sign Authentication Requests** setting on the <%= vars.product_tile %> tile, 
SAML IdP authentication requests continue to be signed.   

<hr>
#### <a id="1-10-0-errors-after-reinstall"></a> BOSH Director Logs the Error 'Duplicate vm extension name'

<%#
This issue is fixed in [< %= vars.k8s_runtime_abbr % > v1.10.6](#1-10-6-features).
#%>

**Symptom**

After you uninstall <%= vars.k8s_runtime_abbr %>, then reinstall <%= vars.k8s_runtime_abbr %> in the same environment, 
BOSH Director logs errors similar to the following:  

```
.../gems/bosh-director-0.0.0/lib/bosh/director/deployment_plan/cloud_manifest_parser.rb:120:in `parse_vm_extensions': Duplicate vm extension name 'disk_enable_uuid' (Bosh::Director::DeploymentDuplicateVmExtensionName)
```

**Explanation**

The `pivotal-container-service` cloud-config was not removed when you uninstalled the <%= vars.k8s_runtime_abbr %> tile, 
and it remained active.
When you reinstalled the <%= vars.k8s_runtime_abbr %> tile, an additional `pivotal-container-service` cloud-config was created, 
causing the metrics_server to fall into a crash-loop state.  

**Workaround**

You must manually remove the `pivotal-container-service` cloud-config after removing your <%= vars.k8s_runtime_abbr %> deployment, 
including after removing the <%= vars.k8s_runtime_abbr %> tile from Ops Manager.  

For more information, see ["Duplicate vm extension name" 
error when metrics_server runs on Director VM in Tanzu Kubernetes Grid Integrated Edition]
(https://community.pivotal.io/s/article/5000e00001oHXvP1631027033087?language=en_US) 
in the VMware Tanzu Community Knowledge Base.


<hr>
#### <a id="1-10-0-azure-hostnames-not-resolved"></a> Node Hostnames Are Not Resolved for BYO DNS in Azure Environments

**Symptom**

If you use a bring-your-own DNS configuration in Azure environments, 
node hostnames are not resolved on your <%= vars.k8s_runtime_abbr %> clusters, and kubectl returns a "no such host" error:

```
Error from server: Get "...": dial tcp: lookup ... on ... no such host
```

**Explanation**

On Azure, the Azure CPI uses BOSH `agent_id` GUIDs as the VM name. 
Additionally, the Azure Kubernetes cloud provider mandates the VM name matches the hostname 
and that the hostname is resolvable without using search domains.

<%= vars.k8s_runtime_abbr %> on Azure relies on Dynamic DNS updates via DHCP to allow resolvable K8s node names. 
Environments with a bring-your-own DNS server configuration must provide an alternative method 
for updating DNS entries.


<hr>

#### <a id="1-10-0-logs-not-forwarded"></a> Some Kubernetes Logs Are Not Forwarded after Upgrading

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.7](#1-10-7-bug-fixes).  

**Symptom**

After you upgrade <%= vars.k8s_runtime_abbr %> to v1.10.0, some Kubernetes logs are no longer forwarded by Fluent Bit.

**Explanation**

In <%= vars.k8s_runtime_abbr %> v1.10.0, Fluent Bit has been upgraded from v1.3.4 to v1.5.7. 
In Fluent Bit v1.5.7, the default Kubernetes annotation buffer size is 32&nbsp;KB, 
limiting the size of Kubernetes log metadata to 32&nbsp;KB by default. 
The Kubernetes log metadata in your environment exceeds this limit, and the log entries have been discarded.  

**Workaround**

To reduce the length of the Kubernetes metadata applied to your log entries, 
reduce the total size of the Kubernetes annotation environment variables you have defined in your environment. 


<hr>

#### <a id="1-10-0-cvds-with-nvds"></a> <%= vars.k8s_runtime_abbr %> Does Not Support CVDS / NVDS Mixed Environments

<%= vars.k8s_runtime_abbr %> does not support environments where there are multiple matching networks, such as a mixed CVDS/NVDS environment.

**Symptom**

<%= vars.k8s_runtime_abbr %> logs errors similar to the following in an environment with multiple matching networks:

```
LastOperationstatus='failed', description='Instance provisioning failed: 
There was a problem completing your request. Please contact your operations team providing the following information: 
service: p.pks, service-instance-guid: ..., broker-request-id: ..., task-id: ..., operation: create, 
error-message: Unknown CPI error 'Unknown' with message 'undefined method `mob' for #&lt;VimSdk::Vim::OpaqueNetwork:' in create_vm' CPI method
```

**Explanation**

<%= vars.k8s_runtime_abbr %> cannot identify which of the matching networks you intend to use and has selected the wrong network.

<hr>

#### <a id="1-10-0-incorrect-worker-count"></a> `tkgi clusters` Returns the Incorrect Number of Worker Instances


This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.7](#1-10-7-bug-fixes).

**Symptom**

The `tkgi clusters --json` command returns an incorrect `kubernetes_worker_instances` worker instance count 
for clusters configured using a Compute Profile.  


<hr>

#### <a id="1-10-0-log4j-cve-2021-44228"></a> Apache Log4j Vulnerabilities CVE-2021-44228 and CVE-2021-45046

This issue is fixed in [<%= vars.k8s_runtime_abbr %> v1.10.8](#1-10-8-features).  

Due to the Apache Log4j vulnerabilities [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228) 
and [CVE-2021-45046](https://nvd.nist.gov/vuln/detail/CVE-2021-45046), 
VMware recommends that you take the following steps as soon as possible:

1. Upgrade to [Ops Manager v2.10.24](https://docs.pivotal.io/ops-manager/2-10/release-notes.html#2-10-24) or later.  
1. Upgrade to [<%= vars.k8s_runtime_abbr %> v1.10.8](#1-10-8) or later.  

    <p class="note"><strong>Note</strong>: When upgrading <%= vars.k8s_runtime_abbr %> to mitigate the Apache Log4j vulnerability
      you must also upgrade all <%= vars.k8s_runtime_abbr %> clusters.
    </p>
    
If you cannot upgrade Ops Manager or <%= vars.k8s_runtime_abbr %>, 
VMware recommends that you implement the workaround steps provided in the VMware Tanzu Knowledge Base:  

* If you cannot upgrade Ops Manager: 
[Instructions to address CVE-2021-44228 in Tanzu Operations Manager](https://community.pivotal.io/s/article/5004y00001mPn2N1639255611105?language=en_US).  
* If you cannot upgrade <%= vars.k8s_runtime_abbr %>: 
[Workaround instructions to address CVE-2021-44228 in Tanzu Kubernetes Grid Integrated](https://community.pivotal.io/s/article/Workaround-instructions-to-address-CVE-2021-44228-in-Tanzu-Kubernetes-Grid-Integrated?language=en_US).  


For more information about the impact of the Log4j [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228) 
and [CVE-2021-45046](https://nvd.nist.gov/vuln/detail/CVE-2021-45046) vulnerabilities on VMware products, 
see [VMSA-2021-0028](https://www.vmware.com/security/advisories/VMSA-2021-0028.html) 
in _Advisories_ in the VMware Security Solutions documentation.  

<hr>

#### <a id="1-10-0-worker-node-not-ready"></a> A Worker Node on a Rebooted Windows VM Might Remain Not Ready

**Symptom**

Although a rebooted Windows VM returns to the `running` state, 
a worker node on the running VM might occasionally be duplicated and the original of the duplicates 
remains in the `terminating` state and is not ready.  

**Workaround**

To remove a not ready node from a Kubernetes cluster:

1. Determine which node is in the `terminating` state:  

    ```
    kubectl get nodes 
    ```
1. Remove the old VolumeAttachment bound to the problem node:

    1. To list the VolumeAttachments:
        
        ```
        kubectl get volumeattachment
        ```
    1. Determine which VolumeAttachment is used by the problem node.
    1. To remove the VolumeAttachment from the problem node:  
    
        ```
        kubectl delete volumeattachment ATTACH-NAME
        ```
        Where `ATTACH-NAME` is the VolumeAttachment name.  
        
1. To delete the problem node from the Kubernetes cluster:
    
    ```
    kubectl delete node NODE-NAME
    ```
    
    Where `NODE-NAME` is the name of the problem node.  

<hr>

## <a id="management-console-1-10-0"></a> <%= vars.k8s_runtime_abbr %> Management Console v1.10.0

**Release Date**: January 28, 2021

### <a id="management-console-1-10-0-snapshot"></a>Product Snapshot

<p class="note"><strong>Note</strong>: <%= vars.product_short %> Management Console provides an opinionated
    installation of <%= vars.k8s_runtime_abbr %>. The supported versions may differ from or be more limited than
    what is generally supported by <%= vars.k8s_runtime_abbr %>.</p>

<table class="nice">
    <th>Element</th>
    <th>Details</th>
    <tr>
      <td>Version</td>
      <td>v1.10.0</td>
    </tr>
    <tr>
      <td>Release date</td>
      <td>January 28, 2021</td>
    </tr>
    <tr>
      <td>Installed Tanzu Kubernetes Grid Integrated Edition version</td>
      <td>v1.10.0</td>
    </tr>
    <tr>
      <td>Installed Ops Manager version</td>
      <td>v2.10.5</td>
    </tr>
    <tr>
      <td>Installed Kubernetes version</td>
        <td>v1.19.6</td>
    </tr>
    <tr>
      <td>Installed Harbor Registry version</td>
      <td>v2.1.2</td>
    </tr>
        <tr>
        <td>Linux stemcell</td>
        <td>v621.97</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.29 or later</td>
    </tr>
</table>

### <a id='management-console-1-10-0-upgrade'></a>Upgrade Path <%#CONFIRM BEFORE GA%>

The supported upgrade paths to <%= vars.product_short %> Management Console v1.10.0 are from <%= vars.k8s_runtime_abbr %> MC v1.9.3 and earlier v1.9 patches.


### <a id="management-console-1-10-0-features"></a>Features

<%= vars.product_short %> Management Console v1.10.0 updates include:  

* **[Bug Fix]** Fixes [TKGI Management Console regenerates certificates if the NSX Manager admin password changes](https://docs.pivotal.io/tkgi/1-9/release-notes.html#1-9-1-nsxt-cert).
* **[Bug Fix]** The link to the discontinued Kubernetes Dashboard is no longer provided on the <%= vars.k8s_runtime_abbr %> Management Console.  
* **[BETA]** Supports high availability (HA) mode in <%= vars.product_short %> Management Console.
You can now scale the number of VM instances for the following <%= vars.product_short %> control plane jobs:

    * <%= vars.product_short %> API and UAA
    * <%= vars.product_short %> database
* Adds support for Antrea CNI when deploying to vSphere without NSX-T networking.
* Adds support for a No-NAT with virtual switch (VSS/VDS) topology.
* Adds support for changing the compute profile after cluster creation.
* Adds support for adding labels and taints to nodes when creating compute profiles.
* Enforces the vSphere standard for passwords when creating local user accounts.

<%#
### < a id="management-console-1-10-0-breaking-changes"></ a> Breaking Changes

<%= vars.k8s_runtime_abbr % 
> Management Console v1.10.0 has the following breaking changes. 
#%>

### <a id="management-console-1-10-0-known-issues"></a> Known Issues

The <%= vars.product_short %> Management Console v1.10.0 has the following known issues:

<hr>
#### <a id="management-console-1-10-0-ui-customcerts"></a> Management Console UI Does Not Open If the Management Console Uses Custom Certificates

This issue is fixed in [<%= vars.k8s_runtime_abbr %> MC v1.10.1](#management-console-1-10-1-features).

**Symptom**

If you configure <%= vars.product_short %> Management console with custom certificates, the management console
interface fails to open. This is caused by the failure of the script `/etc/vmware/pks-appliance-tls.sh` on the management console VM.

**Workaround**

1. Use SSH to log in to the management console VM.
1. Open `/etc/vmware/pks-appliance-tls.sh` in a text editor.
1. Replace line 32 with the following code: <pre>sed -i '/^$/d' $file</pre>
1. Reboot the management console VM.

<hr>
#### <a id="management-console-1-10-0-vrli-https"></a> vRealize Log Insight Integration Does Not Support HTTPS Connections

**Symptom**

The <%= vars.product_short %> Management Console integration to vRealize Log Insight does not support
connections to the HTTPS port on the vRealize Log Insight server.

**Workaround**

1. Use SSH to log in to the <%= vars.product_short %> Management Console appliance VM.
1. Open the file `/lib/systemd/system/pks-loginsight.service` in a text editor.
1. Add `-e LOG_SERVER_ENABLE_SSL_VERIFY=false`.
1. Set `-e LOG_SERVER_USE_SSL=true`.

    The resulting file should look like the following example:

    ```
    ExecStart=/bin/docker run --privileged --restart=always --network=pks
    -v /var/log/journal:/var/log/journal
    --name=pks-loginsight
    -e TYPE=gear2-vm
    -e LOG_SERVER_HOST=${LOGINSIGHT_HOST}
    -e LOG_SERVER_PORT=${LOGINSIGHT_PORT}
    -e LOG_SERVER_ENABLE_SSL_VERIFY=false
    -e LOG_SERVER_USE_SSL=true
    -e LOG_SERVER_AGENT_ID=${LOGINSIGHT_ID}
    pksoctopus/vrli-journald:v07092019
    ```

1. Save the file and run `systemctl daemon-reload`.
1. To restart the vRealize Log Insight service, run `systemctl restart pks-loginsight.service`.

<%= vars.product_short %> Management Console can now send logs to the HTTPS port on the vRealize Log Insight server.

<hr>
#### <a id="management-console-1-10-0-vsphere-ha"></a> vSphere HA causes Management Console ovfenv Data Corruption

**Symptom**

If you enable vSphere HA on a cluster, if the TKGI Management Console appliance VM is running on a host
in that cluster, and if the host reboots, vSphere HA recreates a new TKGI Management Console appliance
VM on another host in the cluster. Due to an issue with vSphere HA, the `ovfenv` data for the newly
created appliance VM is corrupted and the new appliance VM does not boot up with the correct network configuration.

**Workaround**

- In the vSphere Client, right-click the appliance VM and select **Power** > **Shut Down Guest OS**.
- Right-click the appliance again and select Edit Settings.
- Select **VM Options** and click **OK**.
- Verify under Recent Tasks that a `Reconfigure virtual machine` task has run on the appliance VM.
- Power on the appliance VM.

<hr>
#### <a id="management-console-1-10-0-k8s-profile"></a> Base64 encoded file arguments are not decoded in Kubernetes profiles

**Symptom**

Some file arguments in Kubernetes profiles are base64 encoded. When the management console displays the Kubernetes profile,
some file arguments are not decoded.

**Workaround**

Run `echo "$content" | base64 --decode`

<hr>
#### <a id="management-console-1-10-0-network-profile"></a> Network profiles not immediately selectable

**Symptom**

If you create network profiles and then try to apply them in the Create Cluster page, the new profiles
are not available for selection.

**Workaround**

Log out of the management console and log back in again.

<hr>
#### <a id="management-console-1-10-0-cluster-summary"></a> Real-Time IP information not displayed for network profiles

**Symptom**

In the cluster summary page, only default IP pool, pod IP block, node IP block values are displayed,
rather than the real-time values from the associated network profile.  

<hr>
#### <a id='management-console-1-10-0-harbor-storage-config'></a> Error After Modifying Your Harbor Storage Configuration

**Symptom**

You receive the following error after modifying your existing Harbor installation's storage configuration:

```
Error response from daemon: manifest for ... not found: manifest unknown: manifest unknown
```


**Explanation**

Harbor does not support modifying an existing Harbor installation's storage configuration.

**Workaround**

To modify your Harbor storage configuration,
re-install Harbor. Before starting Harbor, configure the new Harbor installation with the desired configuration.

<hr>
#### <a id='management-console-1-10-0-re-import-windows-stemcell'></a> Windows Stemcells Must be Re-Imported After Upgrading Ops Manager

**Symptom**

After upgrading Ops Manager, your Management Console does not recognize a Windows stemcell imported when using the prior version of Ops Manager.

**Workaround**

If your Management Console does not recognize a Windows stemcell after upgrading Ops Manager:

1. Re-import your previously imported Windows stemcell.  
2. **Apply Changes** to <%= vars.k8s_runtime_abbr %> MC.  

<hr>
#### <a id='management-console-1-10-0-addons-spec'></a> Management Console Deletes Custom Workload Configurations

This issue is fixed in [<%= vars.k8s_runtime_abbr %> MC v1.10.2](#management-console-1-10-2-features).  

**Symptom**

Your Management Console deletes the custom workload configurations that you have added to a 
Plan **Add-ons - Use with caution** field.
