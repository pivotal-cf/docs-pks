---
title: Tanzu Kubernetes Grid Integrated Edition Certificates
owner: TKGI
---

This topic summarizes <%= vars.product_short %> (<%= vars.k8s_runtime_abbr %>) certificates
and how to rotate them.

## <a id="overview"></a>Overview of <%= vars.k8s_runtime_abbr %> Certificates

<%= vars.k8s_runtime_abbr %> secures all communication between <%= vars.k8s_runtime_abbr %> control plane components and <%= vars.k8s_runtime_abbr %>-managed Kubernetes clusters
using Transport Layer Security (TLS) validated by RSA Certificate Authority (CA) certificates and leaf certificates that they issue:  

* **<%= vars.k8s_runtime_abbr %> Control Plane Certificates**  

    <%= vars.k8s_runtime_abbr %> control plane certificates secure <%= vars.k8s_runtime_abbr %> control plane component communication 
    with the TKGI API server and TKGI DB server.      

* **<%= vars.k8s_runtime_abbr %> User-Configurable Certificates**  

    <%= vars.k8s_runtime_abbr %> user-configurable <%= vars.k8s_runtime_abbr %> certificates must be configured by <%= vars.k8s_runtime_abbr %> administrators.  

* **BOSH Certificates used by <%= vars.k8s_runtime_abbr %>**  
    
    The BOSH certificates used by <%= vars.k8s_runtime_abbr %>, are generated by BOSH.  
    
    
* **<%= vars.k8s_runtime_abbr %>-Provisioned Kubernetes Cluster Certificates**  

    The <%= vars.k8s_runtime_abbr %>-Provisioned Kubernetes Cluster certificates, and their leaf certificates, used by Kubernetes clusters 
    are unique to each Kubernetes cluster and are automatically generated by <%= vars.k8s_runtime_abbr %>. 
    <%= vars.k8s_runtime_abbr %> manages the life-cycle of the per-cluster CA and the certificates it signs.  
 
    * **NSX-T-Only TKGI Kubernetes Cluster Certificates**  
    
        NSX-T-only <%= vars.k8s_runtime_abbr %> Kubernetes cluster certificates  must be registered with NSX Manager.           

<br>
The certificates used by <%= vars.k8s_runtime_abbr %> automatically expire and must be rotated. 
For more information, see 
[Check Certificate Expiration Dates](#check-expiration) and [Rotating Certificates](#rotate) below.  

For more information about certificates, see [Certificate Types](https://docs.pivotal.io/ops-manager/security/pcf-infrastructure/certificate-types.html) 
in the Ops Manager documentation.  


## <a id="check-expiration"></a>Check Certificate Expiration Dates

Before rotating <%= vars.k8s_runtime_abbr %> certificates you should determine which certificates are approaching expiration.  

To review certificate expiration dates:  

* Review certificate expiration dates using Ops Manager. 
    To see certificate expiration dates, open the Ops Manager and select the **Certificates** tab.  
* Use CredHub to export the certificate expiration dates for the <%= vars.k8s_runtime_abbr %> deployment or one or more clusters. 
For more information, see 
[How to get the expiry dates of all CA's & certificates in the PKS deployment and clusters](https://community.pivotal.io/s/article/How-to-get-expiry-date-of-all-CA-s-certificates-in-PKS-deployment-and-clusters) 
in the VMware Tanzu Knowledge Base.  
* Use the <%= vars.k8s_runtime_abbr %> CLI to export the certificate expiration dates for Kubernetes cluster certificates. 
For more information, see [List TLS Certificates](https://docs.pivotal.io/tkgi/1-12/rotate-cluster-certificates.html#certs-list) 
in _Rotate Kubernetes Cluster Certificates_.  





## <a id="rotate"></a>Rotating Certificates

<%= vars.recommended_by %> that <%= vars.k8s_runtime_abbr %> administrators occasionally verify the expiration dates 
of their <%= vars.k8s_runtime_abbr %> certificates, and when needed, rotate expiring certificates. 
See [Check Certificate Expiration Dates](#check-expiration) above to review your <%= vars.k8s_runtime_abbr %> certificate expiration dates.  

<p class="note warning"><strong>Warning:</strong>
Never use the CredHub Maestro <code>maestro regenerate ca/leaf --all</code> command to rotate <%= vars.k8s_runtime_abbr %> certificates.
</p>

The following summarizes the rotation requirements for the certificates used in <%= vars.k8s_runtime_abbr %> environments:  

* **<%= vars.k8s_runtime_abbr %> Control Plane Certificates**   


    <table>
        <tr>
            <th width=300px>Certificate</th>
            <th>Default Expiration</th>
            <th>Rotation Description</th>
        </tr>
        <tr>
            <td><code>pxc&#95;server&#95;ca</code><br>and&nbsp;leaf&nbsp;certificates</td>
            <td rowspan=4>Four years</td>
            <td rowspan=4>See <a href="rotate-tile-certificates.html#control">Rotate <%= vars.k8s_runtime_abbr %> Control Plane Certificates</a> 
                or <a href="https://kb.vmware.com/s/article/88309">How to rotate TKGI control plane CA and leaf certificates</a> in the VMware Tanzu Knowledge Base.
            </td>
        </tr>
        <tr><td><code>pxc&#95;galera&#95;ca</code><br>and&nbsp;leaf&nbsp;certificates</td></tr>
        <tr><td><code>uaa&#95;active&#95;pks&#95;saml&#95;key&#95;2018</code><br>and&nbsp;leaf&nbsp;certificates</td></tr>
        <tr><td><code>kubo&#95;odb&#95;ca&#95;2018</code><br>and&nbsp;leaf&nbsp;certificates</td></tr>
    </table>

* **<%= vars.k8s_runtime_abbr %> User-Configurable <%= vars.k8s_runtime_abbr %> Certificates**  

    <table>
        <tr>
            <th width=300px>Certificate</th>
            <th>Default Expiration</th>
            <th>Rotation Description</th>
        </tr>
        <tr>
            <td><code>pks_tls</code></td>
            <td>Admin-defined</td>
            <td>Open the <%= vars.k8s_runtime_abbr %> API tab on the <%= vars.k8s_runtime_abbr %> tile.
                <br><br>The <%= vars.k8s_runtime_abbr %> API Service certificate is used to secure access to the <%= vars.k8s_runtime_abbr %> API endpoint.  
            </td>
        </tr>
        <tr>
            <td><code>nsx-t-superuser-certificate</code></td>
            <td>Admin-defined</td>
            <td>See <a href="nsxt-generate-pi-cert.html#certificates-nsx-pid-rotate">Rotate the Principal Identity Certificate and Key</a>
                in <i>Generating and Registering the NSX Manager Superuser Principal Identity Certificate and Key</i> 
                or <a href="https://kb.vmware.com/s/article/80355">How to renew the nsx-t-superuser-certificate used by Principal Identity user</a> in the VMware Tanzu Knowledge Base.
                <br><br>The NSX-T SuperUser certificate is used to secure access to the NSX-T manager.  
            </td>
        </tr>
    </table>

* **BOSH Certificates used by <%= vars.k8s_runtime_abbr %>**  

    <table>
        <tr>
            <th width=300px>Certificate</th>
            <th>Default Expiration</th>
            <th>Rotation Description</th>
        </tr>
        <tr>
            <td><code>bosh_dns_health_client_tls</code></td>
            <td rowspan=4>One year</td>
            <td rowspan=4>See <a href="https://kb.vmware.com/s/article/88187)">How to rotate bosh-dns certificates in TKGI 1.9+ using maestro</a> 
                in the VMware Tanzu Knowledge Base.
            </td>            
        </tr>
        <tr><td><code>bosh_dns_health_server_tls</code></td></tr>
        <tr><td><code>dns_api_client_tls</code></td></tr>
        <tr><td><code>dns_api_server_tls</code></td></tr>
    </table>
    
    <br>
    To extend the default expiration period, see [Overriding Duration for Certificates](https://docs.pivotal.io/ops-manager/2-10/security/pcf-infrastructure/configure-certificate-duration-overrides.html) 
    in the Ops Manager documentation.  

* **TKGI Kubernetes Cluster Certificates**  

    <table>
        <tr>
            <th width=300px>Certificate and leaf certificates</th>
            <th>Default Expiration</th>
            <th>Rotation Description</th>
        </tr>
        <tr>
            <td><code>kubo_master_ca_2021</code>
                <br><br>and&nbsp;leaf&nbsp;certificates:
                <br><code>tls-kubernetes-2018</code>,
                <br><code>tls-ncp-2018 (with NSX-T)</code>,
                <br><code>tls-nsx-kube-proxy-2018 (with NSX-T)</code>
            </td>
            <td rowspan=4>Four years</td>
            <td rowspan=4>See <a href="rotate-cluster-certificates.html">Rotate Kubernetes Cluster Certificates</a>.</td>
        </tr>
        <tr>
            <td><code>kubo_ca_2018</code>
                <br><br>and&nbsp;leaf&nbsp;certificates:
                <br><code>tls-kubelet-2018</code>,
                <br><code>tls-metrics-server-2018</code>,
                <br><code>tls-kubelet-client-2018</code>,
                <br><code>tls-kube-controller-manager-2018</code>
            </td>
        </tr>
        <tr><td><code>etcd_ca_2018</code>
                <br><br>and&nbsp;leaf&nbsp;certificates:
                <br><code>tls-etcd-2018-2</code>,
                <br><code>tls-etcdctl-2018-2</code>,
                <br><code>tls-etcdctl-root-2018-2</code>,
                <br><code>tls-etcdctl-flanneld-2018-2</code>
            </td>
        </tr>
    </table>    

    * **NSX-T-Only TKGI Kubernetes Cluster Certificates**  

        <table>
            <tr>
                <th width=300px>Certificate</th>
                <th>Default Expiration</th>
                <th>Rotation Description</th>
            </tr>
            <tr>
                <td><code>tls-nsx-t</code></td>
                <td>Two years</td>
                <td rowspan=2>See <a href="rotate-cluster-certificates.html#rotate-only-nsx">Rotate NSX-T Certificates Only</a>
                    in <i>Rotate Kubernetes Cluster Certificates</i>.
                    <br>The NSX-T only certificates must be registered with NSX Manager.
                </td>
            </tr>
            <tr>
                <td><code>tls-nsx-lb</code></td>
                <td>Five years</td>
            </tr>
        </table>